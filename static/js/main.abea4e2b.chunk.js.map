{"version":3,"sources":["serviceWorker.ts","store/shapes/actions.ts","store/shapes/types.ts","interfaces/designTemplates.ts","components/DiagramContainer/Shapes/MaxPooling.tsx","components/DiagramContainer/Shapes/FullyConnected.tsx","components/DiagramContainer/Shapes/Flatten.tsx","components/DiagramContainer/Shapes/Convolutional.tsx","components/DiagramContainer/Shapes/Addition.tsx","components/DiagramContainer/Shapes/Concatenate.tsx","components/DiagramContainer/Shapes/Input.tsx","components/DiagramContainer/Shapes/Output.tsx","components/DiagramContainer/Shapes/Dropout.tsx","components/DiagramContainer/Shapes/BatchNormalization.tsx","interfaces/shapes.ts","utils/seedShapes.ts","interfaces/activations.ts","components/ToolBar/index.tsx","store/config/actions.ts","store/config/types.ts","store/mouse/actions.ts","store/mouse/types.ts","components/TemplatesModal/Template.tsx","components/TemplatesModal/index.tsx","store/toasts/actions.ts","store/toasts/types.ts","interfaces/arrowMap.ts","interfaces/queue.ts","model/generateCode/pytorch.ts","model/graphCodes.ts","model/graphAlgorithms.ts","model/generateCode/types.ts","components/CodeGeneratorPanel/index.tsx","components/SideBar/index.tsx","utils/distance.ts","components/DiagramContainer/DraggableSVG.tsx","model/checkArrow.ts","components/DiagramContainer/Arrows.tsx","components/DiagramContainer/Defs.tsx","components/DiagramContainer/index.tsx","components/DetailsBar/Forms/FormList.ts","components/DetailsBar/Forms/FullyConnectedForm.tsx","components/DetailsBar/Forms/ConvolutionalForm.tsx","components/DetailsBar/index.tsx","components/Toasts/index.tsx","utils/time.ts","App.tsx","store/shapes/reducers.ts","store/mouse/reducers.ts","store/toasts/reducers.ts","store/config/reducers.ts","store/index.ts","index.tsx"],"names":["Boolean","window","location","hostname","match","setShapes","shapes","type","payload","editActiveShape","timestamp","meta","updateShapePositionAction","x","y","TEMPLATE_ABSTRACT","TEMPLATE_FILLED","abstractTemplateStyle","MaxPooling","id","height","width","OFFSET","strokeWidth","stroke","this","props","isMarked","fill","rx","arr","Array","map","_","index","key","markerEnd","points","length","alignmentBaseline","textAnchor","fontSize","dy","fontWeight","templateDesign","renderAbstractTemplate","renderFilledTemplate","React","centerPosition","WIDTH","HEIGHT","centerPositionAbstract","FullyConnected","nodesCount","additionalInfo","e","Math","floor","inputDimension","outputDimension","Flatten","Convolutional","kernelSize","stride","outChannels","Addition","transform","Concatenate","Input","Output","Dropout","create","i","j","BatchNormalization","ShapeCenterPosition","constX","constY","layersMap","inChannels","fc1","name","Date","getTime","shape","fc2","fc3","fc4","fc5","concat","output","arrows","Map","set","newInput","newOutput","seedInitShapes","seedNewShapes","ToolBar","state","isFullScreenEnabled","refSVG","refCanvas","refLink","handleDownloadImage","a","canvas","current","ctx","getContext","svgContent","config","svgRef","innerHTML","Canvg","from","start","download","image","toDataURL","replace","setAttribute","handleStyleTemplate","designTemplate","updateDesignTemplate","handleNewTemplate","toggleFullScreen","document","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","setState","oldState","className","ref","style","background","display","OverlayTrigger","overlay","Tooltip","placement","onClick","viewBox","d","Form","float","marginTop","marginRight","Check","checked","label","connect","design","updateMouseLocation","Template","Card","bsPrefix","chooseTemplate","Body","title","Footer","desc","TemplatesModal","handleTemplate","temp","onHide","Modal","size","aria-labelledby","centered","Header","closeButton","Title","CardDeck","Button","addToast","ArrowMap","otherArrowMap","activationMap","connectedToMap","connectedToMeMap","value","newKey","isArrowAlreadyExists","has","get","push","sourceShape","forEach","targetShape","deleteArrow","filter","s","delete","newList","Queue","items","element","shift","isEmpty","undefined","generateFullPyTorchCode","sortedList","layersOutput","connectionsOutput","currShape","inputDim","outputDim","previousIndex","findIndex","getConnectedToMe","allIndexes","connectedShape","join","fillPytorchCode","headerCode","generateGraphCodeableWithErrors","vertexes","arrowsMap","addNotifcation","codedMap","inputShape","discoveredShapes","Set","Q","add","enqueue","v","dequeue","getConnectedToCount","getConnectedTo","w","BFSAncestorsCount","L","S","vertex","getConnectedToMeCount","node","pop","m","topologicalSort","CodeGeneratorPanel","pytorchCode","isValidCode","codeMap","console","log","Tab","Container","defaultActiveKey","Row","Col","sm","Nav","variant","Item","Link","eventKey","Content","Pane","showLineNumbers","language","githubGist","customStyle","tabSize","maxHeight","wrapLines","SideBar","modalShow","codeModalShow","handleSetModal","pred","handleSetCodeModal","createShape","shapeName","layer","newObject","random","addShape","toggleActive","getActiveShape","find","targetTimeStamp","Dropdown","Toggle","marginBottom","Menu","Divider","paddingLeft","ListGroup","action","active","show","newShape","manhattanDistance","x1","y1","x2","y2","fixedDistanceFromPolygon","xMid","yMid","xText","oppositeSide","alpha","atan","A","sin","cos","DraggableSVG","handlePointerDown","el","target","bbox","getBoundingClientRect","clientX","left","clientY","top","setPointerCapture","pointerId","currentMove","historyX","historyY","offset","handlePointerMove","newX","newY","currentShape","abs","handlePointerUp","getSourceShape","addArrowAndUpdateConnections","onPointerDown","onPointerUp","onPointerMove","children","toasts","source","Arrows","filledArrow","markerMid","abstractArrow","activationFunction","yText","isActiveArrow","sourceArrow","handleArrowClick","fullyConnectedArrows","arr1","arr2","midArr1","midArr2","polyPoints","sX","sY","tX","tY","p","getList","entry","Defs","orient","refX","refY","markerWidth","markerHeight","DiagramContainer","refElement","isMouseInsideSVG","editActiveArrow","handleClick","event","currentTarget","handlePointerMovement","nativeEvent","offsetX","offsetY","handleRightClick","preventDefault","handleKeyDown","keyCode","deleteShape","handleMouseLeave","handleMouseEnter","updateSVGRef","onMouseMove","onContextMenu","onKeyDown","onMouseLeave","onMouseEnter","role","tabIndex","mouse","xPointer","yPointer","formsMap","Group","Label","Control","shapeAdditionalInfo","onChange","handleParamaterChange","custom","handleParameterChangeByValue","DetailsBar","setShapeAdditionalInfo","handleArrowActivationChange","activation","editActivationFunction","handleChangeName","editShapeName","handleChangePosition","axisToChange","handleDescriptionChange","updateShapeDescription","parameters","textAlign","controlId","placeholder","paddingRight","step","Accordion","description","as","Collapse","rows","getArrowActivation","newName","func","Toasts","handleNotificationRemoval","removeToast","nowTime","aria-live","aria-atomic","position","zIndex","bottom","notifications","notification","Toast","onClose","delay","autohide","seconds","interval","timeSince","App","initialState","rootReducer","combineReducers","copiedArrows","deleteShapeArrows","matchShape","arrow","arrowsClone","n","store","middlewares","thunkMiddleware","middleWareEnhancer","applyMiddleware","createStore","composeWithDevTools","configureStore","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.abea4e2b.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { \r\n\tADD_SHAPE,\r\n\tSET_SHAPES,\r\n\tDELETE_SHAPE,\r\n\tEDIT_SHAPE_ACTIVATION,\r\n\tUPDATE_SHAPE_LOCATION,\r\n\tShapeActionTypes,\r\n\tADD_ARROW,\r\n\tUPDATE_SHAPE_ARROWS,\r\n\tEDIT_SHAPE_NAME,\r\n\tUPDATE_SHAPE_DESCRIPTION,\r\n\tSET_SHAPE_ADDITONAL_INFO,\r\n\tEDIT_ARROW_ACTIVATION,\r\n\tEDIT_ACTIVATION_FUNCTION,\r\n\tDELETE_ARROW\r\n} from './types';\r\nimport { Shape, AdditionalInformationType } from '../../interfaces/IShape';\r\nimport { AllActivationFunctions } from '../../interfaces/activations';\r\n\r\nexport function addShape(newShape: Shape) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: ADD_SHAPE,\r\n\t\tpayload: newShape\r\n\t};\r\n}\r\n\r\nexport function setShapes(shapes: Shape[]) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: SET_SHAPES,\r\n\t\tpayload: shapes\r\n\t};\r\n}\r\n\r\nexport function deleteShape() : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: DELETE_SHAPE\r\n\t};\r\n}\r\n\r\nexport function deleteArrow() : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: DELETE_ARROW\r\n\t}\r\n}\r\n\r\nexport function editActiveShape(timestamp: number) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: EDIT_SHAPE_ACTIVATION,\r\n\t\tmeta: {\r\n\t\t\ttimestamp: timestamp\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function editActivationFunction(func: AllActivationFunctions) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: EDIT_ACTIVATION_FUNCTION,\r\n\t\tpayload: {\r\n\t\t\tfunc: func\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function editActiveArrow(source: Shape, target: Shape) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: EDIT_ARROW_ACTIVATION,\r\n\t\tmeta: {\r\n\t\t\tsourceShape: source,\r\n\t\t\ttargetShape: target\r\n\t\t}\r\n\t};\r\n}\r\n\r\n\r\nexport function editShapeName(timestamp: number, name: string) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: EDIT_SHAPE_NAME,\r\n\t\tpayload: {\r\n\t\t\ttimestamp: timestamp,\r\n\t\t\tnewName: name\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function updateShapePositionAction(timestamp: number, x: number, y: number) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: UPDATE_SHAPE_LOCATION,\r\n\t\tpayload: {\r\n\t\t\ttimestamp: timestamp,\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function updateShapeDescription(timestamp: number, desc: string) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: UPDATE_SHAPE_DESCRIPTION,\r\n\t\tpayload: {\r\n\t\t\ttimestamp: timestamp,\r\n\t\t\tdesc: desc\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function addArrowAndUpdateConnections(source: Shape, target: Shape) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: ADD_ARROW,\r\n\t\tpayload: {\r\n\t\t\tsource: source,\r\n\t\t\ttarget: target\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function updateShapeArrows(timestamp: number) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: UPDATE_SHAPE_ARROWS,\r\n\t\tmeta: {\r\n\t\t\ttimestamp: timestamp\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function setShapeAdditionalInfo(timestamp: number, key: string, value: AdditionalInformationType) : ShapeActionTypes {\r\n\treturn {\r\n\t\ttype: SET_SHAPE_ADDITONAL_INFO,\r\n\t\tpayload: {\r\n\t\t\ttimestamp: timestamp,\r\n\t\t\tkey: key,\r\n\t\t\tvalue: value\r\n\t\t}\r\n\t}\r\n}","import ArrowMap from \"../../interfaces/arrowMap\";\r\nimport { Shape, AdditionalInformationType } from \"../../interfaces/IShape\";\r\nimport { AllActivationFunctions } from \"../../interfaces/activations\";\r\n//import ArrowMap from \"../../interfaces/arrowMap\";\r\n\r\nexport interface Arrow {\r\n\tsource: Shape;\r\n\ttarget: Shape;\r\n}\r\n\r\nexport interface ShapeState {\r\n\tshapes: Shape[];\r\n\tsourceShape?: Shape;\r\n\t//arrows: Map<[Shape, Shape], AllActivationFunctions>;\r\n\tarrows: ArrowMap;\r\n\t//arrows: Arrow[];\r\n\tsourceArrow?: Arrow;\r\n}\r\n\r\n// Describing the different ACTION NAMES available\r\nexport const ADD_SHAPE = \"ADD_SHAPE\";\r\nexport const SET_SHAPES = \"SET_SHAPES\";\r\nexport const DELETE_SHAPE = \"DELETE_SHAPE\";\r\nexport const DELETE_ARROW = \"DELETE_ARROW\";\r\nexport const EDIT_SHAPE_ACTIVATION = \"EDIT_SHAPE_ACTIVATION\";\r\nexport const EDIT_ARROW_ACTIVATION = \"EDIT_ARROW_ACTIVATION\";\r\nexport const EDIT_SHAPE_NAME = \"EDIT_SHAPE_NAME\";\r\nexport const UPDATE_SHAPE_LOCATION = \"UPDATE_SHAPE_LOCATION\";\r\nexport const UPDATE_SHAPE_DESCRIPTION = \"UPDATE_SHAPE_DESCRIPTION\";\r\nexport const SET_SHAPE_ADDITONAL_INFO = \"SET_SHAPE_ADDITONAL_INFO\";\r\nexport const EDIT_ACTIVATION_FUNCTION = \"EDIT_ACTIVATION_FUNCTION\";\r\n\r\nexport const ADD_ARROW = \"ADD_ARROW\";\r\nexport const UPDATE_SHAPE_ARROWS = \"UPDATE_SHAPE_ARROWS\";\r\n\r\ninterface EditActivationFunction {\r\n\ttype: typeof EDIT_ACTIVATION_FUNCTION;\r\n\tpayload: {\r\n\t\tfunc: AllActivationFunctions;\r\n\t}\r\n}\r\n\r\ninterface AddShapeAction {\r\n\ttype: typeof ADD_SHAPE;\r\n\tpayload: Shape;\r\n}\r\n\r\ninterface SetShapesAction {\r\n\ttype: typeof SET_SHAPES;\r\n\tpayload: Shape[];\r\n}\r\n\r\ninterface DeleteShapeAction {\r\n\ttype: typeof DELETE_SHAPE;\r\n}\r\n\r\ninterface DeleteArrowAction {\r\n\ttype: typeof DELETE_ARROW;\r\n}\r\n\r\ninterface EditShapeActivationAction {\r\n\ttype: typeof EDIT_SHAPE_ACTIVATION;\r\n\tmeta: {\r\n\t\ttimestamp: number;\r\n\t};\r\n}\r\n\r\ninterface EditArrowActivationAction {\r\n\ttype: typeof EDIT_ARROW_ACTIVATION,\r\n\tmeta: {\r\n\t\tsourceShape: Shape;\r\n\t\ttargetShape: Shape;\r\n\t}\r\n}\r\n\r\ninterface EditShapeNameAction {\r\n\ttype: typeof EDIT_SHAPE_NAME;\r\n\tpayload: {\r\n\t\ttimestamp: number;\r\n\t\tnewName: string;\r\n\t};\r\n}\r\n\r\ninterface UpdateShapeDescriptionAction {\r\n\ttype: typeof UPDATE_SHAPE_DESCRIPTION;\r\n\tpayload: {\r\n\t\ttimestamp: number;\r\n\t\tdesc: string;\r\n\t}\r\n}\r\n\r\ninterface UpdateShapePositionAction {\r\n\ttype: typeof UPDATE_SHAPE_LOCATION;\r\n\tpayload: {\r\n\t\ttimestamp: number,\r\n\t\tx: number,\r\n\t\ty: number\r\n\t};\r\n}\r\n\r\ninterface AddArrowAction {\r\n\ttype: typeof ADD_ARROW;\r\n\tpayload: {\r\n\t\tsource: Shape;\r\n\t\ttarget: Shape;\r\n\t}\r\n}\r\n\r\ninterface UpdateShapeArrows {\r\n\ttype: typeof UPDATE_SHAPE_ARROWS;\r\n\tmeta: {\r\n\t\ttimestamp: number;\r\n\t}\r\n}\r\n\r\ninterface SetShapeInfo {\r\n\ttype: typeof SET_SHAPE_ADDITONAL_INFO;\r\n\tpayload: {\r\n\t\ttimestamp: number;\r\n\t\tkey: string;\r\n\t\tvalue: AdditionalInformationType;\r\n\t}\r\n}\r\n\r\nexport type ShapeActionTypes =\r\n\tAddShapeAction |\r\n\tDeleteShapeAction |\r\n\tEditShapeActivationAction |\r\n\tUpdateShapePositionAction |\r\n\tAddArrowAction |\r\n\tUpdateShapeArrows |\r\n\tSetShapesAction |\r\n\tEditShapeNameAction |\r\n\tUpdateShapeDescriptionAction |\r\n\tSetShapeInfo |\r\n\tEditArrowActivationAction |\r\n\tEditActivationFunction |\r\n\tDeleteArrowAction;","export const TEMPLATE_ABSTRACT = \"TEMPLATE_ABSTRACT\";\r\nexport const TEMPLATE_FILLED = \"TEMPLATED_FILLED\";\r\n\r\nexport type TemplatesTypes = \r\n\ttypeof TEMPLATE_ABSTRACT |\r\n\ttypeof TEMPLATE_FILLED;\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 30;\r\nconst HEIGHT = 30;\r\nconst PADDING = 12;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG1 = \"#ffb6b9\";\r\nconst BG2 = \"#fae3d9\";\r\nconst BG3 = \"#bbded6\";\r\nconst BORDER1 = \"#FF9A9E\";\r\nconst BORDER2 = \"#FFC7AF\";\r\nconst BORDER3 = \"#92DFCD\";\r\nconst BORDER_ACTIVE = \"red\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 30,\r\n\theight: 30,\r\n\tpadding: 12,\r\n\toffset: 2,\r\n\tbg1: \"#ffb6b9\",\r\n\tbg2: \"#fae3d9\",\r\n\tbg: \"#bbded6\",\r\n\tborder1: \"#FF9A9E\",\r\n\tborder2: \"#FFC7AF\",\r\n\tborder3: \"#92DFCD\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 90,\r\n\theight: 70,\r\n\toffset: 2,\r\n\tbg: \"#dae7fc\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\",\r\n\tcount: 5,\r\n\tpadding: 10\r\n}\r\n\r\nexport default class MaxPooling extends React.Component<IDraggableShape> {\r\n\t// I'll leave it 3/2 since this \"3\" should be variable in the future, it's\r\n\t// the number of boxes we display\r\n\tstatic centerPosition = [WIDTH / 2 + (PADDING) * 3 / 2, HEIGHT / 2 + (PADDING) * 3 / 2];\r\n\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.padding*abstractTemplateStyle.count) / 2,\r\n\t\t(abstractTemplateStyle.height + abstractTemplateStyle.padding*abstractTemplateStyle.count) / 2];\r\n\r\n\tpublic renderFilledTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Max Pooling Layer</title>\r\n\t\t\t\t\r\n\t\t\t\t<rect id=\"svg_1\" height={HEIGHT} width={WIDTH} y={OFFSET} x={OFFSET + PADDING} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER1} fill={BG1} rx=\"1\"></rect>\r\n\t\t\t\t<rect id=\"svg_2\" height={HEIGHT} width={WIDTH} y={OFFSET + PADDING} x={OFFSET + PADDING*2} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER2} fill={BG2} rx=\"1\"></rect>\r\n\t\t\t\t<rect id=\"svg_3\" height={HEIGHT} width={WIDTH} y={OFFSET + PADDING*2} x={OFFSET + PADDING*3} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER3} fill={BG3} rx=\"1\"></rect>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\tconst arr = new Array(abstractTemplateStyle.count).fill(0);\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Max Pooling Layer</title>\r\n\t\t\t\t{\r\n\t\t\t\t\tarr.map((_, index) => \r\n\t\t\t\t\t<rect \r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\t\tx={abstractTemplateStyle.offset + abstractTemplateStyle.padding*index} \r\n\t\t\t\t\t\ty={abstractTemplateStyle.offset + abstractTemplateStyle.padding*index} \r\n\t\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t)}\r\n\t\t\t\t<polyline \r\n\t\t\t\t\tmarkerEnd=\"url(#smallArrow)\"\r\n\t\t\t\t\tpoints={`${abstractTemplateStyle.padding*(arr.length-1) + abstractTemplateStyle.offset},${abstractTemplateStyle.offset + abstractTemplateStyle.padding*(arr.length-1) + 30} ${4},${20}`}\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\tstroke={abstractTemplateStyle.border}\r\n\t\t\t\t/>\r\n\t\t\t\t<svg \r\n\t\t\t\t\twidth={abstractTemplateStyle.width}\r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\tx={abstractTemplateStyle.padding*(arr.length-1)}\r\n\t\t\t\t\ty={abstractTemplateStyle.padding*(arr.length-1)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"50%\" \r\n\t\t\t\t\t\ty=\"20%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"12px\">\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Max Pooling</tspan>\r\n    \t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Layer</tspan>\r\n    \t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.8em\" fontSize=\"10px\">2x2&nbsp;&nbsp;&nbsp;(stride 2)</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\r\n\t\t\t\t<svg \r\n\t\t\t\t\twidth={50}\r\n\t\t\t\t\theight={200} \r\n\t\t\t\t\tx={-7}\r\n\t\t\t\t\ty={abstractTemplateStyle.padding*(arr.length/2) - 15}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"30%\" \r\n\t\t\t\t\t\ty=\"20%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"10px\">\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\" fontWeight=\"bold\">32</tspan>\r\n    \t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\" fontSize=\"8px\">Channels</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 30;\r\nconst HEIGHT = 90;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG = \"#fcf7bb\";\r\nconst BORDER = \"#f6d186\";\r\n//const BORDER_ACTIVE = \"orange\";\r\nconst BORDER_ACTIVE = \"red\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 30,\r\n\theight: 90,\r\n\toffset: 2,\r\n\tbg: \"#fcf7bb\",\r\n\tborder: \"#f6d186\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nexport const abstractTemplateStyle = {\r\n\twidth: 30,\r\n\toffset: 2,\r\n\tbg: \"#dae7fc\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\",\r\n\tcount: 7\r\n}\r\n\r\nexport default class FullyConnected extends React.Component<IDraggableShape> {\r\n\tstatic centerPosition = [WIDTH / 2, HEIGHT / 2];\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.offset) / 2 + abstractTemplateStyle.offset,\r\n\t\t((abstractTemplateStyle.width + abstractTemplateStyle.offset) * abstractTemplateStyle.count) / 2 + abstractTemplateStyle.offset];\r\n\t\r\n\tpublic renderFilledTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Fully Connected Layer</title>\r\n\t\t\t\t<rect id=\"svg_1\" height={HEIGHT} width={WIDTH} y={OFFSET} x={OFFSET} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER} fill={BG}></rect>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\tconst nodesCount = this.props.additionalInfo ? this.props.additionalInfo.nodesCount : abstractTemplateStyle.count;\r\n\t\tconst arr = new Array(nodesCount).fill(0);\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Fully Connected Layer</title>\r\n\t\t\t\t{\r\n\t\t\t\t\tarr.map((e, index) => {\r\n\r\n\t\t\t\t\t\treturn Math.floor(arr.length / 2) != index &&\r\n\t\t\t\t\t\t<rect \r\n\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\trx={abstractTemplateStyle.width / 2}\r\n\t\t\t\t\t\t\theight={abstractTemplateStyle.width} \r\n\t\t\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\t\t\tx={abstractTemplateStyle.offset} \r\n\t\t\t\t\t\t\ty={abstractTemplateStyle.offset + (abstractTemplateStyle.width + abstractTemplateStyle.offset) * index} \r\n\t\t\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t\t}\r\n\t\t\t\t)}\r\n\t\t\t\t<svg\r\n\t\t\t\t\theight={abstractTemplateStyle.width + (abstractTemplateStyle.width + abstractTemplateStyle.offset) * (arr.length+1)} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width * 2}\r\n\t\t\t\t>\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx={abstractTemplateStyle.offset}\r\n\t\t\t\t\t\ty={abstractTemplateStyle.offset*2 + (abstractTemplateStyle.width + abstractTemplateStyle.offset) * Math.floor(arr.length / 2)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<tspan x=\"25%\" dy=\"0.5em\">.</tspan>\r\n\t\t\t\t\t\t<tspan x=\"25%\" dy=\"0.5em\">.</tspan>\r\n\t\t\t\t\t\t<tspan x=\"25%\" dy=\"0.5em\">.</tspan>\r\n\t\t\t\t\t</text>\r\n\r\n\t\t\t\t\t<text\r\n\t\t\t\t\t\tx={abstractTemplateStyle.offset}\r\n\t\t\t\t\t\ty={abstractTemplateStyle.offset*2 + (abstractTemplateStyle.width + abstractTemplateStyle.offset) * arr.length}\r\n\t\t\t\t\t\tfontSize={8}\r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<tspan x=\"30%\" dy=\"1em\">Fully</tspan>\r\n\t\t\t\t\t\t<tspan x=\"32%\" dy=\"1.2em\" >Connected</tspan>\r\n\t\t\t\t\t\t{this.props.additionalInfo &&\r\n\t\t\t\t\t\t\t<tspan x=\"30%\" dy=\"1.5em\">{this.props.additionalInfo.inputDimension}x{this.props.additionalInfo.outputDimension}</tspan>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<tspan x=\"30%\" dy=\"1.5em\">(Nodes)</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 20;\r\nconst HEIGHT = 150;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG = \"#FFBCB7\";\r\nconst BORDER = \"#FF7E75\";\r\nconst BORDER_ACTIVE = \"#fd5e53\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 20,\r\n\theight: 150,\r\n\toffset: 2,\r\n\tbg: \"#FFBCB7\",\r\n\tborder: \"#FF7E75\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 35,\r\n\theight: 200,\r\n\toffset: 2,\r\n\tbg: \"#dae7fc\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nexport default class Flatten extends React.Component<IDraggableShape> {\r\n\tstatic centerPosition = [WIDTH / 2, HEIGHT / 2];\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.offset*2) / 2,\r\n\t\t(abstractTemplateStyle.height + abstractTemplateStyle.offset*2) / 2];\r\n\r\n\tpublic renderFilledTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Flatten Layer</title>\r\n\t\t\t\t<rect id=\"svg_1\" height={HEIGHT} width={WIDTH} y={OFFSET} x={OFFSET} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER} fill={BG}></rect>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Flatten Layer</title>\r\n\t\t\t\t<rect \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\ty={abstractTemplateStyle.offset} \r\n\t\t\t\t\tx={abstractTemplateStyle.offset} \r\n\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t<svg \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} >\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"50%\" \r\n\t\t\t\t\t\ty=\"45%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"10px\">\r\n\t\t\t\t\t\t\t<tspan x=\"55%\" dy=\"1.2em\">Flatten</tspan>\r\n    \t\t\t\t\t\t<tspan x=\"55%\" dy=\"1.2em\">Layer</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n\r\n// Positioning\r\nconst WIDTH = 30;\r\nconst HEIGHT = 30;\r\nconst PADDING = 5;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG1 = \"#edffea\";\r\nconst BG2 = \"#75daad\";\r\nconst BORDER1 = \"#75daad\";\r\nconst BORDER2 = \"#75daad\";\r\nconst BORDER_ACTIVE = \"orange\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 40,\r\n\theight: 40,\r\n\toffset: 2,\r\n\tbg1: \"#edffea\",\r\n\tbg2: \"#75daad\",\r\n\tborder1: \"#75daad\",\r\n\tborder2: \"#75daad\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 120,\r\n\theight: 100,\r\n\toffset: 2,\r\n\tbg: \"#dae7fc\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\",\r\n\tcount: 5,\r\n\tpadding: 8\r\n}\r\n\r\nexport default class Convolutional extends React.Component<IDraggableShape> {\r\n\r\n\t// I'll leave it 4/2 since this \"4\" should be variable in the future, it's\r\n\t// the number of boxes we display\r\n\tstatic centerPosition = [WIDTH / 2 + (PADDING) * 4 / 2, HEIGHT / 2 + (PADDING) * 4 / 2];\r\n\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.padding*abstractTemplateStyle.count) / 2,\r\n\t\t(abstractTemplateStyle.height + abstractTemplateStyle.padding*abstractTemplateStyle.count) / 2];\r\n\r\n\tpublic renderFilledTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Convolutional Layer</title>\r\n\t\t\t\t\r\n\t\t\t\t<rect id=\"svg_1\" height={HEIGHT} width={WIDTH} y={OFFSET} x={OFFSET + PADDING} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER1} fill={BG1}></rect>\r\n\t\t\t\t<rect id=\"svg_2\" height={HEIGHT} width={WIDTH} y={OFFSET + PADDING} x={OFFSET + PADDING*2} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER2} fill={BG2}></rect>\r\n\t\t\t\t<rect id=\"svg_3\" height={HEIGHT} width={WIDTH} y={OFFSET + PADDING*2} x={OFFSET + PADDING*3} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER1} fill={BG1}></rect>\r\n\t\t\t\t<rect id=\"svg_4\" height={HEIGHT} width={WIDTH} y={OFFSET + PADDING*3} x={OFFSET + PADDING*4} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER2} fill={BG2}></rect>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\tconst arr = new Array(abstractTemplateStyle.count).fill(0);\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Convolutional Layer</title>\r\n\t\t\t\t{\r\n\t\t\t\t\tarr.map((_, index) => \r\n\t\t\t\t\t<rect \r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\t\tx={abstractTemplateStyle.offset + abstractTemplateStyle.padding*index} \r\n\t\t\t\t\t\ty={abstractTemplateStyle.offset + abstractTemplateStyle.padding*index} \r\n\t\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t)}\r\n\t\t\t\t<polyline \r\n\t\t\t\t\tmarkerEnd=\"url(#smallArrow)\"\r\n\t\t\t\t\tpoints={`${abstractTemplateStyle.padding*(arr.length-1) + abstractTemplateStyle.offset},${abstractTemplateStyle.offset + abstractTemplateStyle.padding*(arr.length-1) + 30} ${4},${20}`}\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\tstroke={abstractTemplateStyle.border}\r\n\t\t\t\t/>\r\n\t\t\t\t<svg \r\n\t\t\t\t\twidth={abstractTemplateStyle.width}\r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\tx={abstractTemplateStyle.padding*(arr.length-1)}\r\n\t\t\t\t\ty={abstractTemplateStyle.padding*(arr.length-1)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"50%\" \r\n\t\t\t\t\t\ty=\"20%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"12px\">\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Convolutional</tspan>\r\n    \t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Layer</tspan>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.props.additionalInfo &&\r\n\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.8em\" fontSize=\"10px\">{this.props.additionalInfo.kernelSize}x{this.props.additionalInfo.kernelSize}</tspan>\r\n\t\t\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.8em\" fontSize=\"10px\">(stride {this.props.additionalInfo.stride})</tspan>\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\r\n\t\t\t\t<svg \r\n\t\t\t\t\twidth={50}\r\n\t\t\t\t\theight={200} \r\n\t\t\t\t\tx={-7}\r\n\t\t\t\t\ty={abstractTemplateStyle.padding*(arr.length/2) - 15}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"30%\" \r\n\t\t\t\t\t\ty=\"20%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"10px\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.additionalInfo &&\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\" fontWeight=\"bold\">{this.props.additionalInfo.outChannels}</tspan>\r\n\t\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\" fontSize=\"8px\">Channels</tspan>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 50;\r\n//const PADDING = 12;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG = \"#deffe9\";\r\nconst BORDER = \"#95e7b0\";\r\nconst BORDER_ACTIVE = \"red\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 50,\r\n\toffset: 2,\r\n\tbg: \"#deffe9\",\r\n\tborder: \"#95e7b0\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 50,\r\n\toffset: 2,\r\n\tbg: \"white\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\n\r\nexport default class Addition extends React.Component<IDraggableShape> {\r\n\tstatic centerPosition = [WIDTH / 2, WIDTH / 2];\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.offset) / 2,\r\n\t\t(abstractTemplateStyle.width + abstractTemplateStyle.offset) / 2];\r\n\r\n\tpublic renderFilledTemplate() {\r\n\t\tconst transformSize = (2*WIDTH + 80 * 0.25) / 2 - 3;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Addition Layer</title>\r\n\t\t\t\t<rect height={WIDTH} width={WIDTH} y={OFFSET} x={OFFSET} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER} fill={BG} rx={WIDTH / 2}></rect>\r\n\t\t\t\t<polygon\r\n\t\t\t\t\ttransform={`scale(0.25) translate(${transformSize},${transformSize})`}\r\n\t\t\t\t\tx={OFFSET + WIDTH / 2}\r\n\t\t\t\t\ty={OFFSET + WIDTH / 2}\r\n\t\t\t\t\tpoints=\"2 37, 37 37, 37 2, 67 2, 67 37, 102 37, 102 67, 67 67, 67 102, 37 102, 37 67, 2 67\"\r\n\t\t\t\t\tstroke={BORDER}\r\n\t\t\t\t\tfill={BORDER}\r\n\t\t\t\tstrokeWidth=\"2\"/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\tconst transformSize = (2*WIDTH + 80 * 0.25) / 2 - 3;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Addition Layer</title>\r\n\t\t\t\t<rect \r\n\t\t\t\t\trx={abstractTemplateStyle.width / 2}\r\n\t\t\t\t\theight={abstractTemplateStyle.width} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\tx={abstractTemplateStyle.offset} \r\n\t\t\t\t\ty={abstractTemplateStyle.offset} \r\n\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t<polygon\r\n\t\t\t\t\ttransform={`scale(0.25) translate(${transformSize},${transformSize})`}\r\n\t\t\t\t\tx={OFFSET + WIDTH / 2}\r\n\t\t\t\t\ty={OFFSET + WIDTH / 2}\r\n\t\t\t\t\tpoints=\"2 37, 37 37, 37 2, 67 2, 67 37, 102 37, 102 67, 67 67, 67 102, 37 102, 37 67, 2 67\"\r\n\t\t\t\t\tstroke={abstractTemplateStyle.border}\r\n\t\t\t\t\tfill={abstractTemplateStyle.border}\r\n\t\t\t\tstrokeWidth=\"1\"/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 20;\r\nconst HEIGHT = 40;\r\nconst PADDING = 40;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG = \"#f3e2f7\";\r\nconst BORDER = \"#b89acf\";\r\nconst BORDER_ACTIVE = \"red\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 20,\r\n\theight: 40,\r\n\tpadding: 40,\r\n\toffset: 2,\r\n\tbg: \"#f3e2f7\",\r\n\tborder: \"#b89acf\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 80,\r\n\theight: 70,\r\n\toffset: 2,\r\n\tbg: \"#fff2cc\",\r\n\tborder: \"#8d8c89\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nexport default class Concatenate extends React.Component<IDraggableShape> {\r\n\tstatic centerPosition = [WIDTH / 2, HEIGHT * 3 / 2];\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.offset*2) / 2,\r\n\t\t(abstractTemplateStyle.height + abstractTemplateStyle.offset*2) / 2];\r\n\r\n\tpublic renderFilledTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Concatenate Layer</title>\r\n\t\t\t\t\r\n\t\t\t\t<rect id=\"svg_1\" height={HEIGHT} width={WIDTH} y={OFFSET} x={OFFSET} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER} fill={BG}></rect>\r\n\t\t\t\t<rect id=\"svg_2\" height={HEIGHT} width={WIDTH} y={OFFSET + PADDING} x={OFFSET} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER} fill={BG}></rect>\r\n\t\t\t\t<rect id=\"svg_3\" height={HEIGHT} width={WIDTH} y={OFFSET + PADDING*2} x={OFFSET} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER} fill={BG}></rect>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Concatenate Layer</title>\r\n\t\t\t\t<rect \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\ty={abstractTemplateStyle.offset} \r\n\t\t\t\t\tx={abstractTemplateStyle.offset} \r\n\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t<svg \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} >\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"50%\" \r\n\t\t\t\t\t\ty=\"36%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"10px\">\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Concatenate</tspan>\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Layer</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 40;\r\nconst HEIGHT = 40;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG = \"#f1f3f4\";\r\nconst BORDER = \"#79bac1\";\r\n//const BORDER_ACTIVE = \"orange\";\r\nconst BORDER_ACTIVE = \"red\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 40,\r\n\theight: 40,\r\n\toffset: 2,\r\n\tbg: \"#f1f3f4\",\r\n\tborder: \"#79bac1\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 100,\r\n\theight: 100,\r\n\toffset: 2,\r\n\tbg: \"#dae7fc\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nexport default class Input extends React.Component<IDraggableShape> {\r\n\tstatic centerPosition = [(WIDTH + OFFSET) / 2, (HEIGHT + OFFSET) / 2];\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.offset*2) / 2,\r\n\t\t(abstractTemplateStyle.height + abstractTemplateStyle.offset*2) / 2];\r\n\t\r\n\tpublic renderFilledTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Input Layer</title>\r\n\t\t\t\t<rect id=\"svg_1\" height={HEIGHT} width={WIDTH} y={OFFSET} x={OFFSET} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER} fill={BG}></rect>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Input Layer</title>\r\n\t\t\t\t<rect \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\ty={abstractTemplateStyle.offset} \r\n\t\t\t\t\tx={abstractTemplateStyle.offset} \r\n\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t<svg \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} >\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"50%\" \r\n\t\t\t\t\t\ty=\"30%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"12px\">\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Input</tspan>\r\n    \t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Image</tspan>\r\n    \t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.8em\" fontSize=\"10px\">28x28</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 20;\r\nconst HEIGHT = 90;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG = \"#eae7d9\";\r\nconst BORDER = \"#d2c6b2\";\r\n//const BORDER_ACTIVE = \"orange\";\r\nconst BORDER_ACTIVE = \"red\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 20,\r\n\theight: 90,\r\n\toffset: 2,\r\n\tbg: \"#eae7d9\",\r\n\tborder: \"#d2c6b2\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 80,\r\n\theight: 300,\r\n\toffset: 2,\r\n\tbg: \"#dae7fc\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nexport default class Output extends React.Component<IDraggableShape> {\r\n\tstatic centerPosition = [(WIDTH + OFFSET) / 2, (HEIGHT + OFFSET) / 2];\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.offset*2) / 2,\r\n\t\t(abstractTemplateStyle.height + abstractTemplateStyle.offset*2) / 2];\r\n\t\r\n\tpublic renderFilledTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Output Layer</title>\r\n\t\t\t\t<rect id=\"svg_1\" height={HEIGHT} width={WIDTH} y={OFFSET} x={OFFSET} strokeWidth=\"1\" stroke={this.props.isMarked ? BORDER_ACTIVE : BORDER} fill={BG}></rect>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Output Layer</title>\r\n\t\t\t\t<rect \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\ty={abstractTemplateStyle.offset} \r\n\t\t\t\t\tx={abstractTemplateStyle.offset} \r\n\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t<svg \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} >\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"50%\" \r\n\t\t\t\t\t\ty=\"45%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"12px\">\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Output</tspan>\r\n    \t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Layer</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 12;\r\nconst HEIGHT = 12;\r\nconst OFFSET = 2;\r\n\r\n// Styling Component\r\nconst BG = \"#fdd998\";\r\nconst BORDER = \"#f5b971\";\r\n//const BORDER_ACTIVE = \"orange\";\r\nconst BORDER_ACTIVE = \"red\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 12,\r\n\theight: 12,\r\n\toffset: 2,\r\n\tbg: \"#fdd998\",\r\n\tborder: \"#f5b971\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 70,\r\n\theight: 70,\r\n\toffset: 2,\r\n\tbg: \"#dae7fc\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nexport default class Dropout extends React.Component<IDraggableShape> {\r\n\tstatic centerPosition = [WIDTH * 3 / 2, HEIGHT * 3 / 2];\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.offset*2) / 2,\r\n\t\t(abstractTemplateStyle.height + abstractTemplateStyle.offset*2) / 2];\r\n\r\n\tpublic renderFilledTemplate() {\r\n\t\tconst create = [0,1,2];\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Dropout Layer</title>\r\n\t\t\t\t{\r\n\t\t\t\t\tcreate.map(i => \r\n\t\t\t\t\t\tcreate.map(j => \r\n\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\tkey={i + \",\" + j}\r\n\t\t\t\t\t\t\t\tid=\"svg_1\"\r\n\t\t\t\t\t\t\t\theight={HEIGHT}\r\n\t\t\t\t\t\t\t\twidth={WIDTH}\r\n\t\t\t\t\t\t\t\tx={OFFSET + WIDTH * i}\r\n\t\t\t\t\t\t\t\ty={OFFSET + HEIGHT * j}\r\n\t\t\t\t\t\t\t\tstrokeWidth=\"1\"\r\n\t\t\t\t\t\t\t\tstroke={this.props.isMarked ? BORDER_ACTIVE : BORDER}\r\n\t\t\t\t\t\t\t\tfill={BG}></rect>\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Dropout Layer</title>\r\n\t\t\t\t<rect \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\ty={abstractTemplateStyle.offset} \r\n\t\t\t\t\tx={abstractTemplateStyle.offset} \r\n\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t<svg \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} >\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"50%\" \r\n\t\t\t\t\t\ty=\"36%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"10px\">\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Dropout</tspan>\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Layer</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport { IDraggableShape } from \"../../../interfaces/shapes\";\r\nimport { TEMPLATE_ABSTRACT } from '../../../interfaces/designTemplates';\r\n\r\n// Positioning\r\nconst WIDTH = 50;\r\nconst HEIGHT = 50;\r\nconst OFFSET = 4;\r\n\r\n// Styling Component\r\nconst BG = \"#ffecda\";\r\nconst BORDER = \"#d4a5a5\";\r\n//const BORDER_ACTIVE = \"orange\";\r\nconst BORDER_ACTIVE = \"red\";\r\n\r\nconst filledTemplateStyle = {\r\n\twidth: 50,\r\n\theight: 50,\r\n\toffset: 2,\r\n\tbg: \"#ffecda\",\r\n\tborder: \"#d4a5a5\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nconst abstractTemplateStyle = {\r\n\twidth: 70,\r\n\theight: 70,\r\n\toffset: 2,\r\n\tbg: \"#dae7fc\",\r\n\tborder: \"#909da6\",\r\n\tborderActive: \"red\"\r\n}\r\n\r\nexport default class BatchNormalization extends React.Component<IDraggableShape> {\r\n\tstatic centerPosition = [(WIDTH + OFFSET) / 2, (HEIGHT + OFFSET) / 2];\r\n\tstatic centerPositionAbstract = [(abstractTemplateStyle.width + abstractTemplateStyle.offset*2) / 2,\r\n\t\t(abstractTemplateStyle.height + abstractTemplateStyle.offset*2) / 2];\r\n\t\r\n\tpublic renderFilledTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Batch Normalization Layer</title>\r\n\t\t\t\t<polygon\r\n\t\t\t\t\ttransform=\"scale(0.5)\"\r\n\t\t\t\t\tx={OFFSET}\r\n\t\t\t\t\ty={OFFSET}\r\n\t\t\t\t\tpoints=\"32,2 72,2, 102,32, 102,72, 72,102 32,102 2,72 2,32\"\r\n\t\t\t\t\tstroke={this.props.isMarked ? BORDER_ACTIVE : BORDER}\r\n\t\t\t\t\tfill={BG}\r\n\t\t\t\t\tstrokeWidth=\"3\"/>\r\n\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic renderAbstractTemplate() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<title>Batch Normalization Layer</title>\r\n\t\t\t\t<rect \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} \r\n\t\t\t\t\ty={abstractTemplateStyle.offset} \r\n\t\t\t\t\tx={abstractTemplateStyle.offset} \r\n\t\t\t\t\tstrokeWidth=\"1\" \r\n\t\t\t\t\tstroke={this.props.isMarked ? abstractTemplateStyle.borderActive : abstractTemplateStyle.border} \r\n\t\t\t\t\tfill={abstractTemplateStyle.bg}></rect>\r\n\t\t\t\t<svg \r\n\t\t\t\t\theight={abstractTemplateStyle.height} \r\n\t\t\t\t\twidth={abstractTemplateStyle.width} >\r\n\t\t\t\t\t<text \r\n\t\t\t\t\t\tx=\"50%\" \r\n\t\t\t\t\t\ty=\"36%\" \r\n\t\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\t\tfontSize=\"10px\">\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\">Batch</tspan>\r\n\t\t\t\t\t\t\t<tspan x=\"50%\" dy=\"1.2em\" fontSize=\"8px\">Normalization</tspan>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</svg>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tswitch(this.props.templateDesign)\r\n\t\t{\r\n\t\t\tcase TEMPLATE_ABSTRACT:\r\n\t\t\t\treturn this.renderAbstractTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.renderFilledTemplate();\r\n\t\t}\r\n\t}\r\n}\r\n","import MaxPooling from \"../components/DiagramContainer/Shapes/MaxPooling\";\r\nimport FullyConnected from \"../components/DiagramContainer/Shapes/FullyConnected\";\r\nimport Flatten from \"../components/DiagramContainer/Shapes/Flatten\";\r\nimport Convolutional from \"../components/DiagramContainer/Shapes/Convolutional\";\r\nimport Addition from \"../components/DiagramContainer/Shapes/Addition\";\r\nimport Concatenate from \"../components/DiagramContainer/Shapes/Concatenate\";\r\nimport Input from \"../components/DiagramContainer/Shapes/Input\";\r\nimport Output from \"../components/DiagramContainer/Shapes/Output\";\r\nimport Dropout from \"../components/DiagramContainer/Shapes/Dropout\";\r\nimport BatchNormalization from \"../components/DiagramContainer/Shapes/BatchNormalization\";\r\nimport { AdditionalInformationType } from \"./IShape\";\r\nimport { TEMPLATE_FILLED, TEMPLATE_ABSTRACT, TemplatesTypes } from \"./designTemplates\";\r\n\r\nexport interface IDraggableSVGState {\r\n\tisMarked: boolean;\r\n\tadditionalInfo?: Record<string, AdditionalInformationType>;\r\n\ttemplateDesign: TemplatesTypes;\r\n}\r\n\r\nexport interface IDraggable {\r\n\thandlePointerDown: (e : React.PointerEvent<EventTarget>) => void;\r\n\thandlePointerMove: (e : React.PointerEvent<EventTarget>) => void;\r\n\thandlePointerUp: () => void;\r\n\tactive: boolean;\r\n}\r\n\r\nexport interface IDraggableShape extends IDraggableSVGState {};\r\n\r\nexport abstract class ShapeCenterPosition {\r\n\tstatic constX : number;\r\n\tstatic constY : number;\r\n}\r\n\r\nexport type LayerTypes =\r\n\ttypeof MaxPooling |\r\n\ttypeof FullyConnected |\r\n\ttypeof Flatten |\r\n\ttypeof Convolutional |\r\n\ttypeof Concatenate |\r\n\ttypeof Addition |\r\n\ttypeof Input |\r\n\ttypeof Output |\r\n\ttypeof Dropout |\r\n\ttypeof BatchNormalization;\r\n\r\nexport interface LayerInformation {\r\n\tcreate: () => LayerTypes;\r\n\tcenterPosition: Record<string, number[]>;\r\n\tadditionalInfo?: Record<string, AdditionalInformationType>;\r\n}\r\n\r\nexport const layersMap : Record<string, LayerInformation> = {\r\n\tMaxPooling: {\r\n\t\tcreate: () => MaxPooling,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: MaxPooling.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: MaxPooling.centerPositionAbstract\r\n\t\t}\r\n\t},\r\n\tFullyConnected: {\r\n\t\tcreate: () => FullyConnected,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: FullyConnected.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: FullyConnected.centerPositionAbstract\r\n\t\t},\r\n\t\tadditionalInfo: {\r\n\t\t\tinputDimension: 32,\r\n\t\t\toutputDimension: 32,\r\n\t\t\tnodesCount: 7\r\n\t\t}\r\n\t},\r\n\tFlatten: {\r\n\t\tcreate: () => Flatten,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: Flatten.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: Flatten.centerPositionAbstract\r\n\t\t}\r\n\t},\r\n\tConvolutional: {\r\n\t\tcreate: () => Convolutional,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: Convolutional.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: Convolutional.centerPositionAbstract\r\n\t\t},\r\n\t\tadditionalInfo: {\r\n\t\t\tinChannels: 16,\r\n\t\t\toutChannels: 16,\r\n\t\t\tkernelSize: 5,\r\n\t\t\tstride: 1\r\n\t\t}\r\n\t},\r\n\tConcatenate: {\r\n\t\tcreate: () => Concatenate,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: Concatenate.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: Concatenate.centerPositionAbstract\r\n\t\t}\r\n\t},\r\n\tAddition: {\r\n\t\tcreate: () => Addition,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: Addition.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: Addition.centerPositionAbstract\r\n\t\t}\r\n\t},\r\n\tInput: {\r\n\t\tcreate: () => Input,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: Input.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: Input.centerPositionAbstract\r\n\t\t}\r\n\t},\r\n\tOutput: {\r\n\t\tcreate: () => Output,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: Output.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: Output.centerPositionAbstract\r\n\t\t}\r\n\t},\r\n\tDropout: {\r\n\t\tcreate: () => Dropout,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: Dropout.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: Dropout.centerPositionAbstract\r\n\t\t}\r\n\t},\r\n\tBatchNormalization: {\r\n\t\tcreate: () => BatchNormalization,\r\n\t\tcenterPosition: {\r\n\t\t\t[TEMPLATE_FILLED]: BatchNormalization.centerPosition,\r\n\t\t\t[TEMPLATE_ABSTRACT]: BatchNormalization.centerPositionAbstract\r\n\t\t}\r\n\t}\r\n}","import { layersMap } from '../interfaces/shapes';\r\nimport { AllActivationFunctions, ACTIVATION_NONE } from \"../interfaces/activations\";\r\nimport { Shape } from '../interfaces/IShape';\r\n\r\nconst fc1 : Shape = {\r\n\tname: \"Input\",\r\n\ttimestamp: new Date().getTime() - 100,\r\n\tshape: layersMap.Input.create(),\r\n\tx: 83,\r\n\ty: 70,\r\n\tcenterPosition: layersMap.Input.centerPosition,\r\n\tadditionalInfo: {...layersMap.Input.additionalInfo}\r\n\t////connectedTo: [],\r\n\t////connectedToMe: []\r\n};\r\n\r\nconst fc2 : Shape = {\r\n\tname: \"FullyConnected\",\r\n\ttimestamp: new Date().getTime() - 200,\r\n\tshape: layersMap.FullyConnected.create(),\r\n\tx: 83,\r\n\ty: 230,\r\n\tcenterPosition: layersMap.FullyConnected.centerPosition,\r\n\tadditionalInfo: {...layersMap.FullyConnected.additionalInfo}\r\n\t//connectedTo: [],\r\n\t//connectedToMe: []\r\n};\r\n\r\nconst fc3 : Shape = {\r\n\tname: \"FullyConnected\",\r\n\ttimestamp: new Date().getTime() - 300,\r\n\tshape: layersMap.FullyConnected.create(),\r\n\tx: 203,\r\n\ty: 70,\r\n\tcenterPosition: layersMap.FullyConnected.centerPosition,\r\n\tadditionalInfo: {...layersMap.FullyConnected.additionalInfo}\r\n\t//connectedTo: [],\r\n\t//connectedToMe: []\r\n};\r\n\r\nconst fc4 : Shape = {\r\n\tname: \"FullyConnected\",\r\n\ttimestamp: new Date().getTime() - 400,\r\n\tshape: layersMap.FullyConnected.create(),\r\n\tx: 203,\r\n\ty: 230,\r\n\tcenterPosition: layersMap.FullyConnected.centerPosition,\r\n\tadditionalInfo: {...layersMap.FullyConnected.additionalInfo}\r\n\t//connectedTo: [],\r\n\t//connectedToMe: []\r\n}\r\n\r\nconst fc5 : Shape = {\r\n\tname: \"FullyConnected\",\r\n\ttimestamp: new Date().getTime() - 500,\r\n\tshape: layersMap.FullyConnected.create(),\r\n\tx: 443,\r\n\ty: 155,\r\n\tcenterPosition: layersMap.FullyConnected.centerPosition,\r\n\tadditionalInfo: {...layersMap.FullyConnected.additionalInfo}\r\n\t//connectedTo: [],\r\n\t//connectedToMe: []\r\n}\r\n\r\nconst concat : Shape = {\r\n\tname: \"Concatenate\",\r\n\ttimestamp: new Date().getTime() - 600,\r\n\tshape: layersMap.Concatenate.create(),\r\n\tx: 328,\r\n\ty: 140,\r\n\tcenterPosition: layersMap.Concatenate.centerPosition,\r\n\tadditionalInfo: {...layersMap.Concatenate.additionalInfo}\r\n\t//connectedTo: [],\r\n\t//connectedToMe: []\r\n}\r\n\r\nconst output : Shape = {\r\n\tname: \"Output\",\r\n\ttimestamp: new Date().getTime() - 700,\r\n\tshape: layersMap.Output.create(),\r\n\tx: 543,\r\n\ty: 155,\r\n\tcenterPosition: layersMap.Output.centerPosition,\r\n\tadditionalInfo: {...layersMap.Output.additionalInfo}\r\n\t//connectedTo: [],\r\n\t//connectedToMe: []\r\n}\r\n\r\n// Make connections between the shapes\r\n\r\nconst arrows = new Map<[Shape, Shape], AllActivationFunctions>();\r\narrows.set([fc1, fc3], ACTIVATION_NONE);\r\narrows.set([fc2, fc4], ACTIVATION_NONE);\r\narrows.set([fc3, fc4], ACTIVATION_NONE);\r\narrows.set([concat, fc3], ACTIVATION_NONE);\r\narrows.set([concat, fc4], ACTIVATION_NONE);\r\n\r\n/*\r\nfc1.connectedTo.push(fc3);\r\nfc3.connectedToMe.push(fc1);\r\n\r\nfc2.connectedTo.push(fc4);\r\nfc4.connectedToMe.push(fc2);\r\n\r\nfc3.connectedTo.push(concat);\r\nfc4.connectedTo.push(concat);\r\n\r\nconcat.connectedToMe.push(fc3, fc4);\r\n\r\nconcat.connectedTo.push(fc5);\r\nfc3.connectedToMe.push(concat);\r\n\r\nfc5.connectedTo.push(output);\r\noutput.connectedToMe.push(fc5);\r\n*/\r\n\r\nconst newInput: Shape = {\r\n\tname: \"Input\",\r\n\ttimestamp: new Date().getTime() - 1000,\r\n\tshape: layersMap.Input.create(),\r\n\tx: 57,\r\n\ty: 180,\r\n\tcenterPosition: layersMap.Input.centerPosition,\r\n\t//connectedTo: [],\r\n\t//connectedToMe: []\r\n};\r\n\r\nconst newOutput: Shape = {\r\n\tname: \"Output\",\r\n\ttimestamp: new Date().getTime() - 1100,\r\n\tshape: layersMap.Output.create(),\r\n\tx: 587,\r\n\ty: 155,\r\n\tcenterPosition: layersMap.Output.centerPosition,\r\n\t//connectedTo: [],\r\n\t//connectedToMe: []\r\n};\r\n\r\nexport const seedInitArrorws = arrows;\r\nexport const seedInitShapes : Shape[] = [fc1, fc2, fc3, fc4, concat, fc5, output];\r\nexport const seedNewShapes : Shape[] = [newInput, newOutput];","export const ACTIVATION_RELU = \"ReLU\";\r\nexport const ACTIVATION_SIGMOID = \"Sigmoid\";\r\nexport const ACTIVATION_TANH = \"Tanh\";\r\nexport const ACTIVATION_NONE = \"ACTIVATION_NONE\";\r\n\r\nexport type AllActivationFunctions = \r\n\ttypeof ACTIVATION_RELU | \r\n\ttypeof ACTIVATION_SIGMOID | \r\n\ttypeof ACTIVATION_TANH |\r\n\ttypeof ACTIVATION_NONE;\r\n","import * as React from 'react';\r\nimport \"./toolbar.scss\";\r\nimport { connect } from 'react-redux';\r\nimport { AppState } from '../../store';\r\nimport { setShapes } from '../../store/shapes/actions';\r\nimport { ShapeState } from '../../store/shapes/types';\r\nimport { seedNewShapes } from '../../utils/seedShapes';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport { ConfigState } from '../../store/config/types';\r\nimport { updateDesignTemplate } from \"../../store/config/actions\";\r\nimport { TEMPLATE_ABSTRACT, TEMPLATE_FILLED } from '../../interfaces/designTemplates';\r\nimport Canvg from 'canvg';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\n\r\nexport interface IToolBarProps {\r\n\tshapes: ShapeState;\r\n\tconfig: ConfigState;\r\n\tsetShapes: typeof setShapes;\r\n\tupdateDesignTemplate: typeof updateDesignTemplate;\r\n}\r\n\r\nexport interface IToolBarState {\r\n\tisFullScreenEnabled: boolean\r\n}\r\n\r\nclass ToolBar extends React.Component<IToolBarProps, IToolBarState> {\r\n\tstate = {\r\n\t\tisFullScreenEnabled: false\r\n\t}\r\n\r\n\trefSVG = React.createRef<SVGSVGElement>();\r\n\trefCanvas = React.createRef<HTMLCanvasElement>();\r\n\trefLink = React.createRef<HTMLAnchorElement>();\r\n\r\n\tasync componentDidMount() {\r\n\t\t/*const canvas = document.querySelector('canvas')!;\r\n\t\tconst ctx = canvas.getContext('2d');\r\n\t\r\n\t\tconst v = await Canvg.from(ctx, './svgs/1.svg');*/\r\n\r\n\t\t/*const canvas = this.refCanvas.current!;\r\n\t\tconst ctx = canvas.getContext('2d')!;\r\n\r\n\t\tconst svgContent = \"<svg>\" + this.refSVG.current!.innerHTML + \"</svg>\";\r\n\t\tconst v = await Canvg.from(ctx, svgContent);\r\n\t\t\r\n\t\tv.start();*/\r\n\t}\r\n\r\n\thandleDownloadImage = async () => {\r\n\t\t\r\n\t\t// Extract SVG to Canvas\r\n\t\t\r\n\t\tconst canvas = this.refCanvas.current!;\r\n\t\tconst ctx = canvas.getContext('2d')!;\r\n\t\tconst svgContent = \"<svg>\" + this.props.config.svgRef!.innerHTML + \"</svg>\";\r\n\t\tconst v = await Canvg.from(ctx, svgContent);\r\n\t\tv.start();\r\n\r\n\t\t// Downloading the canvas \r\n\r\n\t\tconst download = this.refLink.current!;\r\n\t\tconst image = canvas.toDataURL(\"image/png\")\r\n\t\t\t.replace(\"image/png\", \"image/octet-stream\");\r\n\t\tdownload.setAttribute(\"href\", image);\r\n\t}\r\n\r\n\thandleStyleTemplate = () => {\r\n\t\tif(this.props.config.designTemplate === TEMPLATE_ABSTRACT) {\r\n\t\t\tthis.props.updateDesignTemplate(TEMPLATE_FILLED);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.props.updateDesignTemplate(TEMPLATE_ABSTRACT);\r\n\t\t}\r\n\t}\r\n\r\n\thandleNewTemplate = () => {\r\n\t\tthis.props.setShapes(seedNewShapes);\r\n\t}\r\n\r\n\ttoggleFullScreen = () => {\r\n\t\tif (!document.fullscreenElement) {\r\n\t\t\tdocument.documentElement.requestFullscreen();\r\n\t\t} else {\r\n\t\t\tif (document.exitFullscreen) {\r\n\t\t\t\tdocument.exitFullscreen(); \r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setState((oldState) => ({\r\n\t\t\tisFullScreenEnabled: !oldState.isFullScreenEnabled\r\n\t\t}));\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<div className=\"toolbar\">\r\n\t\t\t\t<canvas ref={this.refCanvas} id=\"myCanvas\" width=\"1000px\" height=\"500px\" style={{background: \"white\", display: \"none\"}}></canvas>\r\n\t\t\t\t<div className=\"left-side\">\r\n\t\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\t\toverlay={<Tooltip id=\"tooltip-new-template\">Start new template</Tooltip>}\r\n\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button onClick={this.handleNewTemplate}>\r\n\t\t\t\t\t\t\t<svg viewBox=\"5 5 15 15\" fill=\"currentColor\" width=\"9\" height=\"15\"><path d=\"M13,6.70710678 L13,9 L15.2928932,9 L13,6.70710678 Z M17,19 C17,19.5522847 16.5522847,20 16,20 L7,20 C6.44771525,20 6,19.5522847 6,19 L6,6 C6,5.44771525 6.44771525,5 7,5 L12.7099045,5 L17,9.2995551 L17,19 Z M16,10 L12,10 L12,6 L7,6 L7,19 L16,19 L16,10 Z\"></path></svg>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<svg viewBox=\"4 5 15 15\" fill=\"currentColor\" width=\"9\" height=\"15\"><path d=\"M16.679,5.60187506 L18.381,7.30587506 C19.207,8.13287506 19.207,9.47787506 18.381,10.3058751 L10.211,18.4858751 L4,19.9998751 L5.512,13.7818751 L13.682,5.60187506 C14.481,4.79987506 15.878,4.79887506 16.679,5.60187506 Z M8.66091072,16.0462125 L9.973,17.3598751 L15.625,11.7018751 L12.289,8.36087506 L6.637,14.0198751 L7.95422762,15.3386821 L11.1467061,12.1463747 C11.3419735,11.9511178 11.6585559,11.9511262 11.8538129,12.1463936 C12.0490698,12.341661 12.0490613,12.6582435 11.8537939,12.8535004 L8.66091072,16.0462125 Z M16.306,11.0198751 L17.7,9.62387506 C18.15,9.17287506 18.15,8.43787506 17.7,7.98687506 L15.998,6.28287506 C15.561,5.84587506 14.801,5.84687506 14.364,6.28287506 L12.97,7.67887506 L16.306,11.0198751 Z M5.426,18.5738751 L8.995,17.7438751 L6.254,14.9988751 L5.426,18.5738751 Z\"></path></svg>\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t<a id=\"download\" download=\"myModel.png\" ref={this.refLink}>\r\n\t\t\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\t\t\toverlay={<Tooltip id=\"tooltip-download-svg\">Download Image Snapshot of Your Model (MyModel.png)</Tooltip>}\r\n\t\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button onClick={this.handleDownloadImage}>\r\n\t\t\t\t\t\t\t\t<svg viewBox=\"4 4 15 15\" fill=\"currentColor\" width=\"9\" height=\"15\"><path d=\"M5,13 L5,17 C5,17.5522847 5.44771525,18 6,18 L17,18 C17.5522847,18 18,17.5522847 18,17 L18,13 L19,13 L19,17 C19,18.1045695 18.1045695,19 17,19 L6,19 C4.8954305,19 4,18.1045695 4,17 L4,13 L5,13 Z M11,13.2928932 L11,5 L12,5 L12,13.2928932 L14.1464466,11.1464466 C14.3417088,10.9511845 14.6582912,10.9511845 14.8535534,11.1464466 C15.0488155,11.3417088 15.0488155,11.6582912 14.8535534,11.8535534 L11.5,15.2071068 L8.14644661,11.8535534 C7.95118446,11.6582912 7.95118446,11.3417088 8.14644661,11.1464466 C8.34170876,10.9511845 8.65829124,10.9511845 8.85355339,11.1464466 L11,13.2928932 Z\"></path></svg>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"right-side\">\r\n\t\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\t\toverlay={<Tooltip id=\"tooltip-toggle-template\">Change Style Template</Tooltip>}\r\n\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form style={{float: \"left\", marginTop: \"1px\", marginRight:\"-10px\"}}>\r\n\t\t\t\t\t\t\t<Form.Check \r\n\t\t\t\t\t\t\t\tchecked={this.props.config.designTemplate === TEMPLATE_ABSTRACT}\r\n\t\t\t\t\t\t\t\tonClick={this.handleStyleTemplate}\r\n\t\t\t\t\t\t\t\ttype=\"switch\"\r\n\t\t\t\t\t\t\t\tid=\"custom-switch\"\r\n\t\t\t\t\t\t\t\tlabel=\"\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t{/*<button onClick={this.handleStyleTemplate}>\r\n\t\t\t\t\t\t\t<svg viewBox=\"3 5 12 12\" fill=\"currentColor\" width=\"24\" height=\"24\"><path d=\"M9,3 C11.209139,3 13,4.790861 13,7 C13,7.2006429 12.9887988,7.37261183 12.9663963,7.51590677 C14.180506,8.20261598 15,9.50560645 15,11 C15,13.209139 13.209139,15 11,15 C10.271376,15 9.58825351,14.8051848 8.99987956,14.4648015 C8.41251188,14.8049665 7.7290322,15 7,15 C4.790861,15 3,13.209139 3,11 C3,9.50560645 3.81949397,8.20261598 5.03360371,7.51590677 C5.0112047,7.34686296 5,7.17473998 5,7 C5,4.790861 6.790861,3 9,3 Z M5.30200941,8.52749838 C4.52278137,9.06033325 4,9.99405278 4,11 C4,12.6568542 5.34314575,14 7,14 C7.39828227,14 7.77843697,13.9223866 8.12616463,13.7814594 C7.42860086,13.0613619 6.85005188,11.8812408 7.03314346,10.4826921 C6.24401855,10.0695038 5.58474731,9.24058533 5.30200941,8.52749838 Z M9,4 C7.34314575,4 6,5.34314575 6,7 C6,8.65685425 7.34314575,10 9,10 C10.6568542,10 12,8.65685425 12,7 C12,5.34314575 10.6568542,4 9,4 Z\"></path></svg>\r\n\t\t\t\t\t\t</button>*/}\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t<OverlayTrigger\r\n\t\t\t\t\t\toverlay={<Tooltip id=\"tooltip-toggle-fullscreen\">Toggle Fullscreen Mode</Tooltip>}\r\n\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button onClick={this.toggleFullScreen}>\r\n\t\t\t\t\t\t\t{!this.state.isFullScreenEnabled ? \r\n\t\t\t\t\t\t\t<svg viewBox=\"0 0 1024 1024\"><path d=\"M959.688 920.068l0.31-176c0.040-22.094-17.84-40.032-39.93-40.070-22.092-0.040-40.032 17.838-40.070 39.93l-0.142 79.672-235.734-235.732c-15.622-15.622-40.948-15.622-56.57 0s-15.622 40.948 0 56.568l235.442 235.442-78.946-0.1c-22.092-0.028-40.022 17.86-40.050 39.952-0.014 11.064 4.464 21.084 11.714 28.334 7.228 7.224 17.208 11.702 28.236 11.714l175.688 0.22c22.086 0.028 40.014-17.846 40.052-39.93zM920.178 64.228l-176-0.308c-22.094-0.040-40.032 17.84-40.070 39.93-0.040 22.092 17.838 40.032 39.93 40.070l79.672 0.14-235.732 235.734c-15.622 15.622-15.622 40.948 0 56.568s40.948 15.622 56.568 0l235.442-235.442-0.1 78.946c-0.028 22.092 17.86 40.022 39.952 40.050 11.064 0.014 21.084-4.464 28.334-11.714 7.224-7.228 11.702-17.208 11.714-28.236l0.22-175.688c0.026-22.082-17.846-40.010-39.93-40.050zM64.236 103.742l-0.308 176c-0.040 22.094 17.84 40.032 39.93 40.070 22.092 0.040 40.032-17.84 40.070-39.93l0.14-79.672 235.734 235.73c15.622 15.622 40.948 15.622 56.568 0s15.622-40.946 0-56.566l-235.442-235.442 78.946 0.098c22.092 0.028 40.022-17.86 40.050-39.95 0.014-11.066-4.464-21.086-11.714-28.336-7.228-7.222-17.208-11.7-28.236-11.714l-175.688-0.218c-22.084-0.026-40.012 17.844-40.050 39.93zM103.748 959.766l176 0.308c22.094 0.040 40.032-17.84 40.070-39.93 0.040-22.092-17.84-40.032-39.93-40.070l-79.672-0.14 235.73-235.734c15.622-15.622 15.622-40.948 0-56.568s-40.946-15.622-56.566 0l-235.442 235.442 0.098-78.946c0.028-22.092-17.86-40.022-39.95-40.050-11.066-0.014-21.086 4.464-28.336 11.714-7.222 7.228-11.7 17.208-11.714 28.236l-0.218 175.688c-0.026 22.082 17.844 40.010 39.93 40.050z\"></path></svg>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<svg viewBox=\"5 4 15 15\" fill=\"currentColor\" width=\"9\" height=\"13\" className=\"active_button\"><path d=\"M10.9393398,12 L6,7.06066017 C5.70710678,6.76776695 5.70710678,6.29289322 6,6 C6.29289322,5.70710678 6.76776695,5.70710678 7.06066017,6 L12,10.9393398 L16.9393398,6 C17.232233,5.70710678 17.7071068,5.70710678 18,6 C18.2928932,6.29289322 18.2928932,6.76776695 18,7.06066017 L13.0606602,12 L18,16.9393398 C18.2928932,17.232233 18.2928932,17.7071068 18,18 C17.7071068,18.2928932 17.232233,18.2928932 16.9393398,18 L12,13.0606602 L7.06066017,18 C6.76776695,18.2928932 6.29289322,18.2928932 6,18 C5.70710678,17.7071068 5.70710678,17.232233 6,16.9393398 L10.9393398,12 Z\"></path></svg>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\r\n\t\t\t\t\t<button>\r\n\t\t\t\t\t\t<svg viewBox=\"0 0 1024 1024\"><path d=\"M960.132 210.186c0-0.444-0.050-0.874-0.066-1.312-0.024-0.684-0.044-1.366-0.104-2.046-0.060-0.74-0.158-1.468-0.26-2.198-0.080-0.564-0.156-1.128-0.258-1.692-0.146-0.792-0.328-1.566-0.518-2.34-0.124-0.508-0.244-1.014-0.39-1.518-0.224-0.784-0.488-1.548-0.76-2.312-0.176-0.49-0.344-0.98-0.538-1.466-0.302-0.754-0.642-1.486-0.988-2.216-0.224-0.472-0.436-0.946-0.68-1.41-0.398-0.762-0.838-1.496-1.284-2.228-0.242-0.396-0.466-0.798-0.722-1.19-0.608-0.924-1.262-1.81-1.942-2.678-0.132-0.168-0.248-0.346-0.382-0.512-0.98-1.212-2.028-2.364-3.14-3.454l-104.020-104.9c-3.714-3.714-7.988-6.518-12.542-8.464-0.088-0.040-0.174-0.084-0.262-0.122-0.994-0.418-2.006-0.774-3.024-1.108-0.242-0.080-0.474-0.176-0.72-0.252-0.942-0.288-1.894-0.516-2.854-0.732-0.334-0.076-0.658-0.176-0.996-0.244-0.998-0.2-2.004-0.336-3.010-0.458-0.306-0.038-0.606-0.1-0.912-0.13-1.322-0.13-2.65-0.204-3.976-0.204h-391.784c-1.754 0-3.468 0.152-5.162 0.372-19.646 2.538-34.838 19.29-34.838 39.628v145.516h-279.874c-1.754 0-3.468 0.152-5.162 0.372-19.646 2.538-34.838 19.29-34.838 39.628v628.28c0 22.094 17.91 40 40 40h496.118c13.808 0 25.98-6.996 33.168-17.636 0.102-0.148 2.084-3.466 2.128-3.548 2.992-5.612 4.704-12.010 4.704-18.808 0 0 0 0 0-0.004v-145.518h279.874c13.808 0 25.98-6.996 33.168-17.636 0.102-0.148 2.084-3.466 2.128-3.548 2.992-5.612 4.704-12.010 4.704-18.808 0 0 0 0 0-0.004v-521.828c0.008-0.23-0.016-0.458-0.014-0.688 0.002-0.202 0.028-0.39 0.028-0.584zM144.124 878.792v-548.278h311.752v65.186c0 22.090 17.91 40 40 40h64.366v443.092h-416.118zM640.244 693.278v-296.31c0.006-0.23-0.018-0.458-0.014-0.688 0.004-0.196 0.030-0.382 0.030-0.578 0-0.444-0.052-0.874-0.066-1.312-0.024-0.684-0.044-1.366-0.104-2.046-0.062-0.74-0.16-1.468-0.262-2.198-0.078-0.564-0.152-1.128-0.258-1.692-0.144-0.792-0.324-1.566-0.516-2.34-0.124-0.508-0.246-1.014-0.39-1.518-0.226-0.784-0.488-1.548-0.76-2.312-0.174-0.49-0.342-0.98-0.538-1.466-0.302-0.754-0.64-1.486-0.988-2.216-0.222-0.472-0.438-0.946-0.68-1.41-0.398-0.762-0.838-1.496-1.284-2.228-0.242-0.396-0.466-0.798-0.724-1.19-0.606-0.924-1.262-1.81-1.942-2.678-0.13-0.168-0.246-0.346-0.382-0.512-0.978-1.212-2.028-2.364-3.138-3.454l-104.020-104.9c-3.714-3.714-7.988-6.518-12.542-8.464-0.088-0.040-0.172-0.084-0.262-0.122-0.994-0.418-2.004-0.774-3.024-1.108-0.242-0.080-0.476-0.176-0.72-0.252-0.942-0.288-1.896-0.516-2.854-0.732-0.334-0.076-0.658-0.176-0.996-0.244-0.998-0.2-2.004-0.336-3.012-0.458-0.304-0.038-0.602-0.1-0.91-0.13-1.322-0.13-2.648-0.204-3.976-0.204h-31.916v-105.516h311.752v65.186c0 22.090 17.91 40 40 40h64.366v443.092h-239.87z\"></path></svg>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n\tshapes: state.shapes,\r\n\tconfig: state.config\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ setShapes, updateDesignTemplate }\r\n)(ToolBar);","import { ConfigActionTypes, UPDATE_DESIGN_TEMPLATE, UPDATE_SVG_REF } from \"./types\";\r\nimport { TemplatesTypes } from \"../../interfaces/designTemplates\";\r\n\r\nexport function updateDesignTemplate(design: TemplatesTypes) : ConfigActionTypes {\r\n\treturn {\r\n\t\ttype: UPDATE_DESIGN_TEMPLATE,\r\n\t\tpayload: {\r\n\t\t\tdesign: design\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function updateSVGRef(ref: SVGSVGElement) : ConfigActionTypes {\r\n\treturn {\r\n\t\ttype: UPDATE_SVG_REF,\r\n\t\tpayload: {\r\n\t\t\tsvgRef: ref\r\n\t\t}\r\n\t}\r\n}","import { TemplatesTypes } from \"../../interfaces/designTemplates\";\r\n\r\nexport interface ConfigState {\r\n\tdesignTemplate: TemplatesTypes;\r\n\tsvgRef?: SVGSVGElement;\r\n}\r\n\r\nexport const UPDATE_DESIGN_TEMPLATE = \"UPDATE_DESIGN_TEMPLATE\";\r\nexport const UPDATE_SVG_REF = \"UPDATE_SVG_REF\";\r\n\r\ninterface UpdateSVGRef {\r\n\ttype: typeof UPDATE_SVG_REF;\r\n\tpayload: {\r\n\t\tsvgRef: SVGSVGElement\r\n\t}\r\n}\r\n\r\ninterface UpdateDesignTempalte {\r\n\ttype: typeof UPDATE_DESIGN_TEMPLATE;\r\n\tpayload: {\r\n\t\tdesign: TemplatesTypes;\r\n\t}\r\n}\r\n\r\nexport type ConfigActionTypes = \r\n\tUpdateDesignTempalte |\r\n\tUpdateSVGRef;","import { MouseActionTypes, UPDATE_MOUSE_LOCATION } from \"./types\";\r\n\r\nexport function updateMouseLocation(x: number, y: number) : MouseActionTypes {\r\n\treturn {\r\n\t\ttype: UPDATE_MOUSE_LOCATION,\r\n\t\tpayload: {\r\n\t\t\tx,\r\n\t\t\ty\r\n\t\t}\r\n\t};\r\n}","// Describing the mouse's slice of state\r\nexport interface MouseState {\r\n\txPointer: number;\r\n\tyPointer: number;\r\n}\r\n\r\n// Describing the different ACTION NAMES available\r\nexport const UPDATE_MOUSE_LOCATION = \"UPDATE_LOCATION\";\r\n\r\ninterface UpdateMouseLocation {\r\n\ttype: typeof UPDATE_MOUSE_LOCATION;\r\n\tpayload: {\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t};\r\n}\r\n\r\nexport type MouseActionTypes =\r\n\tUpdateMouseLocation;","import * as React from 'react';\r\nimport Card from 'react-bootstrap/Card';\r\n//import Button from 'react-bootstrap/Button';\r\n//import img from '../../assets/templates/resnet.png';\r\nimport './template.scss';\r\n\r\nexport interface ITemplateProps {\r\n\ttitle: string;\r\n\tdesc: string;\r\n\tchooseTemplate: () => void;\r\n}\r\n\r\nexport default class Template extends React.Component<ITemplateProps> {\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t<Card bsPrefix={\"card template-card\"} onClick={this.props.chooseTemplate}>\r\n\t\t\t<Card.Body>\r\n\t\t\t\t<strong>{this.props.title}</strong>\r\n\t\t\t</Card.Body>\r\n\t\t<Card.Footer>{this.props.desc}</Card.Footer>\r\n\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n","import * as React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\nimport CardDeck from 'react-bootstrap/CardDeck';\r\nimport Template from './Template';\r\n\r\nexport interface ITemplatesModalProps {\r\n\tshow: boolean;\r\n\tonHide: () => void;\r\n\t//setShapes: typeof setShapes;\r\n}\r\n\r\nclass TemplatesModal extends React.Component<ITemplatesModalProps> {\r\n\thandleTemplate = (temp: string) => {\r\n\t\t/*switch(temp) {\r\n\t\t\tcase \"resnet\":\r\n\t\t\t\tthis.props.setShapes(ResNet);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"blank\":\r\n\t\t\t\tthis.props.setShapes(seedNewShapes);\r\n\t\t\t\tbreak;\r\n\t\t}*/\r\n\r\n\t\tthis.props.onHide();\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t<Modal\r\n\t\t\t{...this.props}\r\n\t\t\tsize=\"lg\"\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\tSelect Pretrained Networks\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<CardDeck>\r\n\t\t\t\t\t<Template\r\n\t\t\t\t\t\tchooseTemplate={() => this.handleTemplate(\"resnet\")}\r\n\t\t\t\t\t\ttitle={\"ResNet\"}\r\n\t\t\t\t\t\tdesc={\"A ResNet Architecture\"} />\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Template\r\n\t\t\t\t\t\tchooseTemplate={() => this.handleTemplate(\"blank\")}\r\n\t\t\t\t\t\ttitle={\"Blank\"}\r\n\t\t\t\t\t\tdesc={\"Open new template\"} />\r\n\t\t\t\t</CardDeck>\r\n\t\t\t</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button onClick={this.props.onHide}>Close</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default /*connect(\r\n\tnull,\r\n\t{ setShapes }\r\n)*/(TemplatesModal);","import { ToastsActionTypes, ADD_TOAST, REMOVE_TOAST } from \"./types\";\r\n\r\nexport function addToast(title: string, desc: string) : ToastsActionTypes {\r\n\treturn {\r\n\t\ttype: ADD_TOAST,\r\n\t\tpayload: {\r\n\t\t\ttitle: title,\r\n\t\t\tdesc: desc\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function removeToast(timestamp: number) : ToastsActionTypes {\r\n\treturn {\r\n\t\ttype: REMOVE_TOAST,\r\n\t\tmeta: {\r\n\t\t\ttimestamp: timestamp\r\n\t\t}\r\n\t};\r\n}","// Describing the mouse's slice of state\r\nexport interface ToastsState {\r\n\tnotifications: ToastInformation[];\r\n}\r\n\r\nexport interface ToastInformation {\r\n\ttimestamp: number;\r\n\ttitle: string;\r\n\tdesc: string;\r\n}\r\n\r\n// Describing the different ACTION NAMES available\r\nexport const ADD_TOAST = \"ADD_TOAST\";\r\nexport const REMOVE_TOAST = \"REMOVE_TOAST\";\r\n\r\ninterface AddToastAction {\r\n\ttype: typeof ADD_TOAST;\r\n\tpayload: {\r\n\t\ttitle: string;\r\n\t\tdesc: string;\r\n\t};\r\n}\r\n\r\ninterface RemoveToastAction {\r\n\ttype: typeof REMOVE_TOAST;\r\n\tmeta: {\r\n\t\ttimestamp: number;\r\n\t}\r\n}\r\n\r\nexport type ToastsActionTypes =\r\n\tAddToastAction |\r\n\tRemoveToastAction;","import { AllActivationFunctions } from \"./activations\";\r\nimport { Shape } from \"./IShape\";\r\n\r\nexport default class ArrowMap {\r\n\t/*private activationMap = new Map<string, AllActivationFunctions>();\r\n\tprivate connectedToMap = new Map<Shape, Shape[]>();\r\n\tprivate connectedToMeMap = new Map<Shape, Shape[]>();*/\r\n\r\n\tprivate activationMap = new Map<string, AllActivationFunctions>();\r\n\tprivate connectedToMap = new Map<Shape, Shape[]>();\r\n\tprivate connectedToMeMap = new Map<Shape, Shape[]>();\r\n\r\n\tconstructor(otherArrowMap?: ArrowMap) {\r\n\t\tif(otherArrowMap)\r\n\t\t{\r\n\t\t\tthis.activationMap = new Map<string, AllActivationFunctions>(otherArrowMap.activationMap); \r\n\t\t\tthis.connectedToMap = new Map<Shape, Shape[]>(otherArrowMap.connectedToMap);\r\n\t\t\tthis.connectedToMeMap = new Map<Shape, Shape[]>(otherArrowMap.connectedToMeMap);\r\n\t\t}\r\n\t}\r\n\r\n    set(key: [Shape, Shape], value: AllActivationFunctions): this {\r\n\t\tconst newKey = key[0].timestamp + \"|\" + key[1].timestamp;\r\n\t\tconst isArrowAlreadyExists = this.activationMap.has(newKey);\r\n\t\t\r\n\t\tthis.activationMap.set(newKey, value);\r\n\r\n\t\t// If the arrow already exists, we just needed to set the activationMap\r\n\t\t// to point on the new activation value (@value parameter)\r\n\t\t// no need to add it to the other maps as it's already exists there.\r\n\r\n\t\tif(!isArrowAlreadyExists)\r\n\t\t{\r\n\t\t\tif(this.connectedToMap.has(key[0]))\r\n\t\t\t\tthis.connectedToMap.get(key[0])!.push(key[1]);\r\n\t\t\telse\r\n\t\t\t\tthis.connectedToMap.set(key[0], [key[1]]);\r\n\r\n\t\t\tif(this.connectedToMeMap.has(key[1]))\r\n\t\t\t\tthis.connectedToMeMap.get(key[1])!.push(key[0]);\r\n\t\t\telse\r\n\t\t\t\tthis.connectedToMeMap.set(key[1], [key[0]]);\r\n\t\t}\r\n\r\n        return this;\r\n    }\r\n\r\n    get(key: [Shape, Shape]): AllActivationFunctions | undefined {\r\n        return this.activationMap.get(key[0].timestamp + \"|\" + key[1].timestamp);\r\n\t}\r\n\t\r\n\tdeleteShapeArrows(sourceShape: Shape) : boolean {\r\n\t\t\r\n\t\tthis.connectedToMap.forEach(shapes => shapes.forEach(targetShape => this.deleteArrow([sourceShape, targetShape])));\r\n\t\tthis.connectedToMeMap.forEach(shapes => shapes.forEach(targetShape => this.deleteArrow([targetShape, sourceShape])));\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n    deleteArrow(key: [Shape, Shape]): boolean {\r\n\t\tif(!this.connectedToMap.get(key[0]) || !this.connectedToMeMap.get(key[1]))\r\n\t\t\treturn false;\r\n\r\n\t\tthis.connectedToMap.set(\r\n\t\t\tkey[0], \r\n\t\t\tthis.connectedToMap.get(key[0])!.filter(s => s !== key[1])\r\n\t\t);\r\n\r\n\t\tthis.connectedToMeMap.set(\r\n\t\t\tkey[1], \r\n\t\t\tthis.connectedToMeMap.get(key[1])!.filter(s => s !== key[0])\r\n\t\t);\r\n\r\n\t\treturn this.activationMap.delete(key[0].timestamp + \"|\" + key[1].timestamp);\r\n    }\r\n\r\n    has(key: [Shape, Shape]): boolean {\r\n        return this.activationMap.has(key[0].timestamp + \"|\" + key[1].timestamp);\r\n    }\r\n\r\n    get size() {\r\n        return this.activationMap.size;\r\n\t}\r\n\r\n\tgetConnectedToCount(targetShape: Shape) : number {\r\n\t\treturn this.connectedToMap.has(targetShape) ? this.connectedToMap.get(targetShape)!.length : 0;\r\n\t}\r\n\r\n\tgetConnectedToMeCount(targetShape: Shape) : number {\r\n\t\treturn this.connectedToMeMap.has(targetShape) ? this.connectedToMeMap.get(targetShape)!.length : 0;\r\n\t}\r\n\r\n\tgetConnectedToMe(shape: Shape) : Shape[] | undefined {\r\n\t\treturn this.connectedToMeMap.get(shape);\r\n\t}\r\n\r\n\tgetConnectedTo(shape: Shape) : Shape[] | undefined {\r\n\t\treturn this.connectedToMap.get(shape);\r\n\t}\r\n\t\r\n\tgetList() {\r\n\t\tconst newList: [Shape, Shape, AllActivationFunctions][] = [];\r\n\t\t\r\n\t\tthis.connectedToMap.forEach((value, sourceShape) => {\r\n\t\t\t\r\n\t\t\tvalue.forEach(targetShape =>\r\n\t\t\t{\r\n\t\t\t\tnewList.push(\r\n\t\t\t\t[\r\n\t\t\t\t\tsourceShape,\r\n\t\t\t\t\ttargetShape,\r\n\t\t\t\t\tthis.get([sourceShape, targetShape])!\r\n\t\t\t\t])\r\n\t\t\t})\r\n\t\t});\r\n\r\n\t\treturn newList;\r\n\t}\r\n\r\n    /*forEach(callbackfn: (value: AllActivationFunctions, key: string, map: Map<[Shape, Shape], AllActivationFunctions>) => void, thisArg?: any): void {\r\n        this.map.forEach((value, key) => {\r\n            callbackfn.call(thisArg, value, key, this);\r\n        });\r\n    }*/\r\n}","export class Queue<T>\r\n{\r\n\tprivate items : T[]  = []\r\n\r\n\t// Enqueue function \r\n\tenqueue(element : T) \r\n\t{     \r\n\t\t// adding element to the queue \r\n\t\tthis.items.push(element); \r\n\t}\r\n\r\n\t// Dequeue function \r\n\tdequeue() \r\n\t{\r\n\t\treturn this.items.shift(); \r\n\t}\r\n\r\n\t// isEmpty function \r\n\tisEmpty() \r\n\t{ \r\n\t\t// Returns true if the queue is empty. \r\n\t\treturn this.items.length === 0; \r\n\t}\r\n\t\r\n\t\r\n\t// Front function \r\n\tfront() \r\n\t{ \r\n\t\t// Returns the Front element of  \r\n\t\t// the queue without removing it.\r\n\r\n\t\treturn this.isEmpty() ? this.items[0] : undefined; \r\n\t}\r\n}","import ArrowMap from \"../../interfaces/arrowMap\";\r\nimport FullyConnected from \"../../components/DiagramContainer/Shapes/FullyConnected\";\r\nimport Concatenate from \"../../components/DiagramContainer/Shapes/Concatenate\";\r\nimport Output from \"../../components/DiagramContainer/Shapes/Output\";\r\nimport { Shape } from \"../../interfaces/IShape\";\r\nimport Convolutional from \"../../components/DiagramContainer/Shapes/Convolutional\";\r\nimport Flatten from \"../../components/DiagramContainer/Shapes/Flatten\";\r\n\r\nexport const fillPytorchCode = (sortedList: Shape[], arrows: ArrowMap) => {\r\n\tconst layersOutput: string[] = []\r\n\tconst connectionsOutput: string[] = []\r\n\t\r\n\tfor(let i = 1; i < sortedList.length; i++) {\r\n\t\tconst currShape = sortedList[i];\r\n\r\n\t\t// Create the Layers in the constructor and\r\n\t\t// Create the connections in the forward method\r\n\r\n\t\tif(currShape.shape === FullyConnected) {\r\n\t\t\tconst inputDim = currShape.additionalInfo!.inputDimension;\r\n\t\t\tconst outputDim = currShape.additionalInfo!.outputDimension;\r\n\r\n\t\t\tlayersOutput.push(\"\\t\\tself.layer\" + i + \" = nn.Linear(\"+inputDim+\", \"+outputDim+\")\");\r\n\r\n\t\t\tconst previousIndex = sortedList.findIndex(s => s === arrows.getConnectedToMe(currShape)![0]);\r\n\t\t\tconnectionsOutput.push(\"\\t\\tx\" + i + \" = self.layer\" + i + \"(x\" + previousIndex + \")\");\r\n\t\t}\r\n\t\telse if(currShape.shape === Concatenate) {\r\n\t\t\tconst allIndexes: string[] = [];\r\n\r\n\t\t\tarrows.getConnectedToMe(currShape)!.forEach(connectedShape => {\r\n\t\t\t\tallIndexes.push(\"x\" + sortedList.findIndex(s => s === connectedShape));\r\n\t\t\t});\r\n\r\n\t\t\tconnectionsOutput.push(\"\\t\\tx\" + i + \" = torch.cat((\" + allIndexes.join(', ') + \"), dim=1)\");\r\n\t\t}\r\n\t\telse if(currShape.shape === Convolutional) {\r\n\t\t\tconst inChannels = currShape.additionalInfo!.inChannels;\r\n\t\t\tconst outChannels = currShape.additionalInfo!.outChannels;\r\n\t\t\tconst kernelSize = currShape.additionalInfo!.kernelSize;\r\n\t\t\tconst stride = currShape.additionalInfo!.stride;\r\n\r\n\t\t\tlayersOutput.push(\"\\t\\tself.layer\" + i + \" = nn.Conv2d(\"+inChannels+\", \"+outChannels+\", \"+kernelSize+\", \"+stride+\")\");\r\n\t\t\t\r\n\t\t\tconst previousIndex = sortedList.findIndex(s => s === arrows.getConnectedToMe(currShape)![0]);\r\n\t\t\tconnectionsOutput.push(\"\\t\\tx\" + i + \" = self.layer\" + i + \"(x\" + previousIndex + \")\");\r\n\t\t}\r\n\t\telse if(currShape.shape === Flatten) {\r\n\t\t\tconst previousIndex = sortedList.findIndex(s => s === arrows.getConnectedToMe(currShape)![0]);\r\n\t\t\tconnectionsOutput.push(\"\\t\\tx\" + i + \" = x\" + previousIndex + \".reshape(x\" + previousIndex + \".size(0), -1)\");\r\n\t\t}\r\n\t\telse if(currShape.shape === Output) {\r\n\t\t\tconst previousIndex = sortedList.findIndex(s => s === arrows.getConnectedToMe(currShape)![0]);\r\n\t\t\tconnectionsOutput.push(\"\\n\\t\\treturn x\" + previousIndex + \"\");\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tlayersOutput,\r\n\t\tconnectionsOutput\r\n\t};\r\n}\r\n\r\nexport const generateFullPyTorchCode = (sortedList: Shape[], arrows: ArrowMap) => {\r\n\tconst {layersOutput, connectionsOutput} = fillPytorchCode(sortedList, arrows);\r\n\r\n\treturn headerCode[0] + layersOutput.join('\\n') + headerCode[1] + connectionsOutput.join('\\n');\r\n}\r\n\r\nexport const headerCode = [`import torch\r\nimport torch.nn as nn\r\nimport torch.nn.functional as F\r\n\r\nclass GeneratedNetwork(nn.Module):\r\n\\tdef __init__(self):\r\n\\t\\tsuper(GeneratedNetwork, self).__init__()\\n\r\n\\t\\t# Model layers\\n`,`\\n\\n\\tdef forward(self, x0):\\n`];","import { topologicalSort, BFSAncestorsCount } from \"./graphAlgorithms\";\r\nimport { generateFullPyTorchCode } from \"./generateCode/pytorch\";\r\nimport { addToast } from \"../store/toasts/actions\";\r\nimport ArrowMap from \"../interfaces/arrowMap\";\r\nimport { CodeTypes, PYTORCH_CODE } from \"./generateCode/types\";\r\nimport Input from \"../components/DiagramContainer/Shapes/Input\";\r\nimport { Shape } from \"../interfaces/IShape\";\r\n\r\n/**\r\n * All the model logic of creating code and creating errors\r\n * \r\n * @param vertexes - All Layers list\r\n * @param arrowsMap - All Arrows\r\n * @param addNotifcation - A function to make error notifications\r\n * \r\n * @return A code hashmap or empty hashmap\r\n */\r\n\r\nexport const generateGraphCodeableWithErrors = (\r\n\tvertexes: Shape[], \r\n\tarrowsMap: ArrowMap, \r\n\taddNotifcation: typeof addToast\r\n) : Map<CodeTypes, string> => {\r\n\t\r\n\t// The final output\r\n\tconst codedMap = new Map<CodeTypes, string>();\r\n\r\n\tif(vertexes.length === 0 || vertexes[0].shape !== Input) {\r\n\t\taddNotifcation(\"Code Generation Error\", `Cannot generate code if the \r\n\t\tfirst layer is not an Input layter.`);\r\n\r\n\t\treturn codedMap;\r\n\t}\r\n\r\n\tconst bfsCount = BFSAncestorsCount(vertexes[0], arrowsMap);\r\n\t\r\n\tif(bfsCount !== vertexes.length) {\r\n\t\taddNotifcation(\"Code Generation Error\", `All layers must be ancestors of the Input layer. \r\n\t\tIt seems like you didn't finish design your model.`);\r\n\r\n\t\treturn codedMap;\r\n\t}\r\n\r\n\t// TopologicalSort already prints error if exists.\r\n\tconst shapes = topologicalSort(vertexes, arrowsMap, addNotifcation);\r\n\tif(!shapes || shapes.length === 0) {\r\n\t\treturn codedMap;\r\n\t}\r\n\r\n\tcodedMap.set(\r\n\t\tPYTORCH_CODE, \r\n\t\tgenerateFullPyTorchCode(shapes, arrowsMap)\r\n\t);\r\n\r\n\treturn codedMap;\r\n}","import ArrowMap from \"../interfaces/arrowMap\";\r\nimport { addToast } from \"../store/toasts/actions\";\r\nimport { Queue } from \"../interfaces/queue\";\r\nimport { Shape } from \"../interfaces/IShape\";\r\n\r\n\r\n/**\r\n * Kahn's Alogirthm\r\n * https://dl.acm.org/doi/10.1145/368996.369025\r\n * More readable alogirthm source:\r\n * https://en.wikipedia.org/wiki/Topological_sorting#Kahn's_algorithm\r\n * \r\n * @param vertexes - List of all vertexes \r\n * @param arrowsMap - List of all edges\r\n * @param addNotifcation - a function to display errors\r\n * \r\n * @returns undefined | sortedList : Shape[]\r\n */\r\nexport const topologicalSort = (\r\n\tvertexes: Shape[], \r\n\tarrowsMap: ArrowMap, \r\n\taddNotifcation: typeof addToast) =>\r\n{\r\n\t// Copy of the Arrow Map ( so we could delete edges and vertexes )\r\n\tconst arrows = new ArrowMap(arrowsMap);\r\n\r\n\t// Empty list that will contain the sorted elements\r\n\tconst L: Shape[] = [];\r\n\t\r\n\t// Set of all nodes with no incoming edge\r\n\tconst S: Shape[] = [];\r\n\r\n\tfor(const vertex of vertexes) {\r\n\t\t// If vertex has no incoming edges:\r\n\t\tif(arrows.getConnectedToMeCount(vertex) === 0) {\r\n\t\t\tS.push(vertex);\r\n\t\t}\r\n\t}\r\n\r\n\t// While s is non-empty do\r\n\twhile(S.length > 0) {\r\n\t\t// Remove a node n from S\r\n\t\tconst node: Shape = S.pop()!;\r\n\r\n\t\t// Add n to tail of L\r\n\t\tL.push(node);\r\n\r\n\t\t// For each node m with an edge e from n to m do\r\n\t\tif(arrows.getConnectedToCount(node) > 0) {\r\n\t\t\tfor(const m of arrows.getConnectedTo(node)!) {\r\n\t\t\t\t// Remove edge e from the graph\r\n\t\t\t\tarrows.deleteArrow([node, m]);\r\n\r\n\t\t\t\t// If m has no other incoming edges then\r\n\t\t\t\tif(arrows.getConnectedToMeCount(m) === 0)\r\n\t\t\t\t\tS.push(m);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// If graph has edges then\r\n\tif(arrows.size > 0) {\r\n\t\taddNotifcation(\"Interpretation Error\", `Cannot have cycles in your model.`);\r\n\t\treturn;\r\n\t}\r\n\r\n\t// A topologically sorted order\r\n\treturn L;\r\n}\r\n\r\n\r\n/**\r\n * A BFS algorithm. Note that it is a bit modified in that way that we don't have a goal vertex,\r\n * But instead we will just traverse the graph until we visited all the ancestors inputShape\r\n * \r\n * @param inputShape - The input shape as it will be the \"start_v\" in the algorithm\r\n * @param arrowsMap - List of all edges\r\n * \r\n * @returns Discovered shapes size\r\n */\r\nexport const BFSAncestorsCount = (\r\n\tinputShape: Shape,\r\n\tarrowsMap: ArrowMap) => \r\n{\r\n\tconst discoveredShapes = new Set<Shape>();\r\n\r\n\t// Let Q be a queue\r\n\tconst Q = new Queue<Shape>();\r\n\r\n\t// Label start_v as discovered\r\n\tdiscoveredShapes.add(inputShape);\r\n\r\n\tQ.enqueue(inputShape);\r\n\r\n\t// While Q is not empty do\r\n\twhile(!Q.isEmpty()) {\r\n\t\tconst v = Q.dequeue()!;\r\n\t\t\r\n\t\t// For all edges from v to w in G.adjacentEdges(v) do\r\n\t\tif(arrowsMap.getConnectedToCount(v) > 0) {\r\n\t\t\tfor(const w of arrowsMap.getConnectedTo(v)!) {\r\n\t\t\t\t// If w is not labeled as discovered then\r\n\t\t\t\tif(!discoveredShapes.has(w)) {\r\n\t\t\t\t\t// Label w as discovered\t\r\n\t\t\t\t\tdiscoveredShapes.add(w);\r\n\r\n\t\t\t\t\t// We could have set w.parent to be V\r\n\t\t\t\t\t// but we just care about ancestors count\r\n\r\n\t\t\t\t\tQ.enqueue(w);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn discoveredShapes.size;\r\n}","export const PYTORCH_CODE = \"PYTORCH_CODE\";\r\n\r\n\r\nexport type CodeTypes = typeof PYTORCH_CODE;","import * as React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport './CodeGeneratorPanel.scss';\r\nimport SyntaxHighlighter from 'react-syntax-highlighter';\r\nimport { githubGist } from 'react-syntax-highlighter/dist/esm/styles/hljs';\r\nimport { AppState } from '../../store';\r\nimport { connect } from 'react-redux';\r\nimport { addShape, editActiveShape } from '../../store/shapes/actions';\r\nimport { updateMouseLocation } from '../../store/mouse/actions';\r\nimport { ShapeState } from '../../store/shapes/types';\r\nimport { addToast } from '../../store/toasts/actions';\r\nimport { generateGraphCodeableWithErrors } from '../../model/graphCodes';\r\nimport { PYTORCH_CODE } from '../../model/generateCode/types';\r\n\r\nexport interface ICodeGeneratorPanelProps {\r\n\tshow: boolean;\r\n\tonHide: () => void;\r\n\taddToast: typeof addToast;\r\n\tshapes: ShapeState;\r\n}\r\n\r\nexport interface ICodeGeneratorPanelState {\r\n\tpytorchCode: string;\r\n\tisValidCode: boolean;\r\n}\r\n\r\nclass CodeGeneratorPanel extends React.Component<ICodeGeneratorPanelProps, ICodeGeneratorPanelState> {\r\n\tstate = {\r\n\t\tpytorchCode: '',\r\n\t\tisValidCode: false\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// This function also create error notifications.\r\n\t\tconst codeMap = generateGraphCodeableWithErrors(this.props.shapes.shapes, this.props.shapes.arrows, this.props.addToast);\r\n\t\t\r\n\t\tconsole.log(codeMap);\r\n\t\tif(codeMap.size > 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tisValidCode: true,\r\n\t\t\t\tpytorchCode: codeMap.get(PYTORCH_CODE) || ''\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// If there is an error we must close this component\r\n\t\t\tthis.props.onHide();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic render() {\r\n\r\n\t\tif(this.state.isValidCode)\r\n\t\treturn (\r\n\t\t<Modal\r\n\t\t\t{...this.props}\r\n\t\t\tsize=\"lg\"\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\tGenerated Code\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Tab.Container id=\"left-tabs-example\" defaultActiveKey=\"pytorch\">\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col sm={3}>\r\n\t\t\t\t\t\t<Nav variant=\"pills\" className=\"flex-column\">\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"pytorch\">PyTorch</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"tensorflow\">TensorFlow</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"keras\">Keras</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"tfjs\">TensorFlow.js</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\r\n\t\t\t\t\t\t\t<Nav.Item>\r\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"caffe\">Caffe</Nav.Link>\r\n\t\t\t\t\t\t\t</Nav.Item>\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col sm={9}>\r\n\t\t\t\t\t\t<Tab.Content>\r\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"pytorch\">\r\n\t\t\t\t\t\t\t\t<SyntaxHighlighter\r\n\t\t\t\t\t\t\t\t\tshowLineNumbers={true}\r\n\t\t\t\t\t\t\t\t\tlanguage=\"python\"\r\n\t\t\t\t\t\t\t\t\tstyle={githubGist}\r\n\t\t\t\t\t\t\t\t\tcustomStyle={{\r\n\t\t\t\t\t\t\t\t\t\tfontSize: 11,\r\n\t\t\t\t\t\t\t\t\t\ttabSize: 2,\r\n\t\t\t\t\t\t\t\t\t\tmaxHeight: 400\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\twrapLines={true}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.state.pytorchCode}\r\n\t\t\t\t\t\t\t\t</SyntaxHighlighter>\r\n\t\t\t\t\t\t\t</Tab.Pane>\r\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"tensorflow\">\r\n\t\t\t\t\t\t\t\tTestTest\r\n\t\t\t\t\t\t\t</Tab.Pane>\r\n\t\t\t\t\t\t</Tab.Content>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Tab.Container>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t\t);\r\n\t\telse\r\n\t\treturn null;\r\n\t\t\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n\tshapes: state.shapes\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ addToast }\r\n)(CodeGeneratorPanel);\r\n","import * as React from 'react';\r\nimport './sidebar.scss';\r\nimport Button from 'react-bootstrap/Button';\r\n//import Card from 'react-bootstrap/Card';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport { addShape, editActiveShape } from '../../store/shapes/actions';\r\nimport { updateMouseLocation } from '../../store/mouse/actions';\r\nimport { ShapeState } from '../../store/shapes/types';\r\nimport { AppState } from '../../store';\r\nimport { connect } from 'react-redux';\r\nimport { layersMap } from '../../interfaces/shapes';\r\nimport TemplatesModal from '../TemplatesModal';\r\nimport CodeGeneratorPanel from '../CodeGeneratorPanel';\r\nimport { addToast } from '../../store/toasts/actions';\r\nimport { Shape } from '../../interfaces/IShape';\r\nimport { ConfigState } from '../../store/config/types';\r\n\r\nexport interface ISideBarProps {\r\n\taddShape: typeof addShape;\r\n\teditActiveShape: typeof editActiveShape;\r\n\tupdateMouseLocation: typeof updateMouseLocation;\r\n\taddToast: typeof addToast;\r\n\tshapes: ShapeState;\r\n\tconfig: ConfigState;\r\n}\r\n\r\nexport interface ISideBarState {\r\n\tmodalShow: boolean;\r\n\tcodeModalShow: boolean;\r\n}\r\n\r\nclass SideBar extends React.Component<ISideBarProps, ISideBarState>\r\n{\r\n\tstate = {\r\n\t\tmodalShow: false,\r\n\t\tcodeModalShow: false\r\n\t};\r\n\r\n\thandleSetModal = (pred: boolean) => {\r\n\t\tthis.setState({\r\n\t\t\tmodalShow: pred\r\n\t\t});\r\n\t};\r\n\r\n\thandleSetCodeModal = (pred: boolean) => {\r\n\t\tthis.setState({\r\n\t\t\tcodeModalShow: pred\r\n\t\t});\r\n\t}\r\n\r\n\tcreateShape = (shapeName: string) => {\r\n\t\tconst layer = layersMap[shapeName];\r\n\r\n\t\tconst newObject : Shape = {\r\n\t\t\tname: shapeName,\r\n\t\t\ttimestamp: new Date().getTime(),\r\n\t\t\tshape: layer.create(),\r\n\t\t\tx: 100 + Math.random() * 100,\r\n\t\t\ty: 100 + Math.random() * 100,\r\n\t\t\tcenterPosition: layer.centerPosition,\r\n\t\t\t\r\n\t\t\t// Deep copy, otherwise they all will point to the same additionalInfo object\r\n\t\t\tadditionalInfo: {...layer.additionalInfo}\r\n\t\t};\r\n\r\n\t\tconsole.log(newObject);\r\n\r\n\t\tthis.props.addShape(newObject);\r\n\t}\r\n\r\n\ttoggleActive = (timestamp: number) => {\r\n\t\tthis.props.editActiveShape(\r\n\t\t\ttimestamp\r\n\t\t)\r\n\r\n\t\tconst getActiveShape = this.props.shapes.shapes.find(s => s.timestamp === timestamp)!;\r\n\r\n\t\tthis.props.updateMouseLocation(\r\n\t\t\tgetActiveShape.x + getActiveShape.centerPosition[this.props.config.designTemplate][0],\r\n\t\t\tgetActiveShape.y + getActiveShape.centerPosition[this.props.config.designTemplate][1]\r\n\t\t);\r\n\t}\r\n\t\r\n\tpublic render() {\r\n\t\tconst targetTimeStamp = this.props.shapes.sourceShape ? this.props.shapes.sourceShape.timestamp : -1;\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t<div className=\"side-bar\">\r\n\t\t\t\t<Dropdown>\r\n\t\t\t\t\t<Dropdown.Toggle\r\n\t\t\t\t\t\tvariant=\"outline-secondary\"\r\n\t\t\t\t\t\tid=\"dropdown-basic\"\r\n\t\t\t\t\t\tstyle={{width: \"100%\", marginBottom: \"10px\"}}\r\n\t\t\t\t\t>Add new layer&nbsp;&nbsp;</Dropdown.Toggle>\r\n\r\n\t\t\t\t\t<Button \r\n\t\t\t\t\t\tvariant=\"outline-secondary\"\r\n\t\t\t\t\t\tstyle={{width: \"100%\", marginBottom: \"10px\"}}\r\n\t\t\t\t\t\tonClick={() => this.handleSetModal(true)}>Choose Template</Button>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Button \r\n\t\t\t\t\t\tvariant=\"danger\"\r\n\t\t\t\t\t\tstyle={{width: \"100%\"}}\r\n\t\t\t\t\t\tonClick={() => this.handleSetCodeModal(true)}>Get Code</Button>\r\n\r\n\t\t\t\t\t<Dropdown.Menu style={{width: \"100%\"}}>\r\n\t\t\t\t\t\t<Dropdown.Header>Layers</Dropdown.Header>\r\n\t\t\t\t\t\t<Dropdown.Item onClick={() => this.createShape(\"FullyConnected\")}>Fully Connected</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item onClick={() => this.createShape(\"Convolutional\")}>Convolutional</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item onClick={() => this.createShape(\"MaxPooling\")}>Max Pooling</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item onClick={() => this.createShape(\"Dropout\")}>Dropout</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item onClick={() => this.createShape(\"BatchNormalization\")}>Batch Norm</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Divider />\r\n\t\t\t\t\t\t<Dropdown.Header>Actions</Dropdown.Header>\r\n\t\t\t\t\t\t<Dropdown.Item onClick={() => this.createShape(\"Concatenate\")}>Concatenate</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item onClick={() => this.createShape(\"Flatten\")}>Flatten</Dropdown.Item>\r\n\t\t\t\t\t\t<Dropdown.Item onClick={() => this.createShape(\"Addition\")}>Add</Dropdown.Item>\r\n\t\t\t\t\t</Dropdown.Menu>\r\n\t\t\t\t</Dropdown>\r\n\t\t\t\t<br />\r\n\t\t\t\t\r\n\t\t\t\t<h6 style={{paddingLeft: \"5px\"}}>Layers</h6>\r\n\t\t\t\t<ListGroup defaultActiveKey=\"#link1\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.shapes.shapes.map(shape => \r\n\t\t\t\t\t\t\t<ListGroup.Item\r\n\t\t\t\t\t\t\t\taction\r\n\t\t\t\t\t\t\t\tkey={shape.timestamp}\r\n\t\t\t\t\t\t\t\tactive={shape.timestamp === targetTimeStamp ? true : false}\r\n\t\t\t\t\t\t\t\tonClick={() => this.toggleActive(shape.timestamp)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{shape.name}\r\n\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</ListGroup>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<TemplatesModal \r\n\t\t\t\tshow={this.state.modalShow}\r\n\t\t\t\tonHide={() => this.handleSetModal(false)}\r\n\t\t\t/>\r\n\r\n\t\t\t{this.state.codeModalShow && \r\n\t\t\t\t<CodeGeneratorPanel\r\n\t\t\t\t\tshow={this.state.codeModalShow}\r\n\t\t\t\t\tonHide={() => this.handleSetCodeModal(false)}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n\tshapes: state.shapes,\r\n\tconfig: state.config\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ addShape, editActiveShape, updateMouseLocation, addToast }\r\n)(SideBar);","export const manhattanDistance = (x1: number, y1: number, x2: number, y2: number) => {\r\n\treturn x1-x2 + y1-y2;\r\n}\r\n\r\n/**\r\n * A function that calculate the point fixed distance from certain mid point\r\n * \r\n * @param d - Distance from mid point\r\n * @param xMid - x mid point\r\n * @param yMid - y mid point\r\n * @param x2  - x of the target shape\r\n * @param y2 - y of the target shape\r\n * \r\n * @returns [X, Y] fixed point\r\n */\r\nexport const fixedDistanceFromPolygon = (d: number, xMid: number, yMid: number, x2: number, y2: number, oppositeSide = false) => {\r\n\tlet xText, yText;\r\n\r\n\tconst m = -1 * (yMid-y2) / (xMid-x2);\r\n\r\n\tif(m < 0 && oppositeSide === true) {\r\n\t\td *= -1;\r\n\t}\r\n\r\n\tconst alpha = Math.atan(m);\r\n\tconst A = d * Math.sin(alpha);\r\n\t\r\n\t//const b = (1/m * xMid + y1);\r\n\t\r\n\txText = A + xMid;\r\n\txText += 5; // fixed size\r\n\tyText = yMid + d * Math.cos(alpha);\r\n\r\n\treturn [xText, yText];\r\n}","import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AppState } from '../../store';\r\nimport { editActiveShape, updateShapePositionAction, addArrowAndUpdateConnections } from '../../store/shapes/actions';\r\nimport { updateMouseLocation } from '../../store/mouse/actions';\r\nimport { addToast } from '../../store/toasts/actions';\r\nimport { ShapeState } from '../../store/shapes/types';\r\nimport { manhattanDistance } from '../../utils/distance';\r\nimport { isValidArrow } from '../../model/checkArrow';\r\nimport { Shape } from '../../interfaces/IShape';\r\n\r\nimport './diagram.scss';\r\nimport { ConfigState } from '../../store/config/types';\r\n\r\nexport interface IDraggableSVGProps {\r\n\tcurrentShape: Shape;\r\n\tshapes: ShapeState;\r\n\tconfig: ConfigState;\r\n\tchildren: React.ReactNode;\r\n\tisMarked: boolean;\r\n\teditActiveShape: typeof editActiveShape;\r\n\tupdateShapePositionAction: typeof updateShapePositionAction;\r\n\taddArrowAndUpdateConnections: typeof addArrowAndUpdateConnections;\r\n\tupdateMouseLocation: typeof updateMouseLocation;\r\n\taddToast: typeof addToast;\r\n}\r\n\r\n// We must maintain a local state in addition to the redux shape attributes\r\n// so we could move shapes that are not targeted.\r\n\r\nexport interface IDraggableSVGState {\r\n\tx: number;\r\n\ty: number;\r\n\thistoryX: number;\r\n\thistoryY: number;\r\n\tcurrentMove: boolean;\r\n\toffset: {\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t}\r\n}\r\n\r\nclass DraggableSVG extends React.PureComponent<IDraggableSVGProps, IDraggableSVGState> {\r\n\tconstructor(props: IDraggableSVGProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tx: this.props.currentShape.x,\r\n\t\t\ty: this.props.currentShape.y,\r\n\t\t\thistoryX: 100,\r\n\t\t\thistoryY: 100,\r\n\t\t\tcurrentMove: false,\r\n\t\t\toffset: {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// TODO: use this component to avoid wasted rendering.\r\n\t/*shouldComponentUpdate() {\r\n\t\treturn false;\r\n\t}*/\r\n\r\n\thandlePointerDown = (e : React.PointerEvent<EventTarget>) => {\r\n\t\tconst el = e.target as HTMLInputElement;\r\n\t\tconst bbox = el.getBoundingClientRect();\r\n\t\tconst x = e.clientX - bbox.left;\r\n\t\tconst y = e.clientY - bbox.top;\r\n\r\n\t\tel.setPointerCapture(e.pointerId);\r\n\t\tthis.setState((oldState) => ({\r\n\t\t\tcurrentMove: true,\r\n\t\t\thistoryX: oldState.x,\r\n\t\t\thistoryY: oldState.y,\r\n\t\t\toffset: {\r\n\t\t\t\tx,\r\n\t\t\t\ty\r\n\t\t\t}})\r\n\t\t);\r\n\t};\r\n\r\n\r\n\t// TODO: Math.floor the position, this will improve the performance significantly.\r\n\thandlePointerMove = (e: React.PointerEvent<EventTarget>) => {\r\n\t\tconst el = e.target as HTMLInputElement;\r\n\t\tconst bbox = el.getBoundingClientRect();\r\n\t\tconst x = e.clientX - bbox.left;\r\n\t\tconst y = e.clientY - bbox.top;\r\n\r\n\t\tconst newX = this.state.x - (this.state.offset.x - x);\r\n\t\tconst newY = this.state.y - (this.state.offset.y - y);\r\n\t\t\r\n\t\tif (this.state.currentMove) {\r\n\t\t\t\r\n\t\t\t// we might pass this local state since we use redux\r\n\t\t\tthis.setState({\r\n\t\t\t\tx: newX < 0 ? 0 : newX,\r\n\t\t\t\ty: newY < 0 ? 0 : newY\r\n\t\t\t});\r\n\r\n\t\t\t// Update the position of the current shape in the redux\r\n\t\t\tthis.props.updateShapePositionAction(\r\n\t\t\t\tthis.props.currentShape.timestamp,\r\n\t\t\t\tnewX < 0 ? 0 : newX,\r\n\t\t\t\tnewY < 0 ? 0 : newY\r\n\t\t\t\t//this.state.x,\r\n\t\t\t\t//this.state.y\r\n\t\t\t);\r\n\r\n\t\t\t// If the current shape moved and is not the active shape\r\n\t\t\t// Then we'll remove the active shape (after a certain threshold of the manhattan distance).\r\n\t\t\tif(\r\n\t\t\t\tthis.props.shapes.sourceShape &&\r\n\t\t\t\tthis.props.shapes.sourceShape.timestamp !== this.props.currentShape.timestamp &&\r\n\t\t\t\tMath.abs(manhattanDistance(this.state.x, this.state.y, this.state.historyX, this.state.historyY)) > 10\r\n\t\t\t) {\r\n\t\t\t\tthis.props.editActiveShape(\r\n\t\t\t\t\t-1\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandlePointerUp = () => {\r\n\t\tthis.setState({\r\n\t\t\tcurrentMove: false\r\n\t\t});\r\n\r\n\t\t// If the user just clicked on a shape without moving it, then we'll select it\r\n\t\t// And since the position is so sensitive, we'll check if the distance between\r\n\t\t// the position when we start clicked on the shape and when we stopped moving it\r\n\t\t// is |distance| < 5 in manhattan distance ( which is the cheaper to calculate )\r\n\t\t\r\n\t\tif(Math.abs(manhattanDistance(this.state.x, this.state.y, this.state.historyX, this.state.historyY)) < 6)\r\n\t\t{\r\n\t\t\t// Once we updated the active shape, to avoid mouse glitching,\r\n\t\t\t// we'll set the location of the mouse position to be the active shape\r\n\t\t\t\r\n\t\t\tthis.props.updateMouseLocation(\r\n\t\t\t\tthis.state.x + this.props.currentShape.centerPosition[this.props.config.designTemplate][0],\r\n\t\t\t\tthis.state.y + this.props.currentShape.centerPosition[this.props.config.designTemplate][1]\r\n\t\t\t);\r\n\r\n\t\t\t// Once we confirmed that the shape didn't move ( in our distance definition ),\r\n\t\t\t// We'll check if the currentShape isn't equal the active shape and check if we should draw a line between\r\n\t\t\t// the target shape and the current one\r\n\r\n\t\t\t// 1. Checking if targetShape exists and edge case\r\n\t\t\t// where the source Shape equals to the current Shape\r\n\t\t\tif(this.props.shapes.sourceShape && this.props.shapes.sourceShape.timestamp !== this.props.currentShape.timestamp)\r\n\t\t\t{\t\r\n\t\t\t\t// Then, we'll make sure there isn't an arrow already between source and target\r\n\t\t\t\t// We can check it in the connected list of the source shape\r\n\t\t\t\t\r\n\t\t\t\tconst getSourceShape = this.props.shapes.sourceShape;\r\n\r\n\t\t\t\t// Complexity: O(|Shapes|)\r\n\t\t\t\t//const getTargetShape = this.props.shapes.shapes.find(s => s.timestamp === this.props.currentShape.timestamp);\r\n\r\n\t\t\t\t// Complexity: O(1)\r\n\t\t\t\t\r\n\t\t\t\t// isValid also creates a toast if it doesn't successed.\r\n\t\t\t\tif(isValidArrow(getSourceShape, this.props.currentShape, this.props.shapes.arrows, this.props.addToast))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.addArrowAndUpdateConnections(getSourceShape, this.props.currentShape);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*if(this.props.shapes.sourceShape.connectedTo.filter(s => s.timestamp === this.props.currentShape.timestamp).length === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\t// If we got this far, we'll draw an arrow between source and target shapes\r\n\r\n\t\t\t\t\tconst getSourceShape = this.props.shapes.sourceShape;\r\n\t\t\t\t\tconst getTargetShape = this.props.shapes.shapes.find(s => s.timestamp === this.props.currentShape.timestamp);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.props.addArrowAndUpdateConnections(new Date().getTime(), getSourceShape, getTargetShape!);\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\r\n\t\t\t// Sets the current shape as the active shape\r\n\t\t\tthis.props.editActiveShape(\r\n\t\t\t\tthis.props.currentShape.timestamp\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\t// Edge case: if we change the shape location from the Details Bar,\r\n\t// it means that the current shape is the sourceShape,\r\n\t// to avoid cases where we need to choose between sourceShape and this state\r\n\r\n\t// we'll simply use this.props.currentShape to display the shape location\r\n\tpublic render() {\r\n\r\n\t\treturn (\r\n\t\t\t<svg \r\n\t\t\t\tclassName=\"draggableSVG\"\r\n\t\t\t\tx={this.props.currentShape.x}\r\n\t\t\t\ty={this.props.currentShape.y}\r\n\t\t\t\tonPointerDown={this.handlePointerDown}\r\n\t\t\t\tonPointerUp={this.handlePointerUp}\r\n\t\t\t\tonPointerMove={this.handlePointerMove}>\r\n\t\t\t\t\t{this.props.children}\r\n\t\t\t</svg>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n\tshapes: state.shapes,\r\n\ttoasts: state.toasts,\r\n\tconfig: state.config\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ \r\n\t\teditActiveShape, \r\n\t\tupdateShapePositionAction, \r\n\t\taddArrowAndUpdateConnections, \r\n\t\tupdateMouseLocation,\r\n\t\taddToast\r\n\t}\r\n)(DraggableSVG);","import { addToast } from \"../store/toasts/actions\";\r\nimport ArrowMap from \"../interfaces/arrowMap\";\r\nimport Input from \"../components/DiagramContainer/Shapes/Input\";\r\nimport Output from \"../components/DiagramContainer/Shapes/Output\";\r\nimport Concatenate from \"../components/DiagramContainer/Shapes/Concatenate\";\r\nimport Addition from \"../components/DiagramContainer/Shapes/Addition\";\r\nimport { Shape } from \"../interfaces/IShape\";\r\n\r\nexport const isValidArrow = (\r\n\tsourceShape: Shape,\r\n\ttargetShape: Shape, \r\n\tarrows: ArrowMap,\r\n\taddNotifcation: typeof addToast) : boolean =>\r\n{\r\n\t\r\n\t// Check if there is opposite arrow already\r\n\tif(arrows.has([targetShape, sourceShape])) {\r\n\t\taddNotifcation(\"Illegal Arrow Drawing\", `Cannot draw bidirectional arrow. \r\n\t\tSeems like you already have an arrow on the opposite side.`);\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Note: targetShape.shape is not a new instance of Input for example, but the class Input itself.\r\n\t// Hence, it won't be true to check if it's \"instanceof\" Input, but equals.\r\n\tif(targetShape.shape === Input) {\r\n\t\taddNotifcation(\"Illegal Arrow Drawing\", `Cannot draw arrow to Input layer.`);\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// No more than one arrow can be connected to a Shape except Concat and Add.\r\n\tif(\r\n\t\ttargetShape.shape !== Concatenate &&\r\n\t\ttargetShape.shape !== Addition &&\r\n\t\tarrows.getConnectedToMeCount(targetShape) > 0) {\r\n\t\t\r\n\t\t\taddNotifcation(\"Illegal Arrow Drawing\", `Please use Concatenate or Addition layer if you \r\n\t\twant to multiple arrows to the same layer.`);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif(sourceShape.shape === Output) {\r\n\t\taddNotifcation(\"Illegal Arrow Drawing\", `Cannot draw arrows from Output layer.`);\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n}","import * as React from 'react';\r\nimport { AppState } from '../../store';\r\nimport { connect } from 'react-redux';\r\nimport { ShapeState } from '../../store/shapes/types';\r\nimport { ConfigState } from '../../store/config/types';\r\nimport { Shape } from '../../interfaces/IShape';\r\nimport { TEMPLATE_FILLED } from '../../interfaces/designTemplates';\r\nimport FullyConnected, { abstractTemplateStyle } from './Shapes/FullyConnected';\r\nimport { AllActivationFunctions, ACTIVATION_NONE } from '../../interfaces/activations';\r\nimport { fixedDistanceFromPolygon } from '../../utils/distance';\r\n\r\nexport interface IArrowsProps {\r\n\tshapes: ShapeState;\r\n\tconfig: ConfigState;\r\n\thandleArrowClick: (source: Shape, target: Shape) => void\r\n}\r\nclass Arrows extends React.Component<IArrowsProps> {\r\n\r\n\tfilledArrow = (sourceShape: Shape, targetShape: Shape, x1: number, y1: number, x2: number, y2:number) => {\r\n\r\n\t\tconst xMid = (x1 + x2) / 2;\r\n\t\tconst yMid = (y1 + y2) / 2;\r\n\r\n\t\treturn (\r\n\t\t\t<polyline \r\n\t\t\t\tkey={sourceShape.timestamp + \" \" + targetShape.timestamp}\r\n\t\t\t\tmarkerMid=\"url(#arrow)\"\r\n\t\t\t\tpoints={`${x1},${y1} ${xMid},${yMid} ${x2},${y2}`}\r\n\t\t\t\tfill=\"none\"\r\n\t\t\t\tstroke=\"black\"\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tabstractArrow = (sourceShape: Shape, targetShape: Shape, x1: number, y1: number, x2: number, y2: number, activationFunction: AllActivationFunctions) => {\r\n\r\n\t\tconst isActiveArrow = this.props.shapes.sourceArrow &&\r\n\t\t\tthis.props.shapes.sourceArrow.source.timestamp === sourceShape.timestamp &&\r\n\t\t\tthis.props.shapes.sourceArrow.target.timestamp === targetShape.timestamp;\r\n\r\n\t\t\r\n\t\tconst xMid = (x1 + x2) / 2;\r\n\t\tconst yMid = (y1 + y2) / 2;\r\n\r\n\t\tlet xText, yText;\r\n\t\tif(activationFunction !== ACTIVATION_NONE) {\r\n\t\t\tconst d = 12 + activationFunction.length * 2;\r\n\r\n\t\t\t[xText, yText] = fixedDistanceFromPolygon(d, xMid, yMid, x2, y2, true);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<polyline \r\n\t\t\t\t\tkey={sourceShape.timestamp + \" \" + targetShape.timestamp}\r\n\t\t\t\t\tmarkerEnd={\"url(#\"+(!isActiveArrow ? \"bigArrow\" : \"bigArrowActive\")+\")\"}\r\n\t\t\t\t\tpoints={`${x1},${y1} ${x2},${y2}`}\r\n\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\tstroke={!isActiveArrow ? \"#7788b0\" : \"red\"}\r\n\t\t\t\t\tstrokeWidth=\"4\"\r\n\t\t\t\t\tonClick={() => this.props.handleArrowClick(sourceShape, targetShape)}\r\n\t\t\t\t/>\r\n\t\t\t\t{activationFunction !== ACTIVATION_NONE && <text\r\n\t\t\t\t\tx={xText}\r\n\t\t\t\t\ty={yText}\r\n\t\t\t\t\talignmentBaseline=\"middle\" \r\n\t\t\t\t\ttextAnchor=\"middle\" \r\n\t\t\t\t\tfontSize=\"12px\"\r\n\t\t\t\t\tfontWeight=\"bold\"\r\n\t\t\t\t>{activationFunction}</text>}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tfullyConnectedArrows = (sourceShape: Shape, targetShape: Shape, x1: number, y1: number, x2: number, y2:number, activationFunction: AllActivationFunctions) => {\r\n\t\tconst arr1 = new Array(sourceShape.additionalInfo!.nodesCount).fill(0);\r\n\t\tconst arr2 = new Array(targetShape.additionalInfo!.nodesCount).fill(0);\r\n\r\n\t\tconst midArr1 = Math.abs((arr1.length-1) / 2);\r\n\t\tconst midArr2 = Math.abs((arr2.length-1) / 2);\r\n\r\n\t\tconst polyPoints: number[][] = [];\r\n\r\n\t\tconst isActiveArrow = this.props.shapes.sourceArrow &&\r\n\t\t\tthis.props.shapes.sourceArrow.source.timestamp === sourceShape.timestamp &&\r\n\t\t\tthis.props.shapes.sourceArrow.target.timestamp === targetShape.timestamp;\r\n\r\n\t\t\r\n\t\tlet xText:number = 0, yText:number = 0;\r\n\r\n\t\t//const x3 = x2 + \r\n\t\treturn (\r\n\t\t<React.Fragment>\r\n\t\t{\r\n\t\t\tarr1.map((_,i) => arr2.map((_, j) => {\r\n\t\t\t\tif(i === midArr1 || j === midArr2)\r\n\t\t\t\t\treturn null;\r\n\r\n\t\t\t\tlet sX: number, sY: number, tX: number, tY: number;\r\n\t\t\t\t\r\n\t\t\t\t// The Source FC is in the left side of the Target FC\r\n\t\t\t\tif(x1 < x2) {\r\n\t\t\t\t\tsX = x1 + abstractTemplateStyle.offset + abstractTemplateStyle.width;\r\n\t\t\t\t\tsY = y1 + abstractTemplateStyle.offset + abstractTemplateStyle.width/2 + (abstractTemplateStyle.width + abstractTemplateStyle.offset) * (i);\r\n\r\n\t\t\t\t\ttX = x2 - 3;\r\n\t\t\t\t\ttY = y2 + abstractTemplateStyle.offset + abstractTemplateStyle.width/2 + (abstractTemplateStyle.width + abstractTemplateStyle.offset) * (j);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsX = x1 + 1;\r\n\t\t\t\t\tsY = y1 + abstractTemplateStyle.offset + abstractTemplateStyle.width/2 + (abstractTemplateStyle.width + abstractTemplateStyle.offset) * (i);\r\n\r\n\t\t\t\t\ttX = x2 + abstractTemplateStyle.offset + abstractTemplateStyle.width + 3;\r\n\t\t\t\t\ttY = y2 + abstractTemplateStyle.offset + abstractTemplateStyle.width/2 + (abstractTemplateStyle.width + abstractTemplateStyle.offset) * (j);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If it's the last iteration or last iteration:\r\n\t\t\t\t// We'll add that points to polyPoints,\r\n\t\t\t\t// So we could make a structure from it later on.\r\n\r\n\t\t\t\tif(i === 0 && j === 0) {\r\n\t\t\t\t\tpolyPoints.push([sX, sY], [tX, tY]);\r\n\t\t\t\t}\r\n\t\t\t\telse if(i === arr1.length-1 && j === arr2.length-1) {\r\n\t\t\t\t\tpolyPoints.push([tX, tY], [sX, sY]);\r\n\r\n\t\t\t\t\tif(activationFunction !== ACTIVATION_NONE) {\r\n\t\t\t\t\t\tconst xMid = (tX + sX) / 2;\r\n\t\t\t\t\t\tconst yMid = (tY + sY) / 2;\r\n\r\n\t\t\t\t\t\tconst d = 12 + activationFunction.length * 2;\r\n\t\t\t\t\t\t[xText, yText] = fixedDistanceFromPolygon(d, xMid, yMid, sX, sY);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<polyline \r\n\t\t\t\t\t\tkey={sourceShape.timestamp + \" \" + targetShape.timestamp + \" \" + i + \" \" + j}\r\n\t\t\t\t\t\tmarkerEnd=\"url(#smallArrow)\"\r\n\t\t\t\t\t\tpoints={`${sX},${sY} ${tX},${tY}`}\r\n\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\tstroke={!isActiveArrow ? \"rgba(0,0,0,.2)\" : \"red\"}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t}))\r\n\t\t}\r\n\t\t<polyline \r\n\t\t\tpoints={polyPoints.map(p => p.join(',')).join(' ')}\r\n\t\t\tfill=\"transparent\"\r\n\t\t\tstroke=\"none\"\r\n\t\t\tonClick={() => this.props.handleArrowClick(sourceShape, targetShape)}\r\n\t\t/>\r\n\t\t{activationFunction !== ACTIVATION_NONE && <text\r\n\t\t\tx={xText}\r\n\t\t\ty={yText}\r\n\t\t\talignmentBaseline=\"middle\" \r\n\t\t\ttextAnchor=\"middle\" \r\n\t\t\tfontSize=\"12px\"\r\n\t\t\tfontWeight=\"bold\"\r\n\t\t\t>{activationFunction}</text>}\r\n\t\t</React.Fragment>);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t{\r\n\t\t\t//Array.from(this.props.shapes.arrows.entries()).map((entry) => {\r\n\t\t\tthis.props.shapes.arrows.getList().map((entry) => {\r\n\t\t\t\tconst [sourceShape, targetShape, activationFunction] = entry;\r\n\t\t\t\t\r\n\t\t\t\tconst x1 = sourceShape.x;\r\n\t\t\t\tconst x2 = targetShape.x;\r\n\r\n\t\t\t\tconst y1 = sourceShape.y;\r\n\t\t\t\tconst y2 = targetShape.y;\r\n\r\n\t\t\t\tif(this.props.config.designTemplate === TEMPLATE_FILLED) {\r\n\t\t\t\t\treturn this.filledArrow(\r\n\t\t\t\t\t\tsourceShape,\r\n\t\t\t\t\t\ttargetShape,\r\n\t\t\t\t\t\tx1 + sourceShape.centerPosition[this.props.config.designTemplate][0],\r\n\t\t\t\t\t\ty1 + sourceShape.centerPosition[this.props.config.designTemplate][1],\r\n\t\t\t\t\t\tx2 + targetShape.centerPosition[this.props.config.designTemplate][0],\r\n\t\t\t\t\t\ty2 + targetShape.centerPosition[this.props.config.designTemplate][1]\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif(sourceShape.shape === FullyConnected && targetShape.shape === FullyConnected) {\r\n\t\t\t\t\t\treturn this.fullyConnectedArrows(sourceShape, targetShape, x1, y1, x2, y2, activationFunction);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treturn this.abstractArrow(\r\n\t\t\t\t\t\t\tsourceShape,\r\n\t\t\t\t\t\t\ttargetShape,\r\n\t\t\t\t\t\t\tx1 + sourceShape.centerPosition[this.props.config.designTemplate][0],\r\n\t\t\t\t\t\t\ty1 + sourceShape.centerPosition[this.props.config.designTemplate][1],\r\n\t\t\t\t\t\t\tx2 - 3,\r\n\t\t\t\t\t\t\ty2 + targetShape.centerPosition[this.props.config.designTemplate][1],\r\n\t\t\t\t\t\t\tactivationFunction\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n\tshapes: state.shapes,\r\n\tconfig: state.config\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps\r\n)(Arrows);","import * as React from 'react';\r\n\r\nconst Defs: React.FunctionComponent<{}> = (props) => {\r\n\treturn (\r\n\t\t<defs>\t\r\n\t\t<marker orient='auto' id=\"arrow\" refX=\"0\" refY=\"7\"\r\n\t\t\tmarkerWidth=\"80\" markerHeight=\"80\">\r\n\t\t\t<polygon\r\n\t\t\t\t\tpoints=\"2,7 0,0 11,7 0,14\"\r\n\t\t\t\t\tstroke=\"red\"\r\n\t\t\t\t\tfill=\"red\" \r\n\t\t\t\t/>\r\n\t\t</marker>\r\n\r\n\t\t<marker orient='auto' id=\"bigArrow\" refX=\"2.5\" refY=\"2.2\"\r\n\t\t\tmarkerWidth=\"80\" markerHeight=\"80\">\r\n\t\t\t<polygon\r\n\t\t\t\t\tpoints=\"2,7 0,0 11,7 0,14\"\r\n\t\t\t\t\tstroke=\"#7788b0\"\r\n\t\t\t\t\tfill=\"#7788b0\"\r\n\t\t\t\t\ttransform=\"scale(0.3)\"\r\n\t\t\t\t/>\r\n\t\t</marker>\r\n\r\n\t\t<marker orient='auto' id=\"bigArrowActive\" refX=\"2.5\" refY=\"2.2\"\r\n\t\t\tmarkerWidth=\"80\" markerHeight=\"80\">\r\n\t\t\t<polygon\r\n\t\t\t\t\tpoints=\"2,7 0,0 11,7 0,14\"\r\n\t\t\t\t\tstroke=\"red\"\r\n\t\t\t\t\tfill=\"red\"\r\n\t\t\t\t\ttransform=\"scale(0.3)\"\r\n\t\t\t\t/>\r\n\t\t</marker>\r\n\r\n\t\t<marker orient='auto' id=\"smallArrow\" refX=\"1\" refY=\"4\"\r\n\t\t\tmarkerWidth=\"20\" markerHeight=\"20\">\r\n\t\t\t<polygon\r\n\t\t\t\t\tpoints=\"2,7 0,0 11,7 0,14\"\r\n\t\t\t\t\tstroke=\"#909da6\"\r\n\t\t\t\t\tfill=\"#909da6\"\r\n\t\t\t\t\ttransform=\"scale(0.5)\"\r\n\t\t\t\t/>\r\n\t\t</marker>\r\n\t</defs>\t\r\n\t);\r\n};\r\n\r\nexport default Defs;\r\n","import * as React from 'react';\r\nimport './diagram.scss';\r\n\r\nimport DraggableSVG from \"./DraggableSVG\";\r\n\r\nimport { editActiveShape, setShapes, editActiveArrow, deleteShape, deleteArrow } from '../../store/shapes/actions';\r\nimport { updateSVGRef } from \"../../store/config/actions\";\r\nimport { addToast } from \"../../store/toasts/actions\";\r\nimport { updateMouseLocation } from '../../store/mouse/actions';\r\nimport { ShapeState } from '../../store/shapes/types';\r\nimport { connect } from 'react-redux';\r\nimport { AppState } from '../../store';\r\nimport Arrows from './Arrows';\r\nimport { MouseState } from '../../store/mouse/types';\r\nimport { seedInitShapes } from '../../utils/seedShapes';\r\nimport { ConfigState } from '../../store/config/types';\r\nimport { Shape } from '../../interfaces/IShape';\r\nimport Defs from './Defs';\r\nimport Input from './Shapes/Input';\r\nimport Output from './Shapes/Output';\r\n\r\ninterface MouseLocation {\r\n\tnativeEvent: {\r\n\t\toffsetX: number;\r\n\t\toffsetY: number;\r\n\t};\r\n}\r\n\r\nexport interface IDiagramContainerProps {\r\n\tshapes: ShapeState;\r\n\tmouse: MouseState;\r\n\tconfig: ConfigState;\r\n\teditActiveShape: typeof editActiveShape;\r\n\tupdateMouseLocation: typeof updateMouseLocation;\r\n\tsetShapes: typeof setShapes;\r\n\teditActiveArrow: typeof editActiveArrow;\r\n\tdeleteShape: typeof deleteShape;\r\n\tdeleteArrow: typeof deleteArrow;\r\n\taddToast: typeof addToast;\r\n\tupdateSVGRef: typeof updateSVGRef;\r\n}\r\n\r\nexport interface IDiagramContainerState {\r\n\t//arrowX?: number;\r\n\t//arrowY?: number;\r\n\tisMouseInsideSVG: boolean;\r\n}\r\n\r\nclass DiagramContainer extends React.PureComponent<IDiagramContainerProps, IDiagramContainerState> {\r\n\trefElement = React.createRef<SVGSVGElement>();\r\n\t\r\n\tstate = {\r\n\t\tisMouseInsideSVG: false\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.setShapes(seedInitShapes);\r\n\t\tthis.props.updateSVGRef(this.refElement.current!);\r\n\t}\r\n\r\n\thandleArrowClick = (source: Shape, target: Shape) => {\r\n\t\t// We'll remove the active shape ( it also remove the active arrow )\r\n\t\tthis.props.editActiveShape(-1);\r\n\r\n\t\t// We'll reassign to the new Arrow\r\n\t\tthis.props.editActiveArrow(source, target);\r\n\t}\r\n\r\n\thandleClick = (event : React.MouseEvent) => {\r\n\t\t// Checks if we clicked on the SVG element, but not any element inside.\r\n\t\tif (event.currentTarget === event.target) {\r\n\t\t\t// If that's the case, we'll remove the \"active\" from any shape\r\n\t\t\tthis.props.editActiveShape(-1);\r\n\t\t}\r\n\t}\r\n\r\n\thandlePointerMovement = (e: React.MouseEvent | MouseLocation) => {\r\n\t\tif(this.props.shapes.sourceShape)\r\n\t\t{\r\n\t\t\tconst x = e.nativeEvent.offsetX;\r\n\t\t\tconst y = e.nativeEvent.offsetY;\r\n\r\n\t\t\t/*this.setState({\r\n\t\t\t\tarrowX: x,\r\n\t\t\t\tarrowY: y\r\n\t\t\t});*/\r\n\r\n\t\t\tthis.props.updateMouseLocation(x, y);\r\n\r\n\t\t}\r\n\r\n\t\t// Edge case: when you click on close button of a Toast\r\n\t\t// the this.state.isMouseInsideSVG will be set as false\r\n\t\t// hence, if we moving the mouse inside the SVG again, we'll set it as true\r\n\t\t// it is pure component so no need to check if it's false\r\n\t\t// and anyway it will be re-rendered since we move the red line.\r\n\t\t\r\n\t\tthis.setState({isMouseInsideSVG: true});\r\n\t}\r\n\r\n\thandleRightClick = (event: React.MouseEvent) => {\r\n\t\t// Disable active shape if needed\r\n\t\tthis.handleClick(event);\r\n\t\t\r\n\t\t// Prevent default right click panel\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\thandleKeyDown = (event: React.KeyboardEvent<SVGSVGElement>) => {\r\n\t\t// If someone pressed Esc, we'll remove active shape ( also removes the active arrow )\r\n\t\tif(event.keyCode === 27) {\r\n\t\t\tthis.props.editActiveShape(-1);\r\n\t\t}\r\n\t\t// If someone preseed Delete, we'll remove the current arrow/shape.\r\n\t\telse if(event.keyCode === 46 || event.keyCode === 8) {\r\n\t\t\tif(this.props.shapes.sourceShape) {\r\n\r\n\t\t\t\t// Edge case: cannot remove Input/Output layers\r\n\t\t\t\tif(this.props.shapes.sourceShape.shape !== Input &&\r\n\t\t\t\t\tthis.props.shapes.sourceShape.shape !== Output) {\r\n\t\t\t\t\tthis.props.deleteShape();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.props.addToast(\"Removal Error\", `You cannot remove Input / Output layers.`)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.props.editActiveShape(-1);\r\n\r\n\t\t\t}\r\n\t\t\telse if(this.props.shapes.sourceArrow) {\r\n\t\t\t\tthis.props.deleteArrow();\r\n\t\t\t\tthis.props.editActiveShape(-1);\r\n\t\t\t}\r\n\r\n\t\t\t// Note: the reason that we made \"duplicate code\" by using\r\n\t\t\t// `this.props.editActiveShape(-1);` twice is because we don't want\r\n\t\t\t// to active this function every time that someone pressed on delete button.\r\n\t\t}\r\n\t}\r\n\r\n\thandleMouseLeave = () => {\r\n\t\tthis.setState({\r\n\t\t\tisMouseInsideSVG: false\r\n\t\t});\r\n\t}\r\n\r\n\thandleMouseEnter = () => {\r\n\t\tthis.setState({\r\n\t\t\tisMouseInsideSVG: true\r\n\t\t});\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<div className=\"diagram-container\">\r\n\t\t\t\t<svg width=\"100%\" height=\"100%\"\r\n\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\tonMouseMove={this.handlePointerMovement}\r\n\t\t\t\t\tonContextMenu={this.handleRightClick}\r\n\t\t\t\t\tonKeyDown={this.handleKeyDown}\r\n\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t\tonMouseEnter={this.handleMouseEnter}\r\n\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\tref={this.refElement}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Defs />\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.shapes.sourceShape && this.state.isMouseInsideSVG ?\r\n\t\t\t\t\t\t<line\r\n\t\t\t\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\t\t\t\tonContextMenu={this.handleRightClick}\r\n\t\t\t\t\t\t\tx1={this.props.shapes.sourceShape.x + this.props.shapes.sourceShape.centerPosition[this.props.config.designTemplate][0]}\r\n\t\t\t\t\t\t\ty1={this.props.shapes.sourceShape.y + this.props.shapes.sourceShape.centerPosition[this.props.config.designTemplate][1]}\r\n\t\t\t\t\t\t\tx2={this.props.mouse.xPointer}\r\n\t\t\t\t\t\t\ty2={this.props.mouse.yPointer}\r\n\t\t\t\t\t\t\tstyle={{stroke:\"rgb(255,0,0)\", strokeWidth:2}} />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t<Arrows handleArrowClick={this.handleArrowClick} />\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.props.shapes.shapes.map(shape => \r\n\t\t\t\t\t\t\t<DraggableSVG\r\n\t\t\t\t\t\t\t\tisMarked={this.props.shapes.sourceShape && shape.timestamp === this.props.shapes.sourceShape!.timestamp ? true : false}\r\n\t\t\t\t\t\t\t\tcurrentShape={shape}\r\n\t\t\t\t\t\t\t\tkey={shape.timestamp}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{React.createElement(shape.shape, {\r\n\t\t\t\t\t\t\t\t\tisMarked: this.props.shapes.sourceShape && shape.timestamp === this.props.shapes.sourceShape!.timestamp ? true : false,\r\n\t\t\t\t\t\t\t\t\tadditionalInfo: shape.additionalInfo,\r\n\t\t\t\t\t\t\t\t\ttemplateDesign: this.props.config.designTemplate\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</DraggableSVG>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</svg>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n\tshapes: state.shapes,\r\n\tmouse: state.mouse,\r\n\tconfig: state.config\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ editActiveShape, updateMouseLocation, setShapes, editActiveArrow, deleteShape, deleteArrow, addToast, updateSVGRef },\r\n\t\r\n)(DiagramContainer);","import FullyConnectedForm from \"./FullyConnectedForm\";\r\nimport ConvolutionalForm from \"./ConvolutionalForm\";\r\n\r\nexport type FormList =\r\n\ttypeof FullyConnectedForm |\r\n\ttypeof ConvolutionalForm;\r\n\r\n\r\nexport const formsMap: Record<string, FormList> = {\r\n\t\"FullyConnectedForm\": FullyConnectedForm,\r\n\t\"ConvolutionalForm\": ConvolutionalForm\r\n}","import * as React from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport { IFormProps } from './IFormProps';\r\n\r\nconst FullyConnectedForm: React.FunctionComponent<IFormProps> = (props) => {\r\n\t\r\n\treturn (\r\n\t<React.Fragment>\r\n\t\t<hr />\r\n\t\t<Form.Group>\r\n\t\t\t<Form.Label>Parameters</Form.Label>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Form.Label style={{fontSize: 12}}>Input<br />Dimension</Form.Label>\r\n\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\tvalue={props.shapeAdditionalInfo.inputDimension}\r\n\t\t\t\t\t\tonChange={(e:React.ChangeEvent<HTMLInputElement>) => props.handleParamaterChange(e, \"inputDimension\")}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\tbsPrefix={'form-control fixed-size'}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Form.Label style={{fontSize: 12}}>Output<br />Dimension</Form.Label>\r\n\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\tvalue={props.shapeAdditionalInfo.outputDimension}\r\n\t\t\t\t\t\tonChange={(e:React.ChangeEvent<HTMLInputElement>) => props.handleParamaterChange(e, \"outputDimension\")}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\tbsPrefix={'form-control fixed-size'}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Form.Group>\r\n\r\n\t\t<hr />\r\n\t\t<Form.Group>\r\n\t\t\t<Form.Label>Style</Form.Label>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Form.Label>Layers Size</Form.Label>\r\n\t\t\t\t\t<Form>\r\n\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\tcustom\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tlabel=\"Small size\"\r\n\t\t\t\t\t\tname=\"fcstyle\"\r\n\t\t\t\t\t\tid=\"fc-small\"\r\n\t\t\t\t\t\tonClick={() => props.handleParameterChangeByValue(5, \"nodesCount\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\tcustom\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tlabel=\"Medium size\"\r\n\t\t\t\t\t\tname=\"fcstyle\"\r\n\t\t\t\t\t\tid=\"fc-medium\"\r\n\t\t\t\t\t\tonClick={() => props.handleParameterChangeByValue(7, \"nodesCount\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\tcustom\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tlabel=\"Large size\"\r\n\t\t\t\t\t\tname=\"fcstyle\"\r\n\t\t\t\t\t\tid=\"fc-large\"\r\n\t\t\t\t\t\tonClick={() => props.handleParameterChangeByValue(9, \"nodesCount\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Form.Group>\r\n\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default FullyConnectedForm;\r\n","import * as React from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport { IFormProps } from './IFormProps';\r\n\r\nconst FullyConnectedForm: React.FunctionComponent<IFormProps> = (props) => {\r\n\t\r\n\treturn (\r\n\t<React.Fragment>\r\n\t\t<hr />\r\n\t\t<Form.Group>\r\n\t\t\t<Form.Label>Parameters</Form.Label>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Form.Label style={{fontSize: 12}}>In<br />Channels</Form.Label>\r\n\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\tvalue={props.shapeAdditionalInfo.inChannels}\r\n\t\t\t\t\t\tonChange={(e:React.ChangeEvent<HTMLInputElement>) => props.handleParamaterChange(e, \"inChannels\")}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\tbsPrefix={'form-control fixed-size'}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Form.Label style={{fontSize: 12}}>Out<br />Channels</Form.Label>\r\n\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\tvalue={props.shapeAdditionalInfo.outChannels}\r\n\t\t\t\t\t\tonChange={(e:React.ChangeEvent<HTMLInputElement>) => props.handleParamaterChange(e, \"outChannels\")}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\tbsPrefix={'form-control fixed-size'}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Form.Label style={{fontSize: 12}}>Kernel Size</Form.Label>\r\n\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\tvalue={props.shapeAdditionalInfo.kernelSize}\r\n\t\t\t\t\t\tonChange={(e:React.ChangeEvent<HTMLInputElement>) => props.handleParamaterChange(e, \"kernelSize\")}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\tbsPrefix={'form-control fixed-size'}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<Form.Label style={{fontSize: 12}}>Stride</Form.Label>\r\n\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\tvalue={props.shapeAdditionalInfo.stride}\r\n\t\t\t\t\t\tonChange={(e:React.ChangeEvent<HTMLInputElement>) => props.handleParamaterChange(e, \"stride\")}\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\tbsPrefix={'form-control fixed-size'}\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</Form.Group>\r\n\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default FullyConnectedForm;\r\n","import * as React from 'react';\r\nimport './detailsbar.scss';\r\n//import Button from \"react-bootstrap/Button\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\n//import Card from \"react-bootstrap/Card\";\r\nimport Accordion from \"react-bootstrap/Accordion\";\r\nimport { connect } from 'react-redux';\r\nimport { AppState } from '../../store';\r\nimport { ShapeState } from '../../store/shapes/types';\r\nimport { \r\n\teditShapeName,\r\n\tupdateShapePositionAction, \r\n\tupdateShapeDescription,\r\n\tsetShapeAdditionalInfo,\r\n\teditActivationFunction\r\n} from '../../store/shapes/actions';\r\nimport { formsMap } from './Forms/FormList';\r\nimport { ACTIVATION_NONE, ACTIVATION_RELU, ACTIVATION_TANH, ACTIVATION_SIGMOID, AllActivationFunctions } from '../../interfaces/activations';\r\n\r\n\r\ninterface IDetailsBarProps {\r\n\tshapes: ShapeState;\r\n\teditShapeName: typeof editShapeName;\r\n\tupdateShapePositionAction: typeof updateShapePositionAction;\r\n\tupdateShapeDescription: typeof updateShapeDescription;\r\n\tsetShapeAdditionalInfo: typeof setShapeAdditionalInfo;\r\n\teditActivationFunction: typeof editActivationFunction;\r\n}\r\n\r\ninterface IDetailsBarState {\r\n}\r\n\r\nclass DetailsBar extends React.Component<IDetailsBarProps, IDetailsBarState> {\r\n\r\n\thandleParamaterChange = (event: React.ChangeEvent<HTMLInputElement>, key: string) => {\r\n\t\tconst value = +event.target.value;\r\n\t\tthis.props.setShapeAdditionalInfo(\r\n\t\t\tthis.props.shapes.sourceShape!.timestamp,\r\n\t\t\tkey,\r\n\t\t\tvalue\t\r\n\t\t);\r\n\t}\r\n\r\n\thandleArrowActivationChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n\t\tconst activation = event.target.value as AllActivationFunctions;\r\n\t\tthis.props.editActivationFunction(activation);\r\n\t}\r\n\r\n\thandleParameterChangeByValue = (value: number, key: string) => {\r\n\t\tthis.props.setShapeAdditionalInfo(\r\n\t\t\tthis.props.shapes.sourceShape!.timestamp,\r\n\t\t\tkey,\r\n\t\t\tvalue\t\r\n\t\t);\r\n\t}\r\n\t\r\n\thandleChangeName = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tthis.props.editShapeName(this.props.shapes.sourceShape!.timestamp, event.target.value);\r\n\t}\r\n\r\n\thandleChangePosition = (event: React.ChangeEvent<HTMLInputElement>, axisToChange : number) => {\r\n\t\tconst value = +event.target.value;\r\n\r\n\t\t// Change X Axis\r\n\t\tif(axisToChange === 0) {\r\n\t\t\tthis.props.updateShapePositionAction(\r\n\t\t\t\tthis.props.shapes.sourceShape!.timestamp,\r\n\t\t\t\tvalue > 0 ? value : 0,\r\n\t\t\t\tthis.props.shapes.sourceShape!.y\r\n\t\t\t);\r\n\t\t}\r\n\t\t// Change Y Axis\r\n\t\telse {\r\n\t\t\tthis.props.updateShapePositionAction(\r\n\t\t\t\tthis.props.shapes.sourceShape!.timestamp,\r\n\t\t\t\tthis.props.shapes.sourceShape!.x,\r\n\t\t\t\tvalue > 0 ? value : 0\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\thandleDescriptionChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tthis.props.updateShapeDescription(\r\n\t\t\tthis.props.shapes.sourceShape!.timestamp,\r\n\t\t\tevent.target.value\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.props.shapes.sourceShape)\r\n\t\t{\r\n\t\t\tconst shape = this.props.shapes.sourceShape;\r\n\r\n\t\t\tlet parameters: JSX.Element | undefined = undefined;\r\n\r\n\t\t\tif(formsMap[shape.shape.name + \"Form\"]) {\r\n\t\t\t\tparameters = React.createElement(formsMap[shape.shape.name + \"Form\"], {\r\n\t\t\t\t\thandleParamaterChange: this.handleParamaterChange,\r\n\t\t\t\t\thandleParameterChangeByValue: this.handleParameterChangeByValue,\r\n\t\t\t\t\tshapeAdditionalInfo: shape.additionalInfo!\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn <aside className=\"component-info\">\r\n\t\t\t\t<h6 style={{textAlign: \"center\"}}>Layer Properties</h6>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Form.Group controlId=\"layerName\">\r\n\t\t\t\t\t<Form.Label>Layer name</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Layer Name\"\r\n\t\t\t\t\t\tvalue={shape.name}\r\n\t\t\t\t\t\tonChange={this.handleChangeName} />\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t{parameters}\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Form.Group>\r\n\t\t\t\t\t<Form.Label>Layer Position</Form.Label>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col style={{paddingRight: \"3px\"}}>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tstep=\"5\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"X\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tbsPrefix={'form-control fixed-size'}\r\n\t\t\t\t\t\t\t\tvalue={shape.x}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => this.handleChangePosition(e, 0)} />\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col style={{paddingLeft: \"3px\"}}>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tstep=\"5\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Y\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tbsPrefix={'form-control fixed-size'}\r\n\t\t\t\t\t\t\t\tvalue={shape.y}\r\n\t\t\t\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => this.handleChangePosition(e, 1)} \r\n\t\t\t\t\t\t\t\t />\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId=\"description\">\r\n\t\t\t\t\t{/*\r\n\t\t\t\t\t\tNote: There's a warning when openning the Accordion.Toggle:\r\n\t\t\t\t\t\t\"Warning: findDOMNode is deprecated in StrictMode\"\r\n\r\n\t\t\t\t\t\tit is known issue in react-bootstrap package:\r\n\t\t\t\t\t\thttps://github.com/react-bootstrap/react-bootstrap/issues/5075\r\n\r\n\t\t\t\t\t\tAnd will be fixed.\r\n\t\t\t\t\t*/}\r\n\t\t\t\t\t<Accordion defaultActiveKey={shape.description ? '1' : '0'}>\r\n\t\t\t\t\t\t<Accordion.Toggle as={Form.Label} eventKey=\"1\" id=\"basic-nav-dropdown\">\t\t\t\t\r\n\t\t\t\t\t\t\tDescription <span className=\"dropdown-icon\"></span>\r\n\t\t\t\t\t\t</Accordion.Toggle>\r\n\t\t\t\t\t\t<Accordion.Collapse eventKey=\"1\">\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\t\t\t\tonChange={this.handleDescriptionChange}\r\n\t\t\t\t\t\t\t\tvalue={shape.description ? shape.description : \"\"} />\r\n\t\t\t\t\t\t</Accordion.Collapse>\r\n\t\t\t\t\t</Accordion>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t</aside>;\r\n\t\t}\r\n\t\telse if(this.props.shapes.sourceArrow)\r\n\t\t{\r\n\t\t\tconst getArrowActivation = this.props.shapes.arrows.get(\r\n\t\t\t\t[this.props.shapes.sourceArrow.source,\r\n\t\t\t\tthis.props.shapes.sourceArrow.target]\r\n\t\t\t)!;\r\n\r\n\t\t\treturn <aside className=\"component-info\">\r\n\t\t\t\t<h6 style={{textAlign: \"center\"}}>Arrow Properties</h6>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<Form.Group controlId=\"activation-function\">\r\n\t\t\t\t\t<Form.Label>Activation Function</Form.Label>\r\n\t\t\t\t\t<Form.Control \r\n\t\t\t\t\t\tvalue={getArrowActivation} \r\n\t\t\t\t\t\tas=\"select\" \r\n\t\t\t\t\t\tstyle={{paddingRight: \"10px\"}}\r\n\t\t\t\t\t\tonChange={this.handleArrowActivationChange}> \r\n\r\n\t\t\t\t\t\t<option \r\n\t\t\t\t\t\t\tvalue={ACTIVATION_NONE}>None</option>\r\n\t\t\t\t\t\t<option \r\n\t\t\t\t\t\t\tvalue={ACTIVATION_SIGMOID}>Sigmoid</option>\r\n\t\t\t\t\t\t<option \r\n\t\t\t\t\t\t\tvalue={ACTIVATION_RELU}>ReLU</option>\r\n\t\t\t\t\t\t<option \r\n\t\t\t\t\t\t\tvalue={ACTIVATION_TANH}>Tanh</option>\r\n\t\t\t\t\t</Form.Control>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t</aside>\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn null;\r\n\t}\r\n};\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n\tshapes: state.shapes\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ editShapeName, updateShapePositionAction, updateShapeDescription, setShapeAdditionalInfo,\r\n\t\teditActivationFunction }\r\n)(DetailsBar);\r\n","import * as React from 'react';\r\nimport Toast from 'react-bootstrap/Toast';\r\nimport { addToast, removeToast } from '../../store/toasts/actions';\r\nimport { connect } from 'react-redux';\r\nimport { AppState } from '../../store';\r\nimport { timeSince } from '../../utils/time';\r\nimport { ToastsState } from '../../store/toasts/types';\r\n\r\nexport interface IToastsProps {\r\n\ttoasts: ToastsState,\r\n\taddToast: typeof addToast,\r\n\tremoveToast: typeof removeToast\r\n}\r\n\r\nconst delay_time = 3000; // in miliseconds\r\nclass Toasts extends React.Component<IToastsProps> {\r\n\r\n\thandleNotificationRemoval = (timestamp: number) => {\r\n\t\tthis.props.removeToast(timestamp);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\tconst nowTime = new Date().getTime() + delay_time;\r\n\r\n\t\treturn (\r\n\t\t<div\r\n\t\taria-live=\"polite\"\r\n\t\taria-atomic=\"true\"\r\n\t\tstyle={{\r\n\t\t\tposition: 'fixed',\r\n\t\t\tzIndex: 999,\r\n\t\t\tbottom: 20,\r\n\t\t\tleft: 15\r\n\t\t}}\r\n\t\t>\r\n\t\t\t{\r\n\t\t\t\tthis.props.toasts.notifications.map(notification => (\r\n\t\t\t\t\t<Toast\r\n\t\t\t\t\t\tkey={notification.timestamp}\r\n\t\t\t\t\t\tonClose={() => this.handleNotificationRemoval(notification.timestamp)}\r\n\t\t\t\t\t\tshow={true}\r\n\t\t\t\t\t\tdelay={nowTime - notification.timestamp}\r\n\t\t\t\t\t\tautohide\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Toast.Header>\r\n\t\t\t\t\t\t\t<strong className=\"mr-auto\">{notification.title}</strong>\r\n\t\t\t\t\t\t\t<small>{timeSince(notification.timestamp)}</small>\r\n\t\t\t\t\t\t</Toast.Header>\r\n\t\t\t\t\t\t<Toast.Body>{notification.desc}</Toast.Body>\r\n\t\t\t\t\t</Toast>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/*\r\nconst mapStateToProps = (state: AppState) => ({\r\n\ttoasts: state.toasts.notifications\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ addToast, removeToast }\r\n)(Toasts);*/\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n\ttoasts: state.toasts\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\t{ addToast, removeToast }\r\n)(Toasts);","export function timeSince(timestamp: number) {\r\n\r\n\tconst seconds = Math.floor((new Date().getTime() - timestamp) / 1000);\r\n\tlet interval = Math.floor(seconds / 31536000);\r\n\r\n\tif (interval > 1) {\r\n\t\treturn interval + \" years\";\r\n\t}\r\n\t\r\n\tinterval = Math.floor(seconds / 2592000);\r\n\tif (interval > 1) {\r\n\t\treturn interval + \" months\";\r\n\t}\r\n\tinterval = Math.floor(seconds / 86400);\r\n\t\r\n\tif (interval > 1) {\r\n\t\treturn interval + \" days\";\r\n\t}\r\n\t\r\n\tinterval = Math.floor(seconds / 3600);\r\n\tif (interval > 1) {\r\n\t\treturn interval + \" hours\";\r\n\t}\r\n\t\r\n\tinterval = Math.floor(seconds / 60);\r\n\tif (interval > 1) {\r\n\t\treturn interval + \" minutes\";\r\n\t}\r\n\t\r\n\tif(seconds <= 7) {\r\n\t\treturn \"just now\";\r\n\t}\r\n\t\r\n\treturn Math.floor(seconds) + \" seconds\";\r\n}","import React from 'react';\n//import logo from './logo.svg';\nimport './App.scss';\n\n// Components\n\nimport ToolBar from \"./components/ToolBar\";\nimport SideBar from \"./components/SideBar\";\nimport DiagramContainer from \"./components/DiagramContainer\";\nimport DetailsBar from \"./components/DetailsBar\";\nimport Toasts from \"./components/Toasts\";\n\nfunction App() {\n\t\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<ToolBar />\n\t\t\t<SideBar />\n\t\t\t<DiagramContainer />\n\t\t\t<DetailsBar />\n\t\t\t<Toasts />\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import {\r\n\tShapeState,\r\n\tADD_SHAPE,\r\n\tDELETE_SHAPE,\r\n\tEDIT_SHAPE_ACTIVATION,\r\n\tUPDATE_SHAPE_LOCATION,\r\n\tShapeActionTypes,\r\n\tADD_ARROW,\r\n\tSET_SHAPES,\r\n\tEDIT_SHAPE_NAME,\r\n\tUPDATE_SHAPE_DESCRIPTION,\r\n\t//Arrow,\r\n\tSET_SHAPE_ADDITONAL_INFO,\r\n\tArrow,\r\n\tEDIT_ARROW_ACTIVATION,\r\n\tEDIT_ACTIVATION_FUNCTION,\r\n\tDELETE_ARROW,\r\n\t//UPDATE_SHAPE_ARROWS,\r\n} from \"./types\";\r\nimport ArrowMap from \"../../interfaces/arrowMap\";\r\nimport {ACTIVATION_NONE} from \"../../interfaces/activations\";\r\n\r\nconst initialState: ShapeState = {\r\n\tshapes: [],\r\n\t//arrows: new Map<[Shape, Shape], AllActivationFunctions>()\r\n\tarrows: new ArrowMap()\r\n};\r\n\r\nexport function shapeReducer(state = initialState, action: ShapeActionTypes) : ShapeState {\r\n\tconst shapes = [...state.shapes];\r\n\r\n\t/*\r\n\t * NOTE: a nice article that explain why we should use curly braces in our case block sections.\r\n\t\t ( it is also supported by the official docs of redux )\r\n\t\t \r\n\t * https://medium.com/@e_himmelfarb/use-curly-braces-with-es6-let-and-const-in-switch-blocks-react-redux-reducers-c0b01b37d748\r\n\t */\r\n\r\n\tswitch(action.type) {\r\n\t\tcase ADD_SHAPE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshapes: [...state.shapes, action.payload]\r\n\t\t\t};\r\n\r\n\t\tcase SET_SHAPES:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshapes: [...action.payload],\r\n\t\t\t\tarrows: new ArrowMap(),\r\n\t\t\t\tsourceShape: undefined\r\n\t\t\t};\r\n\r\n\t\tcase DELETE_SHAPE:\r\n\t\t\tif(state.sourceShape) {\r\n\t\t\t\tconst copiedArrows = new ArrowMap(state.arrows);\r\n\r\n\t\t\t\tcopiedArrows.deleteShapeArrows(state.sourceShape);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tshapes: state.shapes.filter(\r\n\t\t\t\t\t\tshape => shape.timestamp !== state.sourceShape!.timestamp\r\n\t\t\t\t\t),\r\n\t\t\t\t\tsourceShape: undefined,\r\n\t\t\t\t\tarrows: copiedArrows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn state;\r\n\r\n\t\tcase DELETE_ARROW:\r\n\t\t\tif(state.sourceArrow) {\r\n\t\t\t\tconst copiedArrows = new ArrowMap(state.arrows);\r\n\t\t\t\tcopiedArrows.deleteArrow([state.sourceArrow.source, state.sourceArrow.target]);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tarrows: copiedArrows\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn state;\r\n\r\n\t\tcase EDIT_SHAPE_ACTIVATION: {\r\n\t\t\tconst matchShape = state.shapes.find(s => s.timestamp === action.meta.timestamp);\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsourceShape: matchShape,\r\n\t\t\t\tsourceArrow: action.meta.timestamp === -1 || matchShape ? undefined : state.sourceArrow\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase EDIT_ARROW_ACTIVATION: {\r\n\t\t\t\r\n\t\t\tconst arrow: Arrow = {\r\n\t\t\t\tsource: action.meta.sourceShape,\r\n\t\t\t\ttarget: action.meta.targetShape\r\n\t\t\t};\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsourceArrow: arrow\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase EDIT_SHAPE_NAME: {\r\n\t\t\tconst currShape = shapes.find(s => s.timestamp === action.payload.timestamp)!;\r\n\t\t\tcurrShape.name = action.payload.newName;\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshapes\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tcase UPDATE_SHAPE_LOCATION: {\r\n\t\t\tconst currShape = shapes.find(s => s.timestamp === action.payload.timestamp)!;\r\n\t\t\tcurrShape.x = action.payload.x;\r\n\t\t\tcurrShape.y = action.payload.y;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshapes: shapes\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase UPDATE_SHAPE_DESCRIPTION: {\r\n\t\t\tconst currShape = shapes.find(s => s.timestamp === action.payload.timestamp)!;\r\n\t\t\tcurrShape.description = action.payload.desc;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshapes: shapes\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase ADD_ARROW: {\r\n\r\n\t\t\t// Since we deep copy shapes and we want to push to \"connectedTo\"\r\n\t\t\t// and \"connectedToMe\" the references, we'll find them in shapes object instead of\r\n\t\t\t// point them to action.payload.source/target.\r\n\t\t\t\r\n\t\t\t// Complexity: O(2 * |Shapes|)\r\n\t\t\t//const sourceShape2 = state.shapes.find(s => s.timestamp === action.payload.source.timestamp)!;\r\n\t\t\t//const targetShape2 = state.shapes.find(s => s.timestamp === action.payload.target.timestamp)!;\r\n\r\n\t\t\t// Complextiy: O(1)\r\n\t\t\tconst sourceShape = action.payload.source;\r\n\t\t\tconst targetShape = action.payload.target;\r\n\r\n\r\n\t\t\t// If there is already an Arrow between them, we won't do it again\r\n\t\t\tif(state.arrows.has([sourceShape, targetShape])) {\r\n\t\t\t\tconsole.log(\"it's the same one.\");\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\r\n\t\t\t// If there is an opposite Arrow, we'll return the previous state and\r\n\t\t\t// will return an Error\r\n\t\t\tif(state.arrows.has([targetShape, sourceShape])) {\r\n\t\t\t\t// TODO: Make an error here, it could be down by dispatch to new reducer.\r\n\t\t\t\tconsole.log(\"Error, cannot make opposite arrow.\");\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//sourceShape.connectedTo.push(targetShape);\r\n\t\t\t//targetShape.connectedToMe.push(sourceShape);\r\n\r\n\t\t\t//const arrowsClone = new Map<[Shape, Shape], AllActivationFunctions>(state.arrows);\r\n\t\t\tconst arrowsClone = new ArrowMap(state.arrows);\r\n\r\n\t\t\t\r\n\t\t\tarrowsClone.set([sourceShape, targetShape], ACTIVATION_NONE);\r\n\t\t\t\r\n\t\t\t/*const newArrow : Arrow = {\r\n\t\t\t\tsource: action.payload.source,\r\n\t\t\t\ttarget: action.payload.target\r\n\t\t\t};*/\r\n\r\n\t\t\t//sourceShape.associatedArrows.push(newArrow);\r\n\t\t\t//targetShape.associatedArrows.push(newArrow);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshapes: shapes,\r\n\t\t\t\t//arrows: [...state.arrows, newArrow]\r\n\t\t\t\tarrows: arrowsClone\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tcase SET_SHAPE_ADDITONAL_INFO: {\r\n\t\t\t\r\n\t\t\tconst currShape = shapes.find(s => s.timestamp === action.payload.timestamp)!;\r\n\t\t\tcurrShape.additionalInfo![action.payload.key] = action.payload.value;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tshapes: shapes\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcase EDIT_ACTIVATION_FUNCTION: {\r\n\t\t\tconst copiedArrows = new ArrowMap(state.arrows);\r\n\r\n\t\t\tif(state.sourceArrow)\r\n\t\t\t{\r\n\t\t\t\tcopiedArrows.set([state.sourceArrow.source, state.sourceArrow.target], action.payload.func);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tarrows: copiedArrows\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import { MouseState, MouseActionTypes, UPDATE_MOUSE_LOCATION } from \"./types\";\r\n\r\nconst initialState: MouseState = {\r\n\txPointer: 0,\r\n\tyPointer: 0\r\n};\r\n\r\nexport function mouseReducer(state = initialState, action: MouseActionTypes) : MouseState {\r\n\tswitch(action.type) {\r\n\t\tcase UPDATE_MOUSE_LOCATION:\r\n\t\t\treturn {\r\n\t\t\t\txPointer: action.payload.x,\r\n\t\t\t\tyPointer: action.payload.y\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import { ToastsState, ToastsActionTypes, ADD_TOAST, REMOVE_TOAST } from \"./types\";\r\n\r\nconst initialState: ToastsState = {\r\n\tnotifications: []\r\n};\r\n\r\nexport function toastsReducer(state = initialState, action: ToastsActionTypes) : ToastsState {\r\n\tswitch(action.type) {\r\n\t\tcase ADD_TOAST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: [...state.notifications, {\r\n\t\t\t\t\ttimestamp: new Date().getTime(),\r\n\t\t\t\t\ttitle: action.payload.title,\r\n\t\t\t\t\tdesc: action.payload.desc\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\r\n\t\tcase REMOVE_TOAST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tnotifications: state.notifications.filter(n => n.timestamp !== action.meta.timestamp)\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import { ConfigState, ConfigActionTypes, UPDATE_DESIGN_TEMPLATE, UPDATE_SVG_REF } from \"./types\";\r\nimport { TEMPLATE_ABSTRACT } from \"../../interfaces/designTemplates\";\r\n\r\nconst initialState: ConfigState = {\r\n\tdesignTemplate: TEMPLATE_ABSTRACT\r\n};\r\n\r\nexport function configReducer(state = initialState, action: ConfigActionTypes) : ConfigState {\r\n\tswitch(action.type) {\r\n\t\tcase UPDATE_DESIGN_TEMPLATE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdesignTemplate: action.payload.design\r\n\t\t\t}\r\n\r\n\t\tcase UPDATE_SVG_REF:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsvgRef: action.payload.svgRef\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\nimport { shapeReducer } from './shapes/reducers';\r\nimport { mouseReducer } from \"./mouse/reducers\";\r\nimport { toastsReducer } from \"./toasts/reducers\";\r\nimport { configReducer } from \"./config/reducers\";\r\n\r\nconst rootReducer = combineReducers({\r\n\tshapes: shapeReducer,\r\n\tmouse: mouseReducer,\r\n\ttoasts: toastsReducer,\r\n\tconfig: configReducer\r\n});\r\n\r\nexport type AppState = ReturnType<typeof rootReducer>;\r\n\r\nexport default function configureStore() {\r\n\tconst middlewares = [thunkMiddleware];\r\n\tconst middleWareEnhancer = applyMiddleware(...middlewares);\r\n\r\n\tconst store = createStore(\r\n\t\trootReducer,\r\n\t\tcomposeWithDevTools(middleWareEnhancer)\r\n\t);\r\n\r\n\treturn store;\r\n}\r\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from \"react-redux\";\nimport * as serviceWorker from './serviceWorker';\n\nimport './index.css';\n\nimport App from './App';\nimport configureStore from './store';\n\nconst store = configureStore();\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}