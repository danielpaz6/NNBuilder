(this["webpackJsonpreact-neural-network-planner"]=this["webpackJsonpreact-neural-network-planner"]||[]).push([[0],{205:function(e,t,n){},210:function(e,t,n){e.exports=n.p+"static/media/logo.edf3373f.svg"},218:function(e,t,n){e.exports=n(495)},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){},493:function(e,t,n){},494:function(e,t,n){},495:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(33),i=n.n(o),l=n(28);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(227),n(228);var s=n(100),c=n.n(s),p=n(157),u=n(12),d=n(14),m=n(16),h=n(15);n(229);function f(e,t){return{type:"SET_SHAPES",payload:{shapes:e,arrows:t}}}function E(){return{type:"DELETE_SHAPE"}}function y(){return{type:"DELETE_ARROW"}}function g(e){return{type:"EDIT_SHAPE_ACTIVATION",meta:{timestamp:e}}}function v(e,t,n){return{type:"UPDATE_SHAPE_LOCATION",payload:{timestamp:e,x:t,y:n}}}var C=n(20),b=n(13),A="TEMPLATE_ABSTRACT",w="TEMPLATED_FILLED",S=90,x=70,k=2,P="#dae7fc",L="#909da6",O="red",T=5,I=10,M=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Max Pooling Layer"),a.createElement("rect",{id:"svg_1",height:30,width:30,y:2,x:14,strokeWidth:"1",stroke:this.props.isMarked?"red":"#FF9A9E",fill:"#ffb6b9",rx:"1"}),a.createElement("rect",{id:"svg_2",height:30,width:30,y:14,x:26,strokeWidth:"1",stroke:this.props.isMarked?"red":"#FFC7AF",fill:"#fae3d9",rx:"1"}),a.createElement("rect",{id:"svg_3",height:30,width:30,y:26,x:38,strokeWidth:"1",stroke:this.props.isMarked?"red":"#92DFCD",fill:"#bbded6",rx:"1"}))}},{key:"renderAbstractTemplate",value:function(){var e=this,t=new Array(T).fill(0);return a.createElement(a.Fragment,null,a.createElement("title",null,"Max Pooling Layer"),t.map((function(t,n){return a.createElement("rect",{key:n,height:x,width:S,x:k+I*n,y:k+I*n,strokeWidth:"1",stroke:e.props.isMarked?O:L,fill:P})})),a.createElement("svg",{width:S,height:x,x:I*(t.length-1),y:I*(t.length-1)},a.createElement("text",{x:"50%",y:"20%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"12px"},a.createElement("tspan",{x:"50%",dy:"1.2em"},"Max Pooling"),a.createElement("tspan",{x:"50%",dy:"1.2em"},"Layer"),this.props.additionalInfo&&a.createElement("tspan",{x:"50%",dy:"1.8em",fontSize:"10px"},this.props.additionalInfo.kernelSize,"x",this.props.additionalInfo.kernelSize,"\xa0\xa0\xa0(stride None)"))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);M.centerPosition=[33,33],M.centerPositionAbstract=[(S+I*T)/2,(x+I*T)/2];var j=30,D=2,F="#dae7fc",z="#909da6",N="red",_=7,B=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Fully Connected Layer"),a.createElement("rect",{id:"svg_1",height:90,width:30,y:2,x:2,strokeWidth:"1",stroke:this.props.isMarked?"red":"#f6d186",fill:"#fcf7bb"}))}},{key:"renderAbstractTemplate",value:function(){var e=this,t=this.props.additionalInfo?this.props.additionalInfo.nodesCount:_,n=new Array(t).fill(0);return a.createElement(a.Fragment,null,a.createElement("title",null,"Fully Connected Layer"),n.map((function(t,r){return Math.floor(n.length/2)!==r&&a.createElement("rect",{key:r,rx:j/2,height:j,width:j,x:D,y:D+(j+D)*r,strokeWidth:"1",stroke:e.props.isMarked?N:z,fill:F})})),a.createElement("svg",{height:j+(j+D)*(n.length+1),width:2*j},a.createElement("text",{x:D,y:2*D+(j+D)*Math.floor(n.length/2)},a.createElement("tspan",{x:"25%",dy:"0.5em"},"."),a.createElement("tspan",{x:"25%",dy:"0.5em"},"."),a.createElement("tspan",{x:"25%",dy:"0.5em"},".")),a.createElement("text",{x:D,y:2*D+(j+D)*n.length,fontSize:8,alignmentBaseline:"middle",textAnchor:"middle"},a.createElement("tspan",{x:"30%",dy:"1em"},"Fully"),a.createElement("tspan",{x:"32%",dy:"1.2em"},"Connected"),this.props.additionalInfo&&a.createElement("tspan",{x:"30%",dy:"1.5em"},this.props.additionalInfo.inputDimension,"x",this.props.additionalInfo.outputDimension),a.createElement("tspan",{x:"30%",dy:"1.5em"},"(Nodes)"))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);B.centerPosition=[15,45],B.centerPositionAbstract=function(e){return[(j+D)/2+D,(j+D)*e/2+D]};var R=35,W=200,H=2,G="#dae7fc",U="#909da6",V="red",Z=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Flatten Layer"),a.createElement("rect",{id:"svg_1",height:150,width:20,y:2,x:2,strokeWidth:"1",stroke:this.props.isMarked?"#fd5e53":"#FF7E75",fill:"#FFBCB7"}))}},{key:"renderAbstractTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Flatten Layer"),a.createElement("rect",{height:W,width:R,y:H,x:H,strokeWidth:"1",stroke:this.props.isMarked?V:U,fill:G}),a.createElement("svg",{height:W,width:R},a.createElement("text",{x:"50%",y:"45%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"10px"},a.createElement("tspan",{x:"55%",dy:"1.2em"},"Flatten"),a.createElement("tspan",{x:"55%",dy:"1.2em"},"Layer"))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);Z.centerPosition=[10,75],Z.centerPositionAbstract=[(R+2*H)/2,(W+2*H)/2];var K=120,Y=100,X=2,q="#dae7fc",J="#909da6",Q="red",$=5,ee=8,te=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Convolutional Layer"),a.createElement("rect",{id:"svg_1",height:30,width:30,y:2,x:7,strokeWidth:"1",stroke:this.props.isMarked?"orange":"#75daad",fill:"#edffea"}),a.createElement("rect",{id:"svg_2",height:30,width:30,y:7,x:12,strokeWidth:"1",stroke:this.props.isMarked?"orange":"#75daad",fill:"#75daad"}),a.createElement("rect",{id:"svg_3",height:30,width:30,y:12,x:17,strokeWidth:"1",stroke:this.props.isMarked?"orange":"#75daad",fill:"#edffea"}),a.createElement("rect",{id:"svg_4",height:30,width:30,y:17,x:22,strokeWidth:"1",stroke:this.props.isMarked?"orange":"#75daad",fill:"#75daad"}))}},{key:"renderAbstractTemplate",value:function(){var e=this,t=new Array($).fill(0);return a.createElement(a.Fragment,null,a.createElement("title",null,"Convolutional Layer"),t.map((function(t,n){return a.createElement("rect",{key:n,height:Y,width:K,x:X+ee*n,y:X+ee*n,strokeWidth:"1",stroke:e.props.isMarked?Q:J,fill:q})})),a.createElement("polyline",{markerEnd:"url(#smallArrow)",points:"".concat(ee*(t.length-1)+X,",").concat(X+ee*(t.length-1)+30," ",4,",",20),fill:"none",stroke:J}),a.createElement("svg",{width:K,height:Y,x:ee*(t.length-1),y:ee*(t.length-1)},a.createElement("text",{x:"50%",y:"20%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"12px"},a.createElement("tspan",{x:"50%",dy:"1.2em"},"Convolutional"),a.createElement("tspan",{x:"50%",dy:"1.2em"},"Layer"),this.props.additionalInfo&&a.createElement(a.Fragment,null,a.createElement("tspan",{x:"50%",dy:"1.8em",fontSize:"10px"},this.props.additionalInfo.kernelSize,"x",this.props.additionalInfo.kernelSize),a.createElement("tspan",{x:"50%",dy:"1.8em",fontSize:"10px"},"(stride ",this.props.additionalInfo.stride,")")))),a.createElement("svg",{width:50,height:200,x:-7,y:ee*(t.length/2)-15},a.createElement("text",{x:"30%",y:"20%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"10px"},this.props.additionalInfo&&a.createElement(a.Fragment,null,a.createElement("tspan",{x:"50%",dy:"1.2em",fontWeight:"bold"},this.props.additionalInfo.outChannels),a.createElement("tspan",{x:"50%",dy:"1.2em",fontSize:"8px"},"Channels")))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);te.centerPosition=[25,25],te.centerPositionAbstract=[(K+ee*$)/2,(Y+ee*$)/2];var ne=50,ae=2,re="white",oe="#909da6",ie="red",le=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Addition Layer"),a.createElement("rect",{height:50,width:50,y:2,x:2,strokeWidth:"1",stroke:this.props.isMarked?"red":"#95e7b0",fill:"#deffe9",rx:25}),a.createElement("polygon",{transform:"scale(0.25) translate(".concat(57,",").concat(57,")"),x:27,y:27,points:"2 37, 37 37, 37 2, 67 2, 67 37, 102 37, 102 67, 67 67, 67 102, 37 102, 37 67, 2 67",stroke:"#95e7b0",fill:"#95e7b0",strokeWidth:"2"}))}},{key:"renderAbstractTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Addition Layer"),a.createElement("rect",{rx:ne/2,height:ne,width:ne,x:ae,y:ae,strokeWidth:"1",stroke:this.props.isMarked?ie:oe,fill:re}),a.createElement("polygon",{transform:"scale(0.25) translate(".concat(57,",").concat(57,")"),x:27,y:27,points:"2 37, 37 37, 37 2, 67 2, 67 37, 102 37, 102 67, 67 67, 67 102, 37 102, 37 67, 2 67",stroke:oe,fill:oe,strokeWidth:"1"}))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);le.centerPosition=[25,25],le.centerPositionAbstract=[(ne+ae)/2,(ne+ae)/2];var se=80,ce=70,pe=2,ue="#fff2cc",de="#8d8c89",me="red",he=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Concatenate Layer"),a.createElement("rect",{id:"svg_1",height:40,width:20,y:2,x:2,strokeWidth:"1",stroke:this.props.isMarked?"red":"#b89acf",fill:"#f3e2f7"}),a.createElement("rect",{id:"svg_2",height:40,width:20,y:42,x:2,strokeWidth:"1",stroke:this.props.isMarked?"red":"#b89acf",fill:"#f3e2f7"}),a.createElement("rect",{id:"svg_3",height:40,width:20,y:82,x:2,strokeWidth:"1",stroke:this.props.isMarked?"red":"#b89acf",fill:"#f3e2f7"}))}},{key:"renderAbstractTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Concatenate Layer"),a.createElement("rect",{height:ce,width:se,y:pe,x:pe,strokeWidth:"1",stroke:this.props.isMarked?me:de,fill:ue}),a.createElement("svg",{height:ce,width:se},a.createElement("text",{x:"50%",y:"36%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"10px"},a.createElement("tspan",{x:"50%",dy:"1.2em"},"Concatenate"),a.createElement("tspan",{x:"50%",dy:"1.2em"},"Layer"))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);he.centerPosition=[10,60],he.centerPositionAbstract=[(se+2*pe)/2,(ce+2*pe)/2];var fe=100,Ee=100,ye=2,ge="#dae7fc",ve="#909da6",Ce="red",be=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Input Layer"),a.createElement("rect",{id:"svg_1",height:40,width:40,y:2,x:2,strokeWidth:"1",stroke:this.props.isMarked?"red":"#79bac1",fill:"#f1f3f4"}))}},{key:"renderAbstractTemplate",value:function(){var e=this.props.additionalInfo?parseInt(this.props.additionalInfo.dimension.toString()[0]):0;return a.createElement(a.Fragment,null,a.createElement("title",null,"Input Layer"),a.createElement("rect",{height:Ee,width:fe,y:ye,x:ye,strokeWidth:"1",stroke:this.props.isMarked?Ce:ve,fill:ge}),a.createElement("svg",{height:Ee,width:fe},a.createElement("text",{x:"50%",y:"30%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"12px"},a.createElement("tspan",{x:"50%",dy:"1.2em"},"Input"),this.props.additionalInfo&&a.createElement("tspan",{x:"50%",dy:"1.2em"},this.props.additionalInfo.type),a.createElement("tspan",{x:"50%",dy:"1.8em",fontSize:"10px"},e>=1&&this.props.additionalInfo.dim1,e>=2&&"x"+this.props.additionalInfo.dim2,e>=3&&"x"+this.props.additionalInfo.dim3))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);be.centerPosition=[21,21],be.centerPositionAbstract=[(fe+2*ye)/2,(Ee+2*ye)/2];var Ae=80,we=300,Se=2,xe="#dae7fc",ke="#909da6",Pe="red",Le=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Output Layer"),a.createElement("rect",{id:"svg_1",height:90,width:20,y:2,x:2,strokeWidth:"1",stroke:this.props.isMarked?"red":"#d2c6b2",fill:"#eae7d9"}))}},{key:"renderAbstractTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Output Layer"),a.createElement("rect",{height:we,width:Ae,y:Se,x:Se,strokeWidth:"1",stroke:this.props.isMarked?Pe:ke,fill:xe}),a.createElement("svg",{height:we,width:Ae},a.createElement("text",{x:"50%",y:"45%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"12px"},a.createElement("tspan",{x:"50%",dy:"1.2em"},"Output"),a.createElement("tspan",{x:"50%",dy:"1.2em"},"Layer"))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);Le.centerPosition=[11,46],Le.centerPositionAbstract=[(Ae+2*Se)/2,(we+2*Se)/2];var Oe=70,Te=70,Ie=2,Me="#dae7fc",je="#909da6",De="red",Fe=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){var e=this,t=[0,1,2];return a.createElement(a.Fragment,null,a.createElement("title",null,"Dropout Layer"),t.map((function(n){return t.map((function(t){return a.createElement("rect",{key:n+","+t,id:"svg_1",height:12,width:12,x:2+12*n,y:2+12*t,strokeWidth:"1",stroke:e.props.isMarked?"red":"#f5b971",fill:"#fdd998"})}))})))}},{key:"renderAbstractTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Dropout Layer"),a.createElement("rect",{height:Te,width:Oe,y:Ie,x:Ie,strokeWidth:"1",stroke:this.props.isMarked?De:je,fill:Me}),a.createElement("svg",{height:Te,width:Oe},a.createElement("text",{x:"50%",y:"36%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"10px"},a.createElement("tspan",{x:"50%",dy:"1.2em"},"Dropout"),a.createElement("tspan",{x:"50%",dy:"1.2em"},"Layer"))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);Fe.centerPosition=[18,18],Fe.centerPositionAbstract=[(Oe+2*Ie)/2,(Te+2*Ie)/2];var ze=70,Ne=70,_e=2,Be="#dae7fc",Re="#909da6",We="red",He=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderFilledTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Batch Normalization Layer"),a.createElement("polygon",{transform:"scale(0.5)",x:4,y:4,points:"32,2 72,2, 102,32, 102,72, 72,102 32,102 2,72 2,32",stroke:this.props.isMarked?"red":"#d4a5a5",fill:"#ffecda",strokeWidth:"3"}))}},{key:"renderAbstractTemplate",value:function(){return a.createElement(a.Fragment,null,a.createElement("title",null,"Batch Normalization Layer"),a.createElement("rect",{height:Ne,width:ze,y:_e,x:_e,strokeWidth:"1",stroke:this.props.isMarked?We:Re,fill:Be}),a.createElement("svg",{height:Ne,width:ze},a.createElement("text",{x:"50%",y:"36%",alignmentBaseline:"middle",textAnchor:"middle",fontSize:"10px"},a.createElement("tspan",{x:"50%",dy:"1.2em"},"Batch"),a.createElement("tspan",{x:"50%",dy:"1.2em",fontSize:"8px"},"Normalization"))))}},{key:"render",value:function(){switch(this.props.templateDesign){case A:return this.renderAbstractTemplate();default:return this.renderFilledTemplate()}}}]),n}(a.Component);He.centerPosition=[27,27],He.centerPositionAbstract=[(ze+2*_e)/2,(Ne+2*_e)/2];var Ge,Ue,Ve,Ze,Ke,Ye,Xe,qe,Je,Qe,$e="ACTIVATION_NONE",et=function e(){Object(u.a)(this,e)};et.constX=void 0,et.constY=void 0;var tt={MaxPooling:{create:function(){return M},centerPosition:(Ge={},Object(C.a)(Ge,w,M.centerPosition),Object(C.a)(Ge,A,M.centerPositionAbstract),Ge),additionalInfo:{kernelSize:2}},FullyConnected:{create:function(){return B},centerPosition:(Ue={},Object(C.a)(Ue,w,B.centerPosition),Object(C.a)(Ue,A,B.centerPositionAbstract(7)),Ue),additionalInfo:{inputDimension:32,outputDimension:32,nodesCount:7}},Flatten:{create:function(){return Z},centerPosition:(Ve={},Object(C.a)(Ve,w,Z.centerPosition),Object(C.a)(Ve,A,Z.centerPositionAbstract),Ve)},Convolutional:{create:function(){return te},centerPosition:(Ze={},Object(C.a)(Ze,w,te.centerPosition),Object(C.a)(Ze,A,te.centerPositionAbstract),Ze),additionalInfo:{inChannels:16,outChannels:16,kernelSize:5,stride:1}},Concatenate:{create:function(){return he},centerPosition:(Ke={},Object(C.a)(Ke,w,he.centerPosition),Object(C.a)(Ke,A,he.centerPositionAbstract),Ke)},Addition:{create:function(){return le},centerPosition:(Ye={},Object(C.a)(Ye,w,le.centerPosition),Object(C.a)(Ye,A,le.centerPositionAbstract),Ye)},Input:{create:function(){return be},centerPosition:(Xe={},Object(C.a)(Xe,w,be.centerPosition),Object(C.a)(Xe,A,be.centerPositionAbstract),Xe),additionalInfo:{type:"Image",dimension:"2D",dim1:28,dim2:28,dim3:3}},Output:{create:function(){return Le},centerPosition:(qe={},Object(C.a)(qe,w,Le.centerPosition),Object(C.a)(qe,A,Le.centerPositionAbstract),qe),additionalInfo:{activation:$e}},Dropout:{create:function(){return Fe},centerPosition:(Je={},Object(C.a)(Je,w,Fe.centerPosition),Object(C.a)(Je,A,Fe.centerPositionAbstract),Je),additionalInfo:{p:.5}},BatchNormalization:{create:function(){return He},centerPosition:(Qe={},Object(C.a)(Qe,w,He.centerPosition),Object(C.a)(Qe,A,He.centerPositionAbstract),Qe),additionalInfo:{dimension:"2D",numFeatures:20}}},nt=function(){function e(t){Object(u.a)(this,e),this.activationMap=new Map,this.connectedToMap=new Map,this.connectedToMeMap=new Map,t&&(this.activationMap=new Map(t.activationMap),this.connectedToMap=new Map(t.connectedToMap),this.connectedToMeMap=new Map(t.connectedToMeMap))}return Object(d.a)(e,[{key:"set",value:function(e,t){var n=e[0].timestamp+"|"+e[1].timestamp,a=this.activationMap.has(n);return this.activationMap.set(n,t),a||(this.connectedToMap.has(e[0])?this.connectedToMap.get(e[0]).push(e[1]):this.connectedToMap.set(e[0],[e[1]]),this.connectedToMeMap.has(e[1])?this.connectedToMeMap.get(e[1]).push(e[0]):this.connectedToMeMap.set(e[1],[e[0]])),this}},{key:"get",value:function(e){return this.activationMap.get(e[0].timestamp+"|"+e[1].timestamp)}},{key:"deleteShapeArrows",value:function(e){var t=this;return this.connectedToMap.forEach((function(n){return n.forEach((function(n){return t.deleteArrow([e,n])}))})),this.connectedToMeMap.forEach((function(n){return n.forEach((function(n){return t.deleteArrow([n,e])}))})),!0}},{key:"deleteArrow",value:function(e){return!(!this.connectedToMap.get(e[0])||!this.connectedToMeMap.get(e[1]))&&(this.connectedToMap.set(e[0],this.connectedToMap.get(e[0]).filter((function(t){return t!==e[1]}))),this.connectedToMeMap.set(e[1],this.connectedToMeMap.get(e[1]).filter((function(t){return t!==e[0]}))),this.activationMap.delete(e[0].timestamp+"|"+e[1].timestamp))}},{key:"has",value:function(e){return this.activationMap.has(e[0].timestamp+"|"+e[1].timestamp)}},{key:"getConnectedToCount",value:function(e){return this.connectedToMap.has(e)?this.connectedToMap.get(e).length:0}},{key:"getConnectedToMeCount",value:function(e){return this.connectedToMeMap.has(e)?this.connectedToMeMap.get(e).length:0}},{key:"getConnectedToMe",value:function(e){return this.connectedToMeMap.get(e)}},{key:"getConnectedTo",value:function(e){return this.connectedToMap.get(e)}},{key:"getList",value:function(){var e=this,t=[];return this.connectedToMap.forEach((function(n,a){n.forEach((function(n){t.push([a,n,e.get([a,n])])}))})),t}},{key:"size",get:function(){return this.activationMap.size}}]),e}(),at={name:"Input",timestamp:(new Date).getTime()-100,shape:tt.Input.create(),x:21,y:202,centerPosition:tt.Input.centerPosition,additionalInfo:Object(b.a)({},tt.Input.additionalInfo)},rt={name:"FullyConnected",timestamp:(new Date).getTime()-200,shape:tt.FullyConnected.create(),x:214,y:14,centerPosition:tt.FullyConnected.centerPosition,additionalInfo:Object(b.a)({},tt.FullyConnected.additionalInfo)},ot={name:"FullyConnected",timestamp:(new Date).getTime()-300,shape:tt.FullyConnected.create(),x:335,y:14,centerPosition:tt.FullyConnected.centerPosition,additionalInfo:Object(b.a)({},tt.FullyConnected.additionalInfo)},it={name:"FullyConnected",timestamp:(new Date).getTime()-400,shape:tt.FullyConnected.create(),x:214,y:307,centerPosition:Object(b.a)({},tt.FullyConnected.centerPosition,Object(C.a)({},A,B.centerPositionAbstract(5))),additionalInfo:Object(b.a)({},tt.FullyConnected.additionalInfo,{nodesCount:5})},lt={name:"FullyConnected",timestamp:(new Date).getTime()-500,shape:tt.FullyConnected.create(),x:584,y:145,centerPosition:tt.FullyConnected.centerPosition,additionalInfo:Object(b.a)({},tt.FullyConnected.additionalInfo)},st={name:"FullyConnected",timestamp:(new Date).getTime()-510,shape:tt.FullyConnected.create(),x:702,y:176,centerPosition:Object(b.a)({},tt.FullyConnected.centerPosition,Object(C.a)({},A,B.centerPositionAbstract(5))),additionalInfo:Object(b.a)({},tt.FullyConnected.additionalInfo,{nodesCount:5})},ct={name:"Dropout",timestamp:(new Date).getTime()-610,shape:tt.Dropout.create(),x:315,y:352,centerPosition:tt.Dropout.centerPosition,additionalInfo:Object(b.a)({},tt.Dropout.additionalInfo)},pt={name:"Concatenate",timestamp:(new Date).getTime()-600,shape:tt.Concatenate.create(),x:460,y:222,centerPosition:tt.Concatenate.centerPosition,additionalInfo:Object(b.a)({},tt.Concatenate.additionalInfo)},ut={name:"Output",timestamp:(new Date).getTime()-700,shape:tt.Output.create(),x:800,y:106,centerPosition:tt.Output.centerPosition,additionalInfo:Object(b.a)({},tt.Output.additionalInfo)},dt=new nt;dt.set([at,rt],"ReLU"),dt.set([at,it],"Sigmoid"),dt.set([rt,ot],$e),dt.set([it,ct],$e),dt.set([ot,pt],"ReLU"),dt.set([ct,pt],$e),dt.set([pt,lt],$e),dt.set([lt,st],"ReLU"),dt.set([st,ut],$e);var mt={name:"Input",timestamp:(new Date).getTime()-1e3,shape:tt.Input.create(),x:57,y:180,centerPosition:tt.Input.centerPosition,additionalInfo:Object(b.a)({},tt.Input.additionalInfo)},ht={name:"Output",timestamp:(new Date).getTime()-1100,shape:tt.Output.create(),x:587,y:155,centerPosition:tt.Output.centerPosition,additionalInfo:Object(b.a)({},tt.Output.additionalInfo)},ft=dt,Et=[at,rt,ot,it,lt,pt,st,ct,ut],yt=[mt,ht],gt=n(48),vt=n(47),Ct=n(212);var bt=n(207),At=n(5),wt=n(210),St=n.n(wt),xt=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isFullScreenEnabled:!1},e.refSVG=a.createRef(),e.refCanvas=a.createRef(),e.refLink=a.createRef(),e.handleDownloadImage=Object(p.a)(c.a.mark((function t(){var n,a,r,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.refCanvas.current,a=n.getContext("2d"),r="<svg>"+e.props.config.svgRef.innerHTML+"</svg>",t.next=5,bt.a.from(a,r);case 5:t.sent.start(),o=e.refLink.current,i=n.toDataURL("image/png").replace("image/png","image/octet-stream"),o.setAttribute("href",i);case 10:case"end":return t.stop()}}),t)}))),e.handleDeleteSelection=function(){e.props.shapes.sourceShape?e.props.deleteShape():e.props.shapes.sourceArrow&&e.props.deleteArrow(),e.props.editActiveShape(-1)},e.handleStyleTemplate=function(){e.props.config.designTemplate===A?e.props.updateDesignTemplate(w):e.props.updateDesignTemplate(A)},e.handleNewTemplate=function(){e.props.setShapes(yt)},e.toggleFullScreen=function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen(),e.setState((function(e){return{isFullScreenEnabled:!e.isFullScreenEnabled}}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.createElement("div",{className:"toolbar"},a.createElement("canvas",{ref:this.refCanvas,id:"myCanvas",width:"1000px",height:"500px",style:{background:"white",display:"none"}}),a.createElement("div",{className:"left-side"},a.createElement("div",{className:"title"},a.createElement("div",{className:"image-container"},a.createElement("img",{src:St.a,alt:"NNBuilder.io logo"})),a.createElement("div",{className:"title-container"},a.createElement("h1",null,"NNBuilder.io"))),a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-new-template"},"Start new template"),placement:"bottom"},a.createElement("button",{onClick:this.handleNewTemplate},a.createElement("svg",{viewBox:"5 5 15 15",fill:"currentColor",width:"9",height:"15"},a.createElement("path",{d:"M13,6.70710678 L13,9 L15.2928932,9 L13,6.70710678 Z M17,19 C17,19.5522847 16.5522847,20 16,20 L7,20 C6.44771525,20 6,19.5522847 6,19 L6,6 C6,5.44771525 6.44771525,5 7,5 L12.7099045,5 L17,9.2995551 L17,19 Z M16,10 L12,10 L12,6 L7,6 L7,19 L16,19 L16,10 Z"})))),a.createElement("button",null,a.createElement("svg",{viewBox:"4 5 15 15",fill:"currentColor",width:"9",height:"15"},a.createElement("path",{d:"M16.679,5.60187506 L18.381,7.30587506 C19.207,8.13287506 19.207,9.47787506 18.381,10.3058751 L10.211,18.4858751 L4,19.9998751 L5.512,13.7818751 L13.682,5.60187506 C14.481,4.79987506 15.878,4.79887506 16.679,5.60187506 Z M8.66091072,16.0462125 L9.973,17.3598751 L15.625,11.7018751 L12.289,8.36087506 L6.637,14.0198751 L7.95422762,15.3386821 L11.1467061,12.1463747 C11.3419735,11.9511178 11.6585559,11.9511262 11.8538129,12.1463936 C12.0490698,12.341661 12.0490613,12.6582435 11.8537939,12.8535004 L8.66091072,16.0462125 Z M16.306,11.0198751 L17.7,9.62387506 C18.15,9.17287506 18.15,8.43787506 17.7,7.98687506 L15.998,6.28287506 C15.561,5.84587506 14.801,5.84687506 14.364,6.28287506 L12.97,7.67887506 L16.306,11.0198751 Z M5.426,18.5738751 L8.995,17.7438751 L6.254,14.9988751 L5.426,18.5738751 Z"}))),a.createElement("a",{id:"download",download:"myModel.png",ref:this.refLink},a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-download-svg"},a.createElement(Ct.a,{variant:"danger"},"Beta")," Download Image Snapshot of your Model"),placement:"bottom"},a.createElement("button",{onClick:this.handleDownloadImage},a.createElement("svg",{viewBox:"4 4 15 15",fill:"currentColor",width:"9",height:"15"},a.createElement("path",{d:"M5,13 L5,17 C5,17.5522847 5.44771525,18 6,18 L17,18 C17.5522847,18 18,17.5522847 18,17 L18,13 L19,13 L19,17 C19,18.1045695 18.1045695,19 17,19 L6,19 C4.8954305,19 4,18.1045695 4,17 L4,13 L5,13 Z M11,13.2928932 L11,5 L12,5 L12,13.2928932 L14.1464466,11.1464466 C14.3417088,10.9511845 14.6582912,10.9511845 14.8535534,11.1464466 C15.0488155,11.3417088 15.0488155,11.6582912 14.8535534,11.8535534 L11.5,15.2071068 L8.14644661,11.8535534 C7.95118446,11.6582912 7.95118446,11.3417088 8.14644661,11.1464466 C8.34170876,10.9511845 8.65829124,10.9511845 8.85355339,11.1464466 L11,13.2928932 Z"}))))),(this.props.shapes.sourceArrow||this.props.shapes.sourceShape)&&a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-download-svg"},"Delete selected layer/arrow"),placement:"bottom"},a.createElement("button",{onClick:this.handleDeleteSelection},a.createElement("svg",{viewBox:"5 4 16 16",width:"9",height:"15"},a.createElement("path",{d:"M16,11 L16,7 L7,7 L7,17 C7,18.104 7.896,19 9,19 L11,19 L11,20 L9,20 C7.343,20 6,18.657 6,17 L6,7 L5,7 L5,6 L9,6 L9,5 C9,4.44771525 9.44771525,4 10,4 L13,4 C13.5522847,4 14,4.44771525 14,5 L14,6 L18,6 L18,7 L17,7 L17,11 L16,11 Z M10,5 L10,6 L13,6 L13,5 L10,5 Z M16.4983444,15.7913331 L19.1416786,13.1463165 C19.3369408,12.9510544 19.6535233,12.9510544 19.8487854,13.1463165 C20.0440475,13.3415787 20.0440475,13.6581612 19.8487854,13.8534233 L17.2052263,16.4986649 L19.8487854,19.1439064 C20.0440475,19.3391685 20.0440475,19.655751 19.8487854,19.8510132 C19.6535233,20.0462753 19.3369408,20.0462753 19.1416786,19.8510132 L16.4983444,17.2059967 L13.8550102,19.8510132 C13.6597481,20.0462753 13.3431656,20.0462753 13.1479034,19.8510132 C12.9526413,19.655751 12.9526413,19.3391685 13.1479034,19.1439064 L15.7914625,16.4986649 L13.1479034,13.8534233 C12.9526413,13.6581612 12.9526413,13.3415787 13.1479034,13.1463165 C13.3431656,12.9510544 13.6597481,12.9510544 13.8550102,13.1463165 L16.4983444,15.7913331 Z"}))))),a.createElement("div",{className:"right-side"},a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-toggle-template"},"Change Style Template"),placement:"bottom"},a.createElement(At.a,{style:{float:"left",marginTop:"1px",marginRight:"-10px"}},a.createElement(At.a.Check,{checked:this.props.config.designTemplate===A,onChange:this.handleStyleTemplate,type:"switch",id:"custom-switch",label:""}))),a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-toggle-fullscreen"},"Toggle Fullscreen Mode"),placement:"bottom"},a.createElement("button",{onClick:this.toggleFullScreen,id:"fullscreen-mode"},this.state.isFullScreenEnabled?a.createElement("svg",{viewBox:"5 4 15 15",fill:"currentColor",width:"9",height:"13",className:"active_button"},a.createElement("path",{d:"M10.9393398,12 L6,7.06066017 C5.70710678,6.76776695 5.70710678,6.29289322 6,6 C6.29289322,5.70710678 6.76776695,5.70710678 7.06066017,6 L12,10.9393398 L16.9393398,6 C17.232233,5.70710678 17.7071068,5.70710678 18,6 C18.2928932,6.29289322 18.2928932,6.76776695 18,7.06066017 L13.0606602,12 L18,16.9393398 C18.2928932,17.232233 18.2928932,17.7071068 18,18 C17.7071068,18.2928932 17.232233,18.2928932 16.9393398,18 L12,13.0606602 L7.06066017,18 C6.76776695,18.2928932 6.29289322,18.2928932 6,18 C5.70710678,17.7071068 5.70710678,17.232233 6,16.9393398 L10.9393398,12 Z"})):a.createElement("svg",{viewBox:"0 0 1024 1024"},a.createElement("path",{d:"M959.688 920.068l0.31-176c0.040-22.094-17.84-40.032-39.93-40.070-22.092-0.040-40.032 17.838-40.070 39.93l-0.142 79.672-235.734-235.732c-15.622-15.622-40.948-15.622-56.57 0s-15.622 40.948 0 56.568l235.442 235.442-78.946-0.1c-22.092-0.028-40.022 17.86-40.050 39.952-0.014 11.064 4.464 21.084 11.714 28.334 7.228 7.224 17.208 11.702 28.236 11.714l175.688 0.22c22.086 0.028 40.014-17.846 40.052-39.93zM920.178 64.228l-176-0.308c-22.094-0.040-40.032 17.84-40.070 39.93-0.040 22.092 17.838 40.032 39.93 40.070l79.672 0.14-235.732 235.734c-15.622 15.622-15.622 40.948 0 56.568s40.948 15.622 56.568 0l235.442-235.442-0.1 78.946c-0.028 22.092 17.86 40.022 39.952 40.050 11.064 0.014 21.084-4.464 28.334-11.714 7.224-7.228 11.702-17.208 11.714-28.236l0.22-175.688c0.026-22.082-17.846-40.010-39.93-40.050zM64.236 103.742l-0.308 176c-0.040 22.094 17.84 40.032 39.93 40.070 22.092 0.040 40.032-17.84 40.070-39.93l0.14-79.672 235.734 235.73c15.622 15.622 40.948 15.622 56.568 0s15.622-40.946 0-56.566l-235.442-235.442 78.946 0.098c22.092 0.028 40.022-17.86 40.050-39.95 0.014-11.066-4.464-21.086-11.714-28.336-7.228-7.222-17.208-11.7-28.236-11.714l-175.688-0.218c-22.084-0.026-40.012 17.844-40.050 39.93zM103.748 959.766l176 0.308c22.094 0.040 40.032-17.84 40.070-39.93 0.040-22.092-17.84-40.032-39.93-40.070l-79.672-0.14 235.73-235.734c15.622-15.622 15.622-40.948 0-56.568s-40.946-15.622-56.566 0l-235.442 235.442 0.098-78.946c0.028-22.092-17.86-40.022-39.95-40.050-11.066-0.014-21.086 4.464-28.336 11.714-7.222 7.228-11.7 17.208-11.714 28.236l-0.218 175.688c-0.026 22.082 17.844 40.010 39.93 40.050z"})))),a.createElement("a",{href:"https://github.com/danielpaz6/NNBuilder"},a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-github"},"This project is open source!"),placement:"bottom"},a.createElement("button",null,a.createElement("svg",{style:{width:"17px"},height:"20",viewBox:"0 0 16 16",version:"1.1",width:"20","aria-hidden":"true"},a.createElement("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})))))))}}]),n}(a.Component),kt=Object(l.b)((function(e){return{shapes:e.shapes,config:e.config}}),{setShapes:f,updateDesignTemplate:function(e){return{type:"UPDATE_DESIGN_TEMPLATE",payload:{design:e}}},deleteShape:E,editActiveShape:g,deleteArrow:y})(xt),Pt=(n(300),n(62)),Lt=n(158),Ot=n(19);function Tt(e,t){return{type:"UPDATE_LOCATION",payload:{x:e,y:t}}}var It=n(35),Mt=n(213),jt=n(132),Dt=(n(301),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return a.createElement(jt.a,{bsPrefix:"card template-card",onClick:this.props.chooseTemplate},a.createElement(jt.a.Body,null,a.createElement("strong",null,this.props.title)),a.createElement(jt.a.Footer,null,this.props.desc))}}]),n}(a.Component)),Ft=(new Date).getTime()-3e3,zt={name:"Input",timestamp:Ft-1,shape:tt.Input.create(),x:15,y:185,centerPosition:tt.Input.centerPosition,additionalInfo:Object(b.a)({},tt.Input.additionalInfo,{type:"Image",dimension:"3D",dim1:84,dim2:84,dim3:4})},Nt={name:"Convolutional",timestamp:Ft-2,shape:tt.Convolutional.create(),x:192,y:168,centerPosition:tt.Convolutional.centerPosition,additionalInfo:Object(b.a)({},tt.Convolutional.additionalInfo,{inChannels:4,outChannels:32,kernelSize:8,stride:4})},_t={name:"Convolutional",timestamp:Ft-3,shape:tt.Convolutional.create(),x:446,y:167,centerPosition:tt.Convolutional.centerPosition,additionalInfo:Object(b.a)({},tt.Convolutional.additionalInfo,{inChannels:32,outChannels:64,kernelSize:4,stride:2})},Bt={name:"Convolutional",timestamp:Ft-4,shape:tt.Convolutional.create(),x:704,y:167,centerPosition:tt.Convolutional.centerPosition,additionalInfo:Object(b.a)({},tt.Convolutional.additionalInfo,{inChannels:64,outChannels:64,kernelSize:3,stride:1})},Rt={name:"Flatten",timestamp:Ft-5,shape:tt.Flatten.create(),x:910,y:135,centerPosition:tt.Flatten.centerPosition,additionalInfo:Object(b.a)({},tt.Flatten.additionalInfo)},Wt={name:"FullyConnected",timestamp:Ft-6,shape:tt.FullyConnected.create(),x:1030,y:123,centerPosition:tt.FullyConnected.centerPosition,additionalInfo:Object(b.a)({},tt.FullyConnected.additionalInfo,{inputDimension:3136,outputDimension:512,nodesCount:7})},Ht={name:"FullyConnected",timestamp:Ft-7,shape:tt.FullyConnected.create(),x:1165,y:157,centerPosition:Object(b.a)({},tt.FullyConnected.centerPosition,Object(C.a)({},A,B.centerPositionAbstract(5))),additionalInfo:Object(b.a)({},tt.FullyConnected.additionalInfo,{inputDimension:512,outputDimension:6,nodesCount:5})},Gt={name:"Output",timestamp:Ft-8,shape:tt.Output.create(),x:1268,y:87,centerPosition:tt.Output.centerPosition,additionalInfo:Object(b.a)({},tt.Output.additionalInfo)},Ut=new nt;Ut.set([zt,Nt],$e),Ut.set([Nt,_t],"ReLU"),Ut.set([_t,Bt],"ReLU"),Ut.set([Bt,Rt],$e),Ut.set([Rt,Wt],"ReLU"),Ut.set([Wt,Ht],"ReLU"),Ut.set([Ht,Gt],$e);var Vt=[zt,Nt,_t,Bt,Rt,Wt,Ht,Gt],Zt=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleTemplate=function(t){switch(t){case"resnet":e.props.setShapes(Vt,Ut);break;case"blank":e.props.setShapes(yt)}e.props.onHide()},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return a.createElement(It.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),a.createElement(It.a.Header,{closeButton:!0},a.createElement(It.a.Title,{id:"contained-modal-title-vcenter"},"Select Pretrained Networks")),a.createElement(It.a.Body,null,a.createElement(Mt.a,null,a.createElement(Dt,{chooseTemplate:function(){return e.handleTemplate("resnet")},title:"DeepMind",desc:"A Deep Q Learning architecture"}),a.createElement(Dt,{chooseTemplate:function(){return e.handleTemplate("blank")},title:"Blank",desc:"Open new template"}))),a.createElement(It.a.Footer,null,a.createElement(Pt.a,{onClick:this.props.onHide},"Close")))}}]),n}(a.Component),Kt=Object(l.b)(null,{setShapes:f})(Zt),Yt=n(68),Xt=n(22),qt=n(17),Jt=n(45),Qt=(n(302),n(503)),$t=n(502);function en(e,t){return{type:"ADD_TOAST",payload:{title:e,desc:t}}}var tn=n(128),nn=function(){function e(){Object(u.a)(this,e),this.items=[]}return Object(d.a)(e,[{key:"enqueue",value:function(e){this.items.push(e)}},{key:"dequeue",value:function(){return this.items.shift()}},{key:"isEmpty",value:function(){return 0===this.items.length}},{key:"front",value:function(){return this.isEmpty()?this.items[0]:void 0}}]),e}(),an=function(e,t){switch(t){case"ReLU":return"F.relu("+e+")";case"Sigmoid":return"F.sigmoid("+e+")";case"Tanh":return"F.tanh("+e+")";case"Softmax":return"F.softmax("+e+")";case"Log Softmax":return"F.log_softmax("+e+")";default:return e}},rn=function(e,t){var n=function(e,t){for(var n=[],a=[],r=function(r){var o=e[r],i=-1,l=void 0;if(o.shape!==he&&o.shape!==le&&(i=e.findIndex((function(e){return e===t.getConnectedToMe(o)[0]})),l=t.get([e[i],o])),o.shape===B){var s=o.additionalInfo.inputDimension,c=o.additionalInfo.outputDimension;n.push("\t\tself.layer"+r+" = nn.Linear("+s+", "+c+")"),a.push("\t\tx"+r+" = self.layer"+r+"("+an("x"+i+")",l))}else if(o.shape===he){var p=[];t.getConnectedToMe(o).forEach((function(n){var a=e.findIndex((function(e){return e.timestamp===n.timestamp})),r=t.get([e[a],o]);p.push(an("x"+a,r))})),a.push("\t\tx"+r+" = torch.cat(("+p.join(", ")+"), dim=1)")}else if(o.shape===te){var u=o.additionalInfo.inChannels,d=o.additionalInfo.outChannels,m=o.additionalInfo.kernelSize,h=o.additionalInfo.stride;n.push("\t\tself.layer"+r+" = nn.Conv2d("+u+", "+d+", "+m+", "+h+")"),a.push("\t\tx"+r+" = self.layer"+r+"("+an("x"+i,l)+")")}else if(o.shape===M){var f=o.additionalInfo.kernelSize;a.push("\t\tx"+r+" = F.max_pool2d("+an("x"+i,l)+", "+f+")")}else if(o.shape===Z)a.push("\t\tx"+r+" = "+an("x"+i+".reshape(x"+i+".size(0), -1)",l));else if(o.shape===Fe){var E=o.additionalInfo.p;n.push("\t\tself.layer"+r+" = nn.Dropout(p="+E+")"),a.push("\t\tx"+r+" = self.layer"+r+"("+an("x"+i+")",l))}else if(o.shape===He){var y=o.additionalInfo.dimension.toString().toLowerCase(),g=o.additionalInfo.numFeatures;n.push("\t\tself.layer"+r+" = nn.BatchNorm"+y+"("+g+")"),a.push("\t\tx"+r+" = self.layer"+r+"("+an("x"+i+")",l))}else if(o.shape===le){var v=[];t.getConnectedToMe(o).forEach((function(n){var a=e.findIndex((function(e){return e.timestamp===n.timestamp})),r=t.get([e[a],o]);v.push(an("x"+a,r))})),a.push("\t\tx"+r+" = "+v.join(" + "))}else if(o.shape===Le){var C=o.additionalInfo.activation;a.push("\n\t\treturn "+an(an("x"+i,l),C))}},o=1;o<e.length;o++)r(o);return{layersOutput:n,connectionsOutput:a}}(e,t),a=n.layersOutput,r=n.connectionsOutput;return on[0]+a.join("\n")+on[1]+r.join("\n")},on=["import torch\nimport torch.nn as nn\nimport torch.nn.functional as F\n\nclass GeneratedNetwork(nn.Module):\n\tdef __init__(self):\n\t\tsuper(GeneratedNetwork, self).__init__()\n\n\t\t# Model layers\n","\n\n\tdef forward(self, x0):\n"],ln=function(e,t,n){var a=new Map;if(0===e.length||e[0].shape!==be)return n("Code Generation Error","Cannot generate code if the \n\t\tfirst layer is not an Input layter."),a;if(function(e,t){var n=new Set,a=new nn;for(n.add(e),a.enqueue(e);!a.isEmpty();){var r=a.dequeue();if(t.getConnectedToCount(r)>0){var o,i=Object(tn.a)(t.getConnectedTo(r));try{for(i.s();!(o=i.n()).done;){var l=o.value;n.has(l)||(n.add(l),a.enqueue(l))}}catch(s){i.e(s)}finally{i.f()}}}return n.size}(e[0],t)!==e.length)return n("Code Generation Error","All layers must be ancestors of the Input layer. \n\t\tIt seems like you didn't finish design your model."),a;var r=function(e,t,n){var a,r=new nt(t),o=[],i=[],l=Object(tn.a)(e);try{for(l.s();!(a=l.n()).done;){var s=a.value;0===r.getConnectedToMeCount(s)&&i.push(s)}}catch(m){l.e(m)}finally{l.f()}for(;i.length>0;){var c=i.pop();if(o.push(c),r.getConnectedToCount(c)>0){var p,u=Object(tn.a)(r.getConnectedTo(c));try{for(u.s();!(p=u.n()).done;){var d=p.value;r.deleteArrow([c,d]),0===r.getConnectedToMeCount(d)&&i.push(d)}}catch(m){u.e(m)}finally{u.f()}}}if(!(r.size>0))return o;n("Interpretation Error","Cannot have cycles in your model.")}(e,t,n);return r&&0!==r.length?(a.set("PYTORCH_CODE",rn(r,t)),a):a},sn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={pytorchCode:"",isValidCode:!1},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=ln(this.props.shapes.shapes,this.props.shapes.arrows,this.props.addToast);e.size>0?this.setState({isValidCode:!0,pytorchCode:e.get("PYTORCH_CODE")||""}):this.props.onHide()}},{key:"render",value:function(){return this.state.isValidCode?a.createElement(It.a,Object.assign({},this.props,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),a.createElement(It.a.Header,{closeButton:!0},a.createElement(It.a.Title,{id:"contained-modal-title-vcenter"},"Generated Code")),a.createElement(It.a.Body,null,a.createElement(Yt.a.Container,{id:"left-tabs-example",defaultActiveKey:"pytorch"},a.createElement(Xt.a,null,a.createElement(qt.a,{sm:3},a.createElement(Jt.a,{variant:"pills",className:"flex-column"},a.createElement(Jt.a.Item,null,a.createElement(Jt.a.Link,{eventKey:"pytorch"},"PyTorch")),a.createElement(Jt.a.Item,null,a.createElement(Jt.a.Link,{eventKey:"tensorflow"},"TensorFlow")),a.createElement(Jt.a.Item,null,a.createElement(Jt.a.Link,{eventKey:"keras"},"Keras")),a.createElement(Jt.a.Item,null,a.createElement(Jt.a.Link,{eventKey:"tfjs"},"TensorFlow.js")),a.createElement(Jt.a.Item,null,a.createElement(Jt.a.Link,{eventKey:"caffe"},"Caffe")))),a.createElement(qt.a,{sm:9},a.createElement(Yt.a.Content,null,a.createElement(Yt.a.Pane,{eventKey:"pytorch"},a.createElement(Qt.a,{showLineNumbers:!0,language:"python",style:$t.a,customStyle:{fontSize:11,tabSize:2,maxHeight:400},wrapLines:!0},this.state.pytorchCode)),a.createElement(Yt.a.Pane,{eventKey:"tensorflow"},"Coming soon."),a.createElement(Yt.a.Pane,{eventKey:"keras"},"Coming soon."),a.createElement(Yt.a.Pane,{eventKey:"tfjs"},"Coming soon."),a.createElement(Yt.a.Pane,{eventKey:"caffe"},"Coming soon."))))))):null}}]),n}(a.Component),cn=Object(l.b)((function(e){return{shapes:e.shapes}}),{addToast:en})(sn),pn=n(63),un=n(117),dn=r.a.forwardRef((function(e,t){return r.a.createElement("button",{ref:t,onClick:function(t){t.preventDefault(),e.onClick(t)}},e.children)})),mn=r.a.forwardRef((function(e,t){var n=Object(a.useState)(""),o=Object(pn.a)(n,2),i=o[0],l=o[1];return r.a.createElement("div",{ref:t,style:e.style,className:e.className},r.a.createElement(Ot.a.Header,{style:{textAlign:"center"}},"Add new component"),r.a.createElement(un.a,{className:"mx-3 my-2 w-auto",placeholder:"Select a layer...",onChange:function(e){return l(e.target.value)},value:i}),r.a.createElement("ul",{className:"list-unstyled"},r.a.Children.toArray(e.children).filter((function(e){return!i||e.props.children.toLowerCase().startsWith(i)}))))})),hn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={modalShow:!1,codeModalShow:!1},e.handleSetModal=function(t){e.setState({modalShow:t})},e.handleSetCodeModal=function(t){e.setState({codeModalShow:t})},e.createShape=function(t){var n=tt[t],a={name:t,timestamp:(new Date).getTime(),shape:n.create(),x:100+100*Math.random(),y:100+100*Math.random(),centerPosition:n.centerPosition,additionalInfo:Object(b.a)({},n.additionalInfo)};e.props.addShape(a)},e.toggleActive=function(t){e.props.editActiveShape(t);var n=e.props.shapes.shapes.find((function(e){return e.timestamp===t}));e.props.updateMouseLocation(n.x+n.centerPosition[e.props.config.designTemplate][0],n.y+n.centerPosition[e.props.config.designTemplate][1])},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props.shapes.sourceShape?this.props.shapes.sourceShape.timestamp:-1;return a.createElement(a.Fragment,null,a.createElement("div",{className:"side-bar"},a.createElement(Ot.a,null,a.createElement(Ot.a.Toggle,{variant:"outline-secondary",id:"dropdown-basic",style:{width:"100%",marginBottom:"10px"}},"Add new layer\xa0\xa0"),a.createElement(Pt.a,{variant:"outline-secondary",style:{width:"100%",marginBottom:"10px"},onClick:function(){return e.handleSetModal(!0)}},"Choose Template"),a.createElement(Pt.a,{variant:"danger",style:{width:"100%"},onClick:function(){return e.handleSetCodeModal(!0)}},"Get Code"),a.createElement(Ot.a.Menu,{style:{width:"100%"}},a.createElement(Ot.a.Header,null,"Layers"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("FullyConnected")}},"Fully Connected"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Convolutional")}},"Convolutional"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("MaxPooling")}},"Max Pooling"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Dropout")}},"Dropout"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("BatchNormalization")}},"Batch Norm"),a.createElement(Ot.a.Divider,null),a.createElement(Ot.a.Header,null,"Actions"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Concatenate")}},"Concatenate"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Flatten")}},"Flatten"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Addition")}},"Add"))),a.createElement("br",null),a.createElement("h6",{style:{paddingLeft:"5px"}},"Layers"),a.createElement(Lt.a,{defaultActiveKey:"#link1",variant:"flush"},this.props.shapes.shapes.map((function(n){return a.createElement(Lt.a.Item,{action:!0,key:n.timestamp,active:n.timestamp===t,onClick:function(){return e.toggleActive(n.timestamp)}},n.name)})))),a.createElement("div",{className:"small-side-bar"},a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-component"},"Add component"),placement:"right"},a.createElement(Ot.a,null,a.createElement(Ot.a.Toggle,{as:dn,id:"dropdown-custom-components"},a.createElement("svg",{viewBox:"0 2 24 24",fill:"currentColor",width:"24",height:"24"},a.createElement("path",{d:"M19,5 C19.5522847,5 20,5.44771525 20,6 L20,16 C20,16.5522847 19.5522847,17 19,17 L17,17 L17,19 C17,19.5522847 16.5522847,20 16,20 L6,20 C5.44771525,20 5,19.5522847 5,19 L5,9 C5,8.44771525 5.44771525,8 6,8 L8,8 L8,6 C8,5.44771525 8.44771525,5 9,5 L19,5 Z M8,9 L6,9 L6,19 L16,19 L16,17 L9,17 C8.44771525,17 8,16.5522847 8,16 L8,9 Z M19,6 L9,6 L9,16 L19,16 L19,6 Z"}))),a.createElement(Ot.a.Menu,{as:mn},a.createElement(Ot.a.Header,null,"Layers"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("FullyConnected")}},"Fully Connected"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Convolutional")}},"Convolutional"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("MaxPooling")}},"Max Pooling"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Dropout")}},"Dropout"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("BatchNormalization")}},"Batch Norm"),a.createElement(Ot.a.Header,null,"Actions"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Concatenate")}},"Concatenate"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Flatten")}},"Flatten"),a.createElement(Ot.a.Item,{onClick:function(){return e.createShape("Addition")}},"Add")))),a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-template"},"Select Pretrained Networks"),placement:"right"},a.createElement("button",{onClick:function(){return e.handleSetModal(!0)}},a.createElement("svg",{viewBox:"0 1 24 24",fill:"currentColor",width:"24",height:"24"},a.createElement("path",{d:"M17,17.8999819 L17,19 C17,19.5522847 16.5522847,20 16,20 L7,20 C6.44771525,20 6,19.5522847 6,19 L6,6 C6,5.44771525 6.44771525,5 7,5 L16,5 C16.5522847,5 17,5.44771525 17,6 L17,8.10001812 C19.2822403,8.56328845 21,10.5810421 21,13 C21,14.2006351 20.5768174,15.3024306 19.8714727,16.1643659 L21.8535534,18.1464466 C22.0488155,18.3417088 22.0488155,18.6582912 21.8535534,18.8535534 C21.6582912,19.0488155 21.3417088,19.0488155 21.1464466,18.8535534 L19.1643659,16.8714727 C18.5482866,17.3756268 17.8096662,17.7356283 17,17.8999819 L17,17.8999819 Z M16,8 L16,6 L7,6 L7,19 L16,19 L16,18 C13.2385763,18 11,15.7614237 11,13 C11,10.2385763 13.2385763,8 16,8 L16,8 Z M16,17 C18.209139,17 20,15.209139 20,13 C20,10.790861 18.209139,9 16,9 C13.790861,9 12,10.790861 12,13 C12,15.209139 13.790861,17 16,17 Z"})))),a.createElement(gt.a,{overlay:a.createElement(vt.a,{id:"tooltip-generate-code"},"Generate Code"),placement:"right"},a.createElement("button",{onClick:function(){return e.handleSetCodeModal(!0)}},a.createElement("svg",{viewBox:"0 1.5 24 24",fill:"currentColor",width:"24",height:"24"},a.createElement("path",{d:"M10.9743282,17.1581541 C10.8869821,17.4201184 10.6038101,17.5616743 10.3418459,17.4743282 C10.0798816,17.3869821 9.93832565,17.1038101 10.0256718,16.8418459 L12.9296415,8.13239986 C13.0169876,7.87043562 13.3001596,7.72887965 13.5621239,7.81622576 C13.8240881,7.90357187 13.9656441,8.18674387 13.878298,8.44870812 L10.9743282,17.1581541 Z M4.47182532,12.5 L8.27591774,14.7824555 C8.51270787,14.9245295 8.5894904,15.2316597 8.44741632,15.4684498 C8.30534224,15.7052399 7.99821212,15.7820225 7.76142198,15.6399484 L3.24275212,12.9287465 C2.91908263,12.7345448 2.91908263,12.2654552 3.24275212,12.0712535 L7.77718725,9.35059246 C8.01397739,9.20851838 8.32110752,9.28530091 8.4631816,9.52209104 C8.60525568,9.75888118 8.52847314,10.0660113 8.29168301,10.2080854 L4.47182532,12.5 Z M15.7241578,14.7777259 L19.5282502,12.4952704 L15.7083926,10.2033558 C15.4716024,10.0612817 15.3948199,9.75415159 15.536894,9.51736146 C15.678968,9.28057133 15.9860982,9.2037888 16.2228883,9.34586288 L20.7573234,12.066524 C21.0809929,12.2607257 21.0809929,12.7298152 20.7573234,12.9240169 L16.2386536,15.6352188 C16.0018634,15.7772929 15.6947333,15.7005103 15.5526592,15.4637202 C15.4105852,15.2269301 15.4873677,14.9198 15.7241578,14.7777259 Z"}))))),a.createElement(Kt,{show:this.state.modalShow,onHide:function(){return e.handleSetModal(!1)}}),this.state.codeModalShow&&a.createElement(cn,{show:this.state.codeModalShow,onHide:function(){return e.handleSetCodeModal(!1)}}))}}]),n}(a.Component),fn=Object(l.b)((function(e){return{shapes:e.shapes,config:e.config}}),{addShape:function(e){return{type:"ADD_SHAPE",payload:e}},editActiveShape:g,updateMouseLocation:Tt,addToast:en})(hn),En=(n(205),function(e,t,n,a){return e-n+t-a}),yn=function(e,t,n,a,r){var o,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=-1*(n-r)/(t-a);l<0&&!0===i&&(e*=-1);var s=Math.atan(l),c=e*Math.sin(s);return o=c+t,[o+=5,n+e*Math.cos(s)]},gn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handlePointerDown=function(e){var t=e.target,n=t.getBoundingClientRect(),r=e.clientX-n.left,o=e.clientY-n.top;t.setPointerCapture(e.pointerId),a.setState((function(e){return{currentMove:!0,historyX:e.x,historyY:e.y,offset:{x:r,y:o}}}))},a.handlePointerMove=function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=a.state.x-(a.state.offset.x-n),i=a.state.y-(a.state.offset.y-r);a.state.currentMove&&(a.setState({x:o<0?0:o,y:i<0?0:i}),a.props.updateShapePositionAction(a.props.currentShape.timestamp,o<0?0:o,i<0?0:i),a.props.shapes.sourceShape&&a.props.shapes.sourceShape.timestamp!==a.props.currentShape.timestamp&&Math.abs(En(a.state.x,a.state.y,a.state.historyX,a.state.historyY))>10&&a.props.editActiveShape(-1))},a.handlePointerUp=function(){if(a.setState({currentMove:!1}),Math.abs(En(a.state.x,a.state.y,a.state.historyX,a.state.historyY))<6){if(a.props.updateMouseLocation(a.state.x+a.props.currentShape.centerPosition[a.props.config.designTemplate][0],a.state.y+a.props.currentShape.centerPosition[a.props.config.designTemplate][1]),a.props.shapes.sourceShape&&a.props.shapes.sourceShape.timestamp!==a.props.currentShape.timestamp){var e=a.props.shapes.sourceShape;t=e,n=a.props.currentShape,r=a.props.shapes.arrows,o=a.props.addToast,(r.has([n,t])?(o("Illegal Arrow Drawing","Cannot draw bidirectional arrow. \n\t\tSeems like you already have an arrow on the opposite side."),0):n.shape===be?(o("Illegal Arrow Drawing","Cannot draw arrow to Input layer."),0):n.shape!==he&&n.shape!==le&&r.getConnectedToMeCount(n)>0?(o("Illegal Arrow Drawing","Please use Concatenate or Addition layer if you \n\t\twant to multiple arrows to the same layer."),0):t.shape!==Le||(o("Illegal Arrow Drawing","Cannot draw arrows from Output layer."),0))&&a.props.addArrowAndUpdateConnections(e,a.props.currentShape)}a.props.editActiveShape(a.props.currentShape.timestamp)}var t,n,r,o},a.state={x:a.props.currentShape.x,y:a.props.currentShape.y,historyX:100,historyY:100,currentMove:!1,offset:{x:0,y:0}},a}return Object(d.a)(n,[{key:"render",value:function(){return a.createElement("svg",{className:"draggableSVG",x:this.props.currentShape.x,y:this.props.currentShape.y,onPointerDown:this.handlePointerDown,onPointerUp:this.handlePointerUp,onPointerMove:this.handlePointerMove},this.props.children)}}]),n}(a.PureComponent),vn=Object(l.b)((function(e){return{shapes:e.shapes,toasts:e.toasts,config:e.config}}),{editActiveShape:g,updateShapePositionAction:v,addArrowAndUpdateConnections:function(e,t){return{type:"ADD_ARROW",payload:{source:e,target:t}}},updateMouseLocation:Tt,addToast:en})(gn),Cn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).filledArrow=function(e,t,n,r,o,i){var l=(n+o)/2,s=(r+i)/2;return a.createElement("polyline",{key:e.timestamp+" "+t.timestamp,markerMid:"url(#arrow)",points:"".concat(n,",").concat(r," ").concat(l,",").concat(s," ").concat(o,",").concat(i),fill:"none",stroke:"black"})},e.abstractArrowPolygon=function(t,n,r,o,i,l,s){var c=e.props.shapes.sourceArrow&&e.props.shapes.sourceArrow.source.timestamp===t.timestamp&&e.props.shapes.sourceArrow.target.timestamp===n.timestamp;t.shape===B&&(r+=8);var p,u,d=[],m=r+2*t.centerPosition[e.props.config.designTemplate][0],h=o+t.centerPosition[e.props.config.designTemplate][1],f=l+n.centerPosition[e.props.config.designTemplate][1],E=0;if(E=o<l?(o+2*t.centerPosition[e.props.config.designTemplate][1]+l)/2:(o+l+2*n.centerPosition[e.props.config.designTemplate][1])/2,d.push([m,h]),d.push([m+60,h]),d.push([m+60,E]),d.push([i-60,E]),d.push([i-60,f]),d.push([i,f]),s!==$e){var y=yn(20,d[4][0],d[4][1],d[5][0],d[5][1]),g=Object(pn.a)(y,2);p=g[0],u=g[1]}return a.createElement(a.Fragment,{key:t.timestamp+" "+n.timestamp},a.createElement("polyline",{markerEnd:"url(#"+(c?"bigArrowActive":"bigArrow")+")",points:d.map((function(e){return e.join(",")})).join(" "),fill:"none",stroke:c?"red":"#7788b0",strokeWidth:"4",onClick:function(){return e.props.handleArrowClick(t,n)}}),s!==$e&&a.createElement("text",{x:p,y:u,alignmentBaseline:"middle",textAnchor:"middle",fontSize:"12px",fontWeight:"bold"},s))},e.abstractArrow=function(t,n,r,o,i,l,s){var c=e.props.shapes.sourceArrow&&e.props.shapes.sourceArrow.source.timestamp===t.timestamp&&e.props.shapes.sourceArrow.target.timestamp===n.timestamp;t.shape===B&&(r+=8);var p,u,d=(r+i)/2,m=(o+l)/2;if(s!==$e){var h=12+2*s.length,f=yn(h,d,m,i,l,!0),E=Object(pn.a)(f,2);p=E[0],u=E[1]}return a.createElement(a.Fragment,{key:t.timestamp+" "+n.timestamp},a.createElement("polyline",{markerEnd:"url(#"+(c?"bigArrowActive":"bigArrow")+")",points:"".concat(r,",").concat(o," ").concat(i,",").concat(l),fill:"none",stroke:c?"red":"#7788b0",strokeWidth:"4",onClick:function(){return e.props.handleArrowClick(t,n)}}),s!==$e&&a.createElement("text",{x:p,y:u,alignmentBaseline:"middle",textAnchor:"middle",fontSize:"12px",fontWeight:"bold"},s))},e.fullyConnectedArrows=function(t,n,r,o,i,l,s){var c=new Array(t.additionalInfo.nodesCount).fill(0),p=new Array(n.additionalInfo.nodesCount).fill(0),u=Math.abs((c.length-1)/2),d=Math.abs((p.length-1)/2),m=[],h=e.props.shapes.sourceArrow&&e.props.shapes.sourceArrow.source.timestamp===t.timestamp&&e.props.shapes.sourceArrow.target.timestamp===n.timestamp,f=0,E=0;return a.createElement(a.Fragment,{key:t.timestamp+" "+n.timestamp},c.map((function(e,y){return p.map((function(e,g){if(y===u||g===d)return null;var v,C,b,A;if(r<i?(v=r+D+j,C=o+D+j/2+(j+D)*y,b=i-3,A=l+D+j/2+(j+D)*g):(v=r+1,C=o+D+j/2+(j+D)*y,b=i+D+j+3,A=l+D+j/2+(j+D)*g),0===y&&0===g)m.push([v,C],[b,A]);else if(y===c.length-1&&g===p.length-1&&(m.push([b,A],[v,C]),s!==$e)){var w=(b+v)/2,S=(A+C)/2,x=12+2*s.length,k=yn(x,w,S,v,C),P=Object(pn.a)(k,2);f=P[0],E=P[1]}return a.createElement("polyline",{key:t.timestamp+" "+n.timestamp+" "+y+" "+g,markerEnd:"url(#smallArrow)",points:"".concat(v,",").concat(C," ").concat(b,",").concat(A),fill:"none",stroke:h?"red":"rgba(0,0,0,.2)"})}))})),a.createElement("polyline",{points:m.map((function(e){return e.join(",")})).join(" "),fill:"transparent",stroke:"none",onClick:function(){return e.props.handleArrowClick(t,n)}}),s!==$e&&a.createElement("text",{x:f,y:E,alignmentBaseline:"middle",textAnchor:"middle",fontSize:"12px",fontWeight:"bold"},s))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return a.createElement(a.Fragment,null,this.props.shapes.arrows.getList().map((function(t){var n=Object(pn.a)(t,3),a=n[0],r=n[1],o=n[2],i=a.x,l=r.x,s=a.y,c=r.y;return e.props.config.designTemplate===w?e.filledArrow(a,r,i+a.centerPosition[e.props.config.designTemplate][0],s+a.centerPosition[e.props.config.designTemplate][1],l+r.centerPosition[e.props.config.designTemplate][0],c+r.centerPosition[e.props.config.designTemplate][1]):a.shape===B&&r.shape===B?e.fullyConnectedArrows(a,r,i,s,l,c,o):i<l?e.abstractArrow(a,r,i+a.centerPosition[e.props.config.designTemplate][0],s+a.centerPosition[e.props.config.designTemplate][1],l-3,c+r.centerPosition[e.props.config.designTemplate][1],o):e.abstractArrowPolygon(a,r,i,s,l-3,c,o)})))}}]),n}(a.Component),bn=Object(l.b)((function(e){return{shapes:e.shapes,config:e.config}}))(Cn),An=function(e){return a.createElement("defs",null,a.createElement("marker",{orient:"auto",id:"arrow",refX:"0",refY:"7",markerWidth:"80",markerHeight:"80"},a.createElement("polygon",{points:"2,7 0,0 11,7 0,14",stroke:"red",fill:"red"})),a.createElement("marker",{orient:"auto",id:"bigArrow",refX:"2.5",refY:"2.2",markerWidth:"80",markerHeight:"80"},a.createElement("polygon",{points:"2,7 0,0 11,7 0,14",stroke:"#7788b0",fill:"#7788b0",transform:"scale(0.3)"})),a.createElement("marker",{orient:"auto",id:"bigArrowActive",refX:"2.5",refY:"2.2",markerWidth:"80",markerHeight:"80"},a.createElement("polygon",{points:"2,7 0,0 11,7 0,14",stroke:"red",fill:"red",transform:"scale(0.3)"})),a.createElement("marker",{orient:"auto",id:"smallArrow",refX:"1",refY:"4",markerWidth:"20",markerHeight:"20"},a.createElement("polygon",{points:"2,7 0,0 11,7 0,14",stroke:"#909da6",fill:"#909da6",transform:"scale(0.5)"})))},wn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).refElement=a.createRef(),e.state={isMouseInsideSVG:!1},e.handleArrowClick=function(t,n){e.props.editActiveShape(-1),e.props.editActiveArrow(t,n)},e.handleClick=function(t){t.currentTarget===t.target&&e.props.editActiveShape(-1)},e.handlePointerMovement=function(t){if(e.props.shapes.sourceShape){var n=t.nativeEvent.offsetX,a=t.nativeEvent.offsetY;e.props.updateMouseLocation(n,a)}e.setState({isMouseInsideSVG:!0})},e.handleRightClick=function(t){e.handleClick(t),t.preventDefault()},e.handleKeyDown=function(t){if(27===t.keyCode)e.props.editActiveShape(-1);else if(e.props.shapes.sourceShape&&[65,87,68,83,37,38,39,40].includes(t.keyCode)){var n=e.props.shapes.sourceShape.x,a=e.props.shapes.sourceShape.y,r=e.props.shapes.sourceShape.timestamp;87===t.keyCode||38===t.keyCode?(e.props.updateShapePositionAction(r,n,a-5),t.preventDefault()):83===t.keyCode||40===t.keyCode?(e.props.updateShapePositionAction(r,n,a+5),t.preventDefault()):65===t.keyCode||37===t.keyCode?e.props.updateShapePositionAction(r,n-5,a):68!==t.keyCode&&39!==t.keyCode||(e.props.updateShapePositionAction(r,n+5,a),t.preventDefault())}else 46!==t.keyCode&&8!==t.keyCode||(e.props.shapes.sourceShape?(e.props.shapes.sourceShape.shape!==be&&e.props.shapes.sourceShape.shape!==Le?e.props.deleteShape():e.props.addToast("Removal Error","You cannot remove Input / Output layers."),e.props.editActiveShape(-1)):e.props.shapes.sourceArrow&&(e.props.deleteArrow(),e.props.editActiveShape(-1)))},e.handleMouseLeave=function(){e.setState({isMouseInsideSVG:!1})},e.handleMouseEnter=function(){e.setState({isMouseInsideSVG:!0})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.setShapes(Et,ft),this.props.updateSVGRef(this.refElement.current)}},{key:"render",value:function(){var e=this,t=this.props.shapes.sourceArrow||this.props.shapes.sourceShape;return a.createElement("div",{className:t?"diagram-container short-container":"diagram-container"},a.createElement("svg",{className:"svg-container",onClick:this.handleClick,onMouseMove:this.handlePointerMovement,onContextMenu:this.handleRightClick,onKeyDown:this.handleKeyDown,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,role:"button",tabIndex:0,ref:this.refElement},a.createElement(An,null),this.props.shapes.sourceShape&&this.state.isMouseInsideSVG?a.createElement("line",{onClick:this.handleClick,onContextMenu:this.handleRightClick,x1:this.props.shapes.sourceShape.x+this.props.shapes.sourceShape.centerPosition[this.props.config.designTemplate][0],y1:this.props.shapes.sourceShape.y+this.props.shapes.sourceShape.centerPosition[this.props.config.designTemplate][1],x2:this.props.mouse.xPointer,y2:this.props.mouse.yPointer,style:{stroke:"rgb(255,0,0)",strokeWidth:2}}):null,a.createElement(bn,{handleArrowClick:this.handleArrowClick}),this.props.shapes.shapes.map((function(t){return a.createElement(vn,{isMarked:!(!e.props.shapes.sourceShape||t.timestamp!==e.props.shapes.sourceShape.timestamp),currentShape:t,key:t.timestamp},a.createElement(t.shape,{isMarked:!(!e.props.shapes.sourceShape||t.timestamp!==e.props.shapes.sourceShape.timestamp),additionalInfo:t.additionalInfo,templateDesign:e.props.config.designTemplate}))}))))}}]),n}(a.PureComponent),Sn=Object(l.b)((function(e){return{shapes:e.shapes,mouse:e.mouse,config:e.config}}),{editActiveShape:g,updateMouseLocation:Tt,updateShapePositionAction:v,setShapes:f,editActiveArrow:function(e,t){return{type:"EDIT_ARROW_ACTIVATION",meta:{sourceShape:e,targetShape:t}}},deleteShape:E,deleteArrow:y,addToast:en,updateSVGRef:function(e){return{type:"UPDATE_SVG_REF",payload:{svgRef:e}}}})(wn),xn=(n(493),n(130)),kn=function(e){return a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Parameters"),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Input",a.createElement("br",null),"Dimension"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.inputDimension,onChange:function(t){return e.handleParamaterChange(t,"inputDimension")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})),a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Output",a.createElement("br",null),"Dimension"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.outputDimension,onChange:function(t){return e.handleParamaterChange(t,"outputDimension")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})))),a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Style"),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,null,"Layers Size"),a.createElement(At.a,null,a.createElement(At.a.Check,{custom:!0,checked:5===e.shapeAdditionalInfo.nodesCount,type:"radio",label:"Small size",name:"fcstyle",id:"fc-small",onChange:function(){return e.handleParameterChangeByValue(5,"nodesCount")}}),a.createElement(At.a.Check,{custom:!0,checked:7===e.shapeAdditionalInfo.nodesCount,type:"radio",label:"Medium size",name:"fcstyle",id:"fc-medium",onChange:function(){return e.handleParameterChangeByValue(7,"nodesCount")}}),a.createElement(At.a.Check,{custom:!0,checked:9===e.shapeAdditionalInfo.nodesCount,type:"radio",label:"Large size",name:"fcstyle",id:"fc-large",onChange:function(){return e.handleParameterChangeByValue(9,"nodesCount")}}))))))},Pn=function(e){return a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Parameters"),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"In",a.createElement("br",null),"Channels"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.inChannels,onChange:function(t){return e.handleParamaterChange(t,"inChannels")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})),a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Out",a.createElement("br",null),"Channels"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.outChannels,onChange:function(t){return e.handleParamaterChange(t,"outChannels")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"}))),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Kernel Size"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.kernelSize,onChange:function(t){return e.handleParamaterChange(t,"kernelSize")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})),a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Stride"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.stride,onChange:function(t){return e.handleParamaterChange(t,"stride")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})))))},Ln=function(e){return a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Parameters"),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Kernel Size"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.kernelSize,onChange:function(t){return e.handleParamaterChange(t,"kernelSize")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})))))},On=function(e){return a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Parameters"),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Probability of an element to be zeroed"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.p,onChange:function(t){return e.handleParamaterChange(t,"p")},size:"sm",bsPrefix:"form-control fixed-size",type:"number",step:"0.1",max:"1",min:"0"})))))},Tn=function(e){return a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Parameters"),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Select Dimension"),a.createElement(At.a.Control,{as:"select",value:e.shapeAdditionalInfo.dimension,onChange:function(t){return e.handleParamaterChangeSelect(t,"dimension")}},a.createElement("option",null,"2D"),a.createElement("option",null,"1D")))),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Number of Features"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.numFeatures,onChange:function(t){return e.handleParamaterChange(t,"numFeatures")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})))))},In=function(e){return a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Parameters"),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Activation Function"),a.createElement(At.a.Control,{as:"select",value:e.shapeAdditionalInfo.activation,onChange:function(t){return e.handleParamaterChangeSelect(t,"activation")}},a.createElement("option",{value:$e},"None"),a.createElement("option",{value:"Softmax"},"Softmax"),a.createElement("option",{value:"Log Softmax"},"Log Softmax"))))))},Mn=function(e){return a.createElement(a.Fragment,null,a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Parameters"),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Input type"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.type,onChange:function(t){return e.handleParamaterChange(t,"type")},size:"sm",bsPrefix:"form-control fixed-size"}))),a.createElement(Xt.a,null,a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Array Dimension"),a.createElement(At.a.Control,{as:"select",value:e.shapeAdditionalInfo.dimension,onChange:function(t){return e.handleParamaterChangeSelect(t,"dimension")}},a.createElement("option",null,"1D"),a.createElement("option",null,"2D"),a.createElement("option",null,"3D")))),"1D"===e.shapeAdditionalInfo.dimension&&a.createElement(Xt.a,{style:{marginTop:"5px"}},a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Dimension 1",a.createElement("br",null),"Size"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.dim1,onChange:function(t){return e.handleParamaterChange(t,"dim1")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"}))),"2D"===e.shapeAdditionalInfo.dimension&&a.createElement(Xt.a,{style:{marginTop:"5px"}},a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Dimension 1",a.createElement("br",null),"Size"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.dim1,onChange:function(t){return e.handleParamaterChange(t,"dim1")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})),a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Dimension 2",a.createElement("br",null),"Size"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.dim2,onChange:function(t){return e.handleParamaterChange(t,"dim2")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"}))),"3D"===e.shapeAdditionalInfo.dimension&&a.createElement(a.Fragment,null,a.createElement(Xt.a,{style:{marginTop:"5px"}},a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Dimension 1",a.createElement("br",null),"Size"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.dim1,onChange:function(t){return e.handleParamaterChange(t,"dim1")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"})),a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Dimension 2",a.createElement("br",null),"Size"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.dim2,onChange:function(t){return e.handleParamaterChange(t,"dim2")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"}))),a.createElement(Xt.a,{style:{marginTop:"5px"}},a.createElement(qt.a,null,a.createElement(At.a.Label,{style:{fontSize:12}},"Dimension 3",a.createElement("br",null),"Size"),a.createElement(At.a.Control,{value:e.shapeAdditionalInfo.dim3,onChange:function(t){return e.handleParamaterChange(t,"dim3")},size:"sm",bsPrefix:"form-control fixed-size",type:"number"}))))))},jn=new Map;jn.set(B,kn),jn.set(te,Pn),jn.set(M,Ln),jn.set(Fe,On),jn.set(He,Tn),jn.set(Le,In),jn.set(be,Mn);var Dn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleParamaterChange=function(t,n){var a=t.target.value;e.props.setShapeAdditionalInfo(e.props.shapes.sourceShape.timestamp,n,a)},e.handleArrowActivationChange=function(t){var n=t.target.value;e.props.editActivationFunction(n)},e.handleParamaterChangeSelect=function(t,n){var a=t.target.value;e.props.setShapeAdditionalInfo(e.props.shapes.sourceShape.timestamp,n,a)},e.handleParameterChangeByValue=function(t,n){e.props.setShapeAdditionalInfo(e.props.shapes.sourceShape.timestamp,n,t),e.props.shapes.sourceShape&&e.props.shapes.sourceShape.shape===B&&e.props.updateCenterPosition(e.props.config.designTemplate,B.centerPositionAbstract(+t))},e.handleChangeName=function(t){e.props.editShapeName(e.props.shapes.sourceShape.timestamp,t.target.value)},e.handleChangePosition=function(t,n){var a=+t.target.value;0===n?e.props.updateShapePositionAction(e.props.shapes.sourceShape.timestamp,a>0?a:0,e.props.shapes.sourceShape.y):e.props.updateShapePositionAction(e.props.shapes.sourceShape.timestamp,e.props.shapes.sourceShape.x,a>0?a:0)},e.handleDescriptionChange=function(t){e.props.updateShapeDescription(e.props.shapes.sourceShape.timestamp,t.target.value)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;if(this.props.shapes.sourceShape){var t=this.props.shapes.sourceShape,n=void 0;return jn.has(t.shape)&&(n=a.createElement(jn.get(t.shape),{handleParamaterChange:this.handleParamaterChange,handleParameterChangeByValue:this.handleParameterChangeByValue,handleParamaterChangeSelect:this.handleParamaterChangeSelect,shapeAdditionalInfo:t.additionalInfo})),a.createElement("aside",{className:"component-info"},a.createElement("h6",{style:{textAlign:"center"}},"Layer Properties"),a.createElement("hr",null),a.createElement(At.a.Group,{controlId:"layerName"},a.createElement(At.a.Label,null,"Layer name"),a.createElement(At.a.Control,{type:"text",placeholder:"Layer Name",value:t.name,onChange:this.handleChangeName})),n,a.createElement("hr",null),a.createElement(At.a.Group,null,a.createElement(At.a.Label,null,"Layer Position"),a.createElement(Xt.a,null,a.createElement(qt.a,{style:{paddingRight:"3px"}},a.createElement(At.a.Control,{type:"number",step:"5",placeholder:"X",size:"sm",bsPrefix:"form-control fixed-size",value:t.x,onChange:function(t){return e.handleChangePosition(t,0)}})),a.createElement(qt.a,{style:{paddingLeft:"3px"}},a.createElement(At.a.Control,{type:"number",step:"5",placeholder:"Y",size:"sm",bsPrefix:"form-control fixed-size",value:t.y,onChange:function(t){return e.handleChangePosition(t,1)}})))),a.createElement(At.a.Group,{controlId:"description"},a.createElement(xn.a,{defaultActiveKey:t.description?"1":"0"},a.createElement(xn.a.Toggle,{as:At.a.Label,eventKey:"1",id:"basic-nav-dropdown"},"Description ",a.createElement("span",{className:"dropdown-icon"})),a.createElement(xn.a.Collapse,{eventKey:"1"},a.createElement(At.a.Control,{as:"textarea",rows:"3",onChange:this.handleDescriptionChange,value:t.description?t.description:""})))))}if(this.props.shapes.sourceArrow){var r=this.props.shapes.arrows.get([this.props.shapes.sourceArrow.source,this.props.shapes.sourceArrow.target]);return a.createElement("aside",{className:"component-info"},a.createElement("h6",{style:{textAlign:"center"}},"Arrow Properties"),a.createElement("hr",null),a.createElement(At.a.Group,{controlId:"activation-function"},a.createElement(At.a.Label,null,"Activation Function"),a.createElement(At.a.Control,{value:r,as:"select",style:{paddingRight:"10px"},onChange:this.handleArrowActivationChange},a.createElement("option",{value:$e},"None"),a.createElement("option",{value:"Sigmoid"},"Sigmoid"),a.createElement("option",{value:"ReLU"},"ReLU"),a.createElement("option",{value:"Tanh"},"Tanh"))))}return null}}]),n}(a.Component),Fn=Object(l.b)((function(e){return{shapes:e.shapes,config:e.config}}),{editShapeName:function(e,t){return{type:"EDIT_SHAPE_NAME",payload:{timestamp:e,newName:t}}},updateShapePositionAction:v,updateShapeDescription:function(e,t){return{type:"UPDATE_SHAPE_DESCRIPTION",payload:{timestamp:e,desc:t}}},setShapeAdditionalInfo:function(e,t,n){return{type:"SET_SHAPE_ADDITONAL_INFO",payload:{timestamp:e,key:t,value:n}}},editActivationFunction:function(e){return{type:"EDIT_ACTIVATION_FUNCTION",payload:{func:e}}},updateCenterPosition:function(e,t){return{type:"UPDATE_SHAPE_CENTER_POSITION",payload:{newPosition:t,template:e}}}})(Dn),zn=n(131);var Nn=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleNotificationRemoval=function(t){e.props.removeToast(t)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=(new Date).getTime()+3e3;return a.createElement("div",{"aria-live":"polite","aria-atomic":"true",style:{position:"fixed",zIndex:999,bottom:20,left:15}},this.props.toasts.notifications.map((function(n){return a.createElement(zn.a,{key:n.timestamp,onClose:function(){return e.handleNotificationRemoval(n.timestamp)},show:!0,delay:t-n.timestamp,autohide:!0},a.createElement(zn.a.Header,null,a.createElement("strong",{className:"mr-auto"},n.title),a.createElement("small",null,function(e){var t=Math.floor(((new Date).getTime()-e)/1e3),n=Math.floor(t/31536e3);return n>1?n+" years":(n=Math.floor(t/2592e3))>1?n+" months":(n=Math.floor(t/86400))>1?n+" days":(n=Math.floor(t/3600))>1?n+" hours":(n=Math.floor(t/60))>1?n+" minutes":t<=7?"just now":Math.floor(t)+" seconds"}(n.timestamp))),a.createElement(zn.a.Body,null,n.desc))})))}}]),n}(a.Component),_n=Object(l.b)((function(e){return{toasts:e.toasts}}),{addToast:en,removeToast:function(e){return{type:"REMOVE_TOAST",meta:{timestamp:e}}}})(Nn),Bn=(n(494),function(e){var t=Object(a.useState)(!0),n=Object(pn.a)(t,2),o=n[0],i=n[1],l=function(){return i(!1)},s="undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile");return r.a.createElement(It.a,{show:s&&o,onHide:l,centered:!0},r.a.createElement(It.a.Header,{closeButton:!0},r.a.createElement(It.a.Title,null,"Notification")),r.a.createElement(It.a.Body,null,r.a.createElement("p",null,"This website is not yet fully compatible with mobile devices."),r.a.createElement("p",null,"We suggest you to consider open this website using desktop browser.")),r.a.createElement(It.a.Footer,null,r.a.createElement(Pt.a,{variant:"secondary",onClick:l},"I Understand")))});var Rn=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Bn,null),r.a.createElement(kt,null),r.a.createElement(fn,null),r.a.createElement(Sn,null),r.a.createElement(Fn,null),r.a.createElement(_n,null))},Wn=n(69),Hn=n(216),Gn=n(217),Un=n(74),Vn={shapes:[],arrows:new nt};var Zn={xPointer:0,yPointer:0};var Kn={notifications:[]};var Yn={designTemplate:A};var Xn=Object(Wn.combineReducers)({shapes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0,n=Object(Un.a)(e.shapes);switch(t.type){case"ADD_SHAPE":return Object(b.a)({},e,{shapes:[].concat(Object(Un.a)(e.shapes),[t.payload])});case"SET_SHAPES":return Object(b.a)({},e,{shapes:Object(Un.a)(t.payload.shapes),arrows:t.payload.arrows||new nt,sourceShape:void 0});case"DELETE_SHAPE":if(e.sourceShape){var a=new nt(e.arrows);return a.deleteShapeArrows(e.sourceShape),Object(b.a)({},e,{shapes:e.shapes.filter((function(t){return t.timestamp!==e.sourceShape.timestamp})),sourceShape:void 0,arrows:a})}return e;case"DELETE_ARROW":if(e.sourceArrow){var r=new nt(e.arrows);return r.deleteArrow([e.sourceArrow.source,e.sourceArrow.target]),Object(b.a)({},e,{arrows:r})}return e;case"UPDATE_SHAPE_CENTER_POSITION":if(e.sourceShape){var o=n.find((function(t){return t.timestamp===e.sourceShape.timestamp}));return o.centerPosition=Object.assign({},o.centerPosition),o.centerPosition[t.payload.template]=Object(Un.a)(t.payload.newPosition),Object(b.a)({},e,{shapes:n})}return e;case"EDIT_SHAPE_ACTIVATION":var i=e.shapes.find((function(e){return e.timestamp===t.meta.timestamp}));return Object(b.a)({},e,{sourceShape:i,sourceArrow:-1===t.meta.timestamp||i?void 0:e.sourceArrow});case"EDIT_ARROW_ACTIVATION":var l={source:t.meta.sourceShape,target:t.meta.targetShape};return Object(b.a)({},e,{sourceArrow:l});case"EDIT_SHAPE_NAME":var s=n.find((function(e){return e.timestamp===t.payload.timestamp}));return s.name=t.payload.newName,Object(b.a)({},e,{shapes:n});case"UPDATE_SHAPE_LOCATION":var c=n.find((function(e){return e.timestamp===t.payload.timestamp}));return c.x=t.payload.x,c.y=t.payload.y,Object(b.a)({},e,{shapes:n});case"UPDATE_SHAPE_DESCRIPTION":var p=n.find((function(e){return e.timestamp===t.payload.timestamp}));return p.description=t.payload.desc,Object(b.a)({},e,{shapes:n});case"ADD_ARROW":var u=t.payload.source,d=t.payload.target;if(e.arrows.has([u,d]))return e;if(e.arrows.has([d,u]))return e;var m=new nt(e.arrows);return m.set([u,d],$e),Object(b.a)({},e,{shapes:n,arrows:m});case"SET_SHAPE_ADDITONAL_INFO":var h=n.find((function(e){return e.timestamp===t.payload.timestamp}));return h.additionalInfo[t.payload.key]=t.payload.value,Object(b.a)({},e,{shapes:n});case"EDIT_ACTIVATION_FUNCTION":var f=new nt(e.arrows);return e.sourceArrow?(f.set([e.sourceArrow.source,e.sourceArrow.target],t.payload.func),Object(b.a)({},e,{arrows:f})):e;default:return e}},mouse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_LOCATION":return{xPointer:t.payload.x,yPointer:t.payload.y};default:return e}},toasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOAST":return Object(b.a)({},e,{notifications:[].concat(Object(Un.a)(e.notifications),[{timestamp:(new Date).getTime(),title:t.payload.title,desc:t.payload.desc}])});case"REMOVE_TOAST":return Object(b.a)({},e,{notifications:e.notifications.filter((function(e){return e.timestamp!==t.meta.timestamp}))});default:return e}},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_DESIGN_TEMPLATE":return Object(b.a)({},e,{designTemplate:t.payload.design});case"UPDATE_SVG_REF":return Object(b.a)({},e,{svgRef:t.payload.svgRef});default:return e}}});var qn=function(){var e=[Hn.a],t=Wn.applyMiddleware.apply(void 0,e);return Object(Wn.createStore)(Xn,Object(Gn.composeWithDevTools)(t))}();i.a.render(r.a.createElement(l.a,{store:qn},r.a.createElement(Rn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[218,1,2]]]);
//# sourceMappingURL=main.aad930cc.chunk.js.map